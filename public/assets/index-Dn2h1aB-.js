function WE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function Fp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function HE(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){var i=!1;try{i=this instanceof r}catch{}return i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var Kf={exports:{}},Ia={},Gf={exports:{}},qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xv;function qE(){if(xv)return qe;xv=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function w(O){return O===null||typeof O!="object"?null:(O=v&&O[v]||O["@@iterator"],typeof O=="function"?O:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,x={};function _(O,G,Te){this.props=O,this.context=G,this.refs=x,this.updater=Te||S}_.prototype.isReactComponent={},_.prototype.setState=function(O,G){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,G,"setState")},_.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function T(){}T.prototype=_.prototype;function C(O,G,Te){this.props=O,this.context=G,this.refs=x,this.updater=Te||S}var N=C.prototype=new T;N.constructor=C,E(N,_.prototype),N.isPureReactComponent=!0;var I=Array.isArray,D=Object.prototype.hasOwnProperty,A={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function $(O,G,Te){var ke,Oe={},Me=null,ue=null;if(G!=null)for(ke in G.ref!==void 0&&(ue=G.ref),G.key!==void 0&&(Me=""+G.key),G)D.call(G,ke)&&!L.hasOwnProperty(ke)&&(Oe[ke]=G[ke]);var me=arguments.length-2;if(me===1)Oe.children=Te;else if(1<me){for(var Ae=Array(me),be=0;be<me;be++)Ae[be]=arguments[be+2];Oe.children=Ae}if(O&&O.defaultProps)for(ke in me=O.defaultProps,me)Oe[ke]===void 0&&(Oe[ke]=me[ke]);return{$$typeof:t,type:O,key:Me,ref:ue,props:Oe,_owner:A.current}}function ee(O,G){return{$$typeof:t,type:O.type,key:G,ref:O.ref,props:O.props,_owner:O._owner}}function z(O){return typeof O=="object"&&O!==null&&O.$$typeof===t}function K(O){var G={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(Te){return G[Te]})}var q=/\/+/g;function J(O,G){return typeof O=="object"&&O!==null&&O.key!=null?K(""+O.key):G.toString(36)}function X(O,G,Te,ke,Oe){var Me=typeof O;(Me==="undefined"||Me==="boolean")&&(O=null);var ue=!1;if(O===null)ue=!0;else switch(Me){case"string":case"number":ue=!0;break;case"object":switch(O.$$typeof){case t:case e:ue=!0}}if(ue)return ue=O,Oe=Oe(ue),O=ke===""?"."+J(ue,0):ke,I(Oe)?(Te="",O!=null&&(Te=O.replace(q,"$&/")+"/"),X(Oe,G,Te,"",function(be){return be})):Oe!=null&&(z(Oe)&&(Oe=ee(Oe,Te+(!Oe.key||ue&&ue.key===Oe.key?"":(""+Oe.key).replace(q,"$&/")+"/")+O)),G.push(Oe)),1;if(ue=0,ke=ke===""?".":ke+":",I(O))for(var me=0;me<O.length;me++){Me=O[me];var Ae=ke+J(Me,me);ue+=X(Me,G,Te,Ae,Oe)}else if(Ae=w(O),typeof Ae=="function")for(O=Ae.call(O),me=0;!(Me=O.next()).done;)Me=Me.value,Ae=ke+J(Me,me++),ue+=X(Me,G,Te,Ae,Oe);else if(Me==="object")throw G=String(O),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return ue}function fe(O,G,Te){if(O==null)return O;var ke=[],Oe=0;return X(O,ke,"","",function(Me){return G.call(Te,Me,Oe++)}),ke}function Q(O){if(O._status===-1){var G=O._result;G=G(),G.then(function(Te){(O._status===0||O._status===-1)&&(O._status=1,O._result=Te)},function(Te){(O._status===0||O._status===-1)&&(O._status=2,O._result=Te)}),O._status===-1&&(O._status=0,O._result=G)}if(O._status===1)return O._result.default;throw O._result}var ce={current:null},H={transition:null},te={ReactCurrentDispatcher:ce,ReactCurrentBatchConfig:H,ReactCurrentOwner:A};function ne(){throw Error("act(...) is not supported in production builds of React.")}return qe.Children={map:fe,forEach:function(O,G,Te){fe(O,function(){G.apply(this,arguments)},Te)},count:function(O){var G=0;return fe(O,function(){G++}),G},toArray:function(O){return fe(O,function(G){return G})||[]},only:function(O){if(!z(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},qe.Component=_,qe.Fragment=n,qe.Profiler=i,qe.PureComponent=C,qe.StrictMode=r,qe.Suspense=h,qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,qe.act=ne,qe.cloneElement=function(O,G,Te){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var ke=E({},O.props),Oe=O.key,Me=O.ref,ue=O._owner;if(G!=null){if(G.ref!==void 0&&(Me=G.ref,ue=A.current),G.key!==void 0&&(Oe=""+G.key),O.type&&O.type.defaultProps)var me=O.type.defaultProps;for(Ae in G)D.call(G,Ae)&&!L.hasOwnProperty(Ae)&&(ke[Ae]=G[Ae]===void 0&&me!==void 0?me[Ae]:G[Ae])}var Ae=arguments.length-2;if(Ae===1)ke.children=Te;else if(1<Ae){me=Array(Ae);for(var be=0;be<Ae;be++)me[be]=arguments[be+2];ke.children=me}return{$$typeof:t,type:O.type,key:Oe,ref:Me,props:ke,_owner:ue}},qe.createContext=function(O){return O={$$typeof:l,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:a,_context:O},O.Consumer=O},qe.createElement=$,qe.createFactory=function(O){var G=$.bind(null,O);return G.type=O,G},qe.createRef=function(){return{current:null}},qe.forwardRef=function(O){return{$$typeof:u,render:O}},qe.isValidElement=z,qe.lazy=function(O){return{$$typeof:g,_payload:{_status:-1,_result:O},_init:Q}},qe.memo=function(O,G){return{$$typeof:p,type:O,compare:G===void 0?null:G}},qe.startTransition=function(O){var G=H.transition;H.transition={};try{O()}finally{H.transition=G}},qe.unstable_act=ne,qe.useCallback=function(O,G){return ce.current.useCallback(O,G)},qe.useContext=function(O){return ce.current.useContext(O)},qe.useDebugValue=function(){},qe.useDeferredValue=function(O){return ce.current.useDeferredValue(O)},qe.useEffect=function(O,G){return ce.current.useEffect(O,G)},qe.useId=function(){return ce.current.useId()},qe.useImperativeHandle=function(O,G,Te){return ce.current.useImperativeHandle(O,G,Te)},qe.useInsertionEffect=function(O,G){return ce.current.useInsertionEffect(O,G)},qe.useLayoutEffect=function(O,G){return ce.current.useLayoutEffect(O,G)},qe.useMemo=function(O,G){return ce.current.useMemo(O,G)},qe.useReducer=function(O,G,Te){return ce.current.useReducer(O,G,Te)},qe.useRef=function(O){return ce.current.useRef(O)},qe.useState=function(O){return ce.current.useState(O)},qe.useSyncExternalStore=function(O,G,Te){return ce.current.useSyncExternalStore(O,G,Te)},qe.useTransition=function(){return ce.current.useTransition()},qe.version="18.3.1",qe}var bv;function qu(){return bv||(bv=1,Gf.exports=qE()),Gf.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _v;function KE(){if(_v)return Ia;_v=1;var t=qu(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(u,h,p){var g,v={},w=null,S=null;p!==void 0&&(w=""+p),h.key!==void 0&&(w=""+h.key),h.ref!==void 0&&(S=h.ref);for(g in h)r.call(h,g)&&!a.hasOwnProperty(g)&&(v[g]=h[g]);if(u&&u.defaultProps)for(g in h=u.defaultProps,h)v[g]===void 0&&(v[g]=h[g]);return{$$typeof:e,type:u,key:w,ref:S,props:v,_owner:i.current}}return Ia.Fragment=n,Ia.jsx=l,Ia.jsxs=l,Ia}var Sv;function GE(){return Sv||(Sv=1,Kf.exports=KE()),Kf.exports}var d=GE();(()=>{if(typeof window>"u"||window.__localWsPatched)return;window.__localWsPatched=!0;const t=window.WebSocket;function e(n,r){try{const i=typeof n=="string"?n:n.toString(),a=window.location.host;if(i==="/ws"||i===`ws://${a}/ws`||i===`wss://${a}/ws`){console.warn("Blocking local /ws WebSocket on Vercel:",i);const u={readyState:3,close(){},send(){},addEventListener(){},removeEventListener(){},onopen:null,onmessage:null,onerror:null,onclose:null};return setTimeout(()=>u.onclose?.({code:1006,reason:"blocked /ws"}),0),u}}catch{}return new t(n,r)}e.prototype=t.prototype,window.WebSocket=e})();var b=qu();const ct=Fp(b),$p=WE({__proto__:null,default:ct},[b]);var $c={},Qf={exports:{}},pn={},Jf={exports:{}},Zf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kv;function QE(){return kv||(kv=1,(function(t){function e(H,te){var ne=H.length;H.push(te);e:for(;0<ne;){var O=ne-1>>>1,G=H[O];if(0<i(G,te))H[O]=te,H[ne]=G,ne=O;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var te=H[0],ne=H.pop();if(ne!==te){H[0]=ne;e:for(var O=0,G=H.length,Te=G>>>1;O<Te;){var ke=2*(O+1)-1,Oe=H[ke],Me=ke+1,ue=H[Me];if(0>i(Oe,ne))Me<G&&0>i(ue,Oe)?(H[O]=ue,H[Me]=ne,O=Me):(H[O]=Oe,H[ke]=ne,O=ke);else if(Me<G&&0>i(ue,ne))H[O]=ue,H[Me]=ne,O=Me;else break e}}return te}function i(H,te){var ne=H.sortIndex-te.sortIndex;return ne!==0?ne:H.id-te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var h=[],p=[],g=1,v=null,w=3,S=!1,E=!1,x=!1,_=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(H){for(var te=n(p);te!==null;){if(te.callback===null)r(p);else if(te.startTime<=H)r(p),te.sortIndex=te.expirationTime,e(h,te);else break;te=n(p)}}function I(H){if(x=!1,N(H),!E)if(n(h)!==null)E=!0,Q(D);else{var te=n(p);te!==null&&ce(I,te.startTime-H)}}function D(H,te){E=!1,x&&(x=!1,T($),$=-1),S=!0;var ne=w;try{for(N(te),v=n(h);v!==null&&(!(v.expirationTime>te)||H&&!K());){var O=v.callback;if(typeof O=="function"){v.callback=null,w=v.priorityLevel;var G=O(v.expirationTime<=te);te=t.unstable_now(),typeof G=="function"?v.callback=G:v===n(h)&&r(h),N(te)}else r(h);v=n(h)}if(v!==null)var Te=!0;else{var ke=n(p);ke!==null&&ce(I,ke.startTime-te),Te=!1}return Te}finally{v=null,w=ne,S=!1}}var A=!1,L=null,$=-1,ee=5,z=-1;function K(){return!(t.unstable_now()-z<ee)}function q(){if(L!==null){var H=t.unstable_now();z=H;var te=!0;try{te=L(!0,H)}finally{te?J():(A=!1,L=null)}}else A=!1}var J;if(typeof C=="function")J=function(){C(q)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,fe=X.port2;X.port1.onmessage=q,J=function(){fe.postMessage(null)}}else J=function(){_(q,0)};function Q(H){L=H,A||(A=!0,J())}function ce(H,te){$=_(function(){H(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){E||S||(E=!0,Q(D))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(H){switch(w){case 1:case 2:case 3:var te=3;break;default:te=w}var ne=w;w=te;try{return H()}finally{w=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,te){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ne=w;w=H;try{return te()}finally{w=ne}},t.unstable_scheduleCallback=function(H,te,ne){var O=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?O+ne:O):ne=O,H){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ne+G,H={id:g++,callback:te,priorityLevel:H,startTime:ne,expirationTime:G,sortIndex:-1},ne>O?(H.sortIndex=ne,e(p,H),n(h)===null&&H===n(p)&&(x?(T($),$=-1):x=!0,ce(I,ne-O))):(H.sortIndex=G,e(h,H),E||S||(E=!0,Q(D))),H},t.unstable_shouldYield=K,t.unstable_wrapCallback=function(H){var te=w;return function(){var ne=w;w=te;try{return H.apply(this,arguments)}finally{w=ne}}}})(Zf)),Zf}var Ev;function JE(){return Ev||(Ev=1,Jf.exports=QE()),Jf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cv;function ZE(){if(Cv)return pn;Cv=1;var t=qu(),e=JE();function n(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,c=1;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(s,o){l(s,o),l(s+"Capture",o)}function l(s,o){for(i[s]=o,s=0;s<o.length;s++)r.add(o[s])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function w(s){return h.call(v,s)?!0:h.call(g,s)?!1:p.test(s)?v[s]=!0:(g[s]=!0,!1)}function S(s,o,c,f){if(c!==null&&c.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:c!==null?!c.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function E(s,o,c,f){if(o===null||typeof o>"u"||S(s,o,c,f))return!0;if(f)return!1;if(c!==null)switch(c.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function x(s,o,c,f,m,y,k){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=m,this.mustUseProperty=c,this.propertyName=s,this.type=o,this.sanitizeURL=y,this.removeEmptyString=k}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){_[s]=new x(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var o=s[0];_[o]=new x(o,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){_[s]=new x(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){_[s]=new x(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){_[s]=new x(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){_[s]=new x(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){_[s]=new x(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){_[s]=new x(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){_[s]=new x(s,5,!1,s.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function C(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var o=s.replace(T,C);_[o]=new x(o,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var o=s.replace(T,C);_[o]=new x(o,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var o=s.replace(T,C);_[o]=new x(o,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){_[s]=new x(s,1,!1,s.toLowerCase(),null,!1,!1)}),_.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){_[s]=new x(s,1,!1,s.toLowerCase(),null,!0,!0)});function N(s,o,c,f){var m=_.hasOwnProperty(o)?_[o]:null;(m!==null?m.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(E(o,c,m,f)&&(c=null),f||m===null?w(o)&&(c===null?s.removeAttribute(o):s.setAttribute(o,""+c)):m.mustUseProperty?s[m.propertyName]=c===null?m.type===3?!1:"":c:(o=m.attributeName,f=m.attributeNamespace,c===null?s.removeAttribute(o):(m=m.type,c=m===3||m===4&&c===!0?"":""+c,f?s.setAttributeNS(f,o,c):s.setAttribute(o,c))))}var I=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),A=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),K=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),fe=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),ce=Symbol.for("react.offscreen"),H=Symbol.iterator;function te(s){return s===null||typeof s!="object"?null:(s=H&&s[H]||s["@@iterator"],typeof s=="function"?s:null)}var ne=Object.assign,O;function G(s){if(O===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);O=o&&o[1]||""}return`
`+O+s}var Te=!1;function ke(s,o){if(!s||Te)return"";Te=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(W){var f=W}Reflect.construct(s,[],o)}else{try{o.call()}catch(W){f=W}s.call(o.prototype)}else{try{throw Error()}catch(W){f=W}s()}}catch(W){if(W&&f&&typeof W.stack=="string"){for(var m=W.stack.split(`
`),y=f.stack.split(`
`),k=m.length-1,j=y.length-1;1<=k&&0<=j&&m[k]!==y[j];)j--;for(;1<=k&&0<=j;k--,j--)if(m[k]!==y[j]){if(k!==1||j!==1)do if(k--,j--,0>j||m[k]!==y[j]){var R=`
`+m[k].replace(" at new "," at ");return s.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",s.displayName)),R}while(1<=k&&0<=j);break}}}finally{Te=!1,Error.prepareStackTrace=c}return(s=s?s.displayName||s.name:"")?G(s):""}function Oe(s){switch(s.tag){case 5:return G(s.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return s=ke(s.type,!1),s;case 11:return s=ke(s.type.render,!1),s;case 1:return s=ke(s.type,!0),s;default:return""}}function Me(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case L:return"Fragment";case A:return"Portal";case ee:return"Profiler";case $:return"StrictMode";case J:return"Suspense";case X:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case K:return(s.displayName||"Context")+".Consumer";case z:return(s._context.displayName||"Context")+".Provider";case q:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case fe:return o=s.displayName||null,o!==null?o:Me(s.type)||"Memo";case Q:o=s._payload,s=s._init;try{return Me(s(o))}catch{}}return null}function ue(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Me(o);case 8:return o===$?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function me(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ae(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function be(s){var o=Ae(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),f=""+s[o];if(!s.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,y=c.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return m.call(this)},set:function(k){f=""+k,y.call(this,k)}}),Object.defineProperty(s,o,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(k){f=""+k},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function De(s){s._valueTracker||(s._valueTracker=be(s))}function Qe(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var c=o.getValue(),f="";return s&&(f=Ae(s)?s.checked?"true":"false":s.value),s=f,s!==c?(o.setValue(s),!0):!1}function pt(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function dt(s,o){var c=o.checked;return ne({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??s._wrapperState.initialChecked})}function Vt(s,o){var c=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;c=me(o.value!=null?o.value:c),s._wrapperState={initialChecked:f,initialValue:c,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function kt(s,o){o=o.checked,o!=null&&N(s,"checked",o,!1)}function Gt(s,o){kt(s,o);var c=me(o.value),f=o.type;if(c!=null)f==="number"?(c===0&&s.value===""||s.value!=c)&&(s.value=""+c):s.value!==""+c&&(s.value=""+c);else if(f==="submit"||f==="reset"){s.removeAttribute("value");return}o.hasOwnProperty("value")?Je(s,o.type,c):o.hasOwnProperty("defaultValue")&&Je(s,o.type,me(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(s.defaultChecked=!!o.defaultChecked)}function Ee(s,o,c){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+s._wrapperState.initialValue,c||o===s.value||(s.value=o),s.defaultValue=o}c=s.name,c!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,c!==""&&(s.name=c)}function Je(s,o,c){(o!=="number"||pt(s.ownerDocument)!==s)&&(c==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+c&&(s.defaultValue=""+c))}var P=Array.isArray;function U(s,o,c,f){if(s=s.options,o){o={};for(var m=0;m<c.length;m++)o["$"+c[m]]=!0;for(c=0;c<s.length;c++)m=o.hasOwnProperty("$"+s[c].value),s[c].selected!==m&&(s[c].selected=m),m&&f&&(s[c].defaultSelected=!0)}else{for(c=""+me(c),o=null,m=0;m<s.length;m++){if(s[m].value===c){s[m].selected=!0,f&&(s[m].defaultSelected=!0);return}o!==null||s[m].disabled||(o=s[m])}o!==null&&(o.selected=!0)}}function V(s,o){if(o.dangerouslySetInnerHTML!=null)throw Error(n(91));return ne({},o,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function de(s,o){var c=o.value;if(c==null){if(c=o.children,o=o.defaultValue,c!=null){if(o!=null)throw Error(n(92));if(P(c)){if(1<c.length)throw Error(n(93));c=c[0]}o=c}o==null&&(o=""),c=o}s._wrapperState={initialValue:me(c)}}function oe(s,o){var c=me(o.value),f=me(o.defaultValue);c!=null&&(c=""+c,c!==s.value&&(s.value=c),o.defaultValue==null&&s.defaultValue!==c&&(s.defaultValue=c)),f!=null&&(s.defaultValue=""+f)}function se(s){var o=s.textContent;o===s._wrapperState.initialValue&&o!==""&&o!==null&&(s.value=o)}function xe(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function He(s,o){return s==null||s==="http://www.w3.org/1999/xhtml"?xe(o):s==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var ie,ge=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,c,f,m){MSApp.execUnsafeLocalFunction(function(){return s(o,c,f,m)})}:s})(function(s,o){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=o;else{for(ie=ie||document.createElement("div"),ie.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=ie.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;o.firstChild;)s.appendChild(o.firstChild)}});function ze(s,o){if(o){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=o;return}}s.textContent=o}var je={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xt=["Webkit","ms","Moz","O"];Object.keys(je).forEach(function(s){xt.forEach(function(o){o=o+s.charAt(0).toUpperCase()+s.substring(1),je[o]=je[s]})});function mt(s,o,c){return o==null||typeof o=="boolean"||o===""?"":c||typeof o!="number"||o===0||je.hasOwnProperty(s)&&je[s]?(""+o).trim():o+"px"}function Et(s,o){s=s.style;for(var c in o)if(o.hasOwnProperty(c)){var f=c.indexOf("--")===0,m=mt(c,o[c],f);c==="float"&&(c="cssFloat"),f?s.setProperty(c,m):s[c]=m}}var Ze=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zt(s,o){if(o){if(Ze[s]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(n(137,s));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(n(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(n(61))}if(o.style!=null&&typeof o.style!="object")throw Error(n(62))}}function xr(s,o){if(s.indexOf("-")===-1)return typeof o.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Un=null;function Kr(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ni=null,Fn=null,Gr=null;function Ws(s){if(s=ga(s)){if(typeof Ni!="function")throw Error(n(280));var o=s.stateNode;o&&(o=tc(o),Ni(s.stateNode,s.type,o))}}function Il(s){Fn?Gr?Gr.push(s):Gr=[s]:Fn=s}function Rl(){if(Fn){var s=Fn,o=Gr;if(Gr=Fn=null,Ws(s),o)for(s=0;s<o.length;s++)Ws(o[s])}}function $m(s,o){return s(o)}function Bm(){}var cd=!1;function Vm(s,o,c){if(cd)return s(o,c);cd=!0;try{return $m(s,o,c)}finally{cd=!1,(Fn!==null||Gr!==null)&&(Bm(),Rl())}}function Qo(s,o){var c=s.stateNode;if(c===null)return null;var f=tc(c);if(f===null)return null;c=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(n(231,o,typeof c));return c}var ud=!1;if(u)try{var Jo={};Object.defineProperty(Jo,"passive",{get:function(){ud=!0}}),window.addEventListener("test",Jo,Jo),window.removeEventListener("test",Jo,Jo)}catch{ud=!1}function Jk(s,o,c,f,m,y,k,j,R){var W=Array.prototype.slice.call(arguments,3);try{o.apply(c,W)}catch(Y){this.onError(Y)}}var Zo=!1,Al=null,Ol=!1,dd=null,Zk={onError:function(s){Zo=!0,Al=s}};function Yk(s,o,c,f,m,y,k,j,R){Zo=!1,Al=null,Jk.apply(Zk,arguments)}function Xk(s,o,c,f,m,y,k,j,R){if(Yk.apply(this,arguments),Zo){if(Zo){var W=Al;Zo=!1,Al=null}else throw Error(n(198));Ol||(Ol=!0,dd=W)}}function Hs(s){var o=s,c=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(c=o.return),s=o.return;while(s)}return o.tag===3?c:null}function zm(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function Wm(s){if(Hs(s)!==s)throw Error(n(188))}function e1(s){var o=s.alternate;if(!o){if(o=Hs(s),o===null)throw Error(n(188));return o!==s?null:s}for(var c=s,f=o;;){var m=c.return;if(m===null)break;var y=m.alternate;if(y===null){if(f=m.return,f!==null){c=f;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===c)return Wm(m),s;if(y===f)return Wm(m),o;y=y.sibling}throw Error(n(188))}if(c.return!==f.return)c=m,f=y;else{for(var k=!1,j=m.child;j;){if(j===c){k=!0,c=m,f=y;break}if(j===f){k=!0,f=m,c=y;break}j=j.sibling}if(!k){for(j=y.child;j;){if(j===c){k=!0,c=y,f=m;break}if(j===f){k=!0,f=y,c=m;break}j=j.sibling}if(!k)throw Error(n(189))}}if(c.alternate!==f)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?s:o}function Hm(s){return s=e1(s),s!==null?qm(s):null}function qm(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=qm(s);if(o!==null)return o;s=s.sibling}return null}var Km=e.unstable_scheduleCallback,Gm=e.unstable_cancelCallback,t1=e.unstable_shouldYield,n1=e.unstable_requestPaint,Nt=e.unstable_now,r1=e.unstable_getCurrentPriorityLevel,fd=e.unstable_ImmediatePriority,Qm=e.unstable_UserBlockingPriority,Dl=e.unstable_NormalPriority,s1=e.unstable_LowPriority,Jm=e.unstable_IdlePriority,Ml=null,rr=null;function i1(s){if(rr&&typeof rr.onCommitFiberRoot=="function")try{rr.onCommitFiberRoot(Ml,s,void 0,(s.current.flags&128)===128)}catch{}}var $n=Math.clz32?Math.clz32:l1,o1=Math.log,a1=Math.LN2;function l1(s){return s>>>=0,s===0?32:31-(o1(s)/a1|0)|0}var Ll=64,Ul=4194304;function Yo(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Fl(s,o){var c=s.pendingLanes;if(c===0)return 0;var f=0,m=s.suspendedLanes,y=s.pingedLanes,k=c&268435455;if(k!==0){var j=k&~m;j!==0?f=Yo(j):(y&=k,y!==0&&(f=Yo(y)))}else k=c&~m,k!==0?f=Yo(k):y!==0&&(f=Yo(y));if(f===0)return 0;if(o!==0&&o!==f&&(o&m)===0&&(m=f&-f,y=o&-o,m>=y||m===16&&(y&4194240)!==0))return o;if((f&4)!==0&&(f|=c&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=f;0<o;)c=31-$n(o),m=1<<c,f|=s[c],o&=~m;return f}function c1(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function u1(s,o){for(var c=s.suspendedLanes,f=s.pingedLanes,m=s.expirationTimes,y=s.pendingLanes;0<y;){var k=31-$n(y),j=1<<k,R=m[k];R===-1?((j&c)===0||(j&f)!==0)&&(m[k]=c1(j,o)):R<=o&&(s.expiredLanes|=j),y&=~j}}function hd(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Zm(){var s=Ll;return Ll<<=1,(Ll&4194240)===0&&(Ll=64),s}function pd(s){for(var o=[],c=0;31>c;c++)o.push(s);return o}function Xo(s,o,c){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-$n(o),s[o]=c}function d1(s,o){var c=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var f=s.eventTimes;for(s=s.expirationTimes;0<c;){var m=31-$n(c),y=1<<m;o[m]=0,f[m]=-1,s[m]=-1,c&=~y}}function md(s,o){var c=s.entangledLanes|=o;for(s=s.entanglements;c;){var f=31-$n(c),m=1<<f;m&o|s[f]&o&&(s[f]|=o),c&=~m}}var it=0;function Ym(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Xm,gd,eg,tg,ng,yd=!1,$l=[],Qr=null,Jr=null,Zr=null,ea=new Map,ta=new Map,Yr=[],f1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rg(s,o){switch(s){case"focusin":case"focusout":Qr=null;break;case"dragenter":case"dragleave":Jr=null;break;case"mouseover":case"mouseout":Zr=null;break;case"pointerover":case"pointerout":ea.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ta.delete(o.pointerId)}}function na(s,o,c,f,m,y){return s===null||s.nativeEvent!==y?(s={blockedOn:o,domEventName:c,eventSystemFlags:f,nativeEvent:y,targetContainers:[m]},o!==null&&(o=ga(o),o!==null&&gd(o)),s):(s.eventSystemFlags|=f,o=s.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),s)}function h1(s,o,c,f,m){switch(o){case"focusin":return Qr=na(Qr,s,o,c,f,m),!0;case"dragenter":return Jr=na(Jr,s,o,c,f,m),!0;case"mouseover":return Zr=na(Zr,s,o,c,f,m),!0;case"pointerover":var y=m.pointerId;return ea.set(y,na(ea.get(y)||null,s,o,c,f,m)),!0;case"gotpointercapture":return y=m.pointerId,ta.set(y,na(ta.get(y)||null,s,o,c,f,m)),!0}return!1}function sg(s){var o=qs(s.target);if(o!==null){var c=Hs(o);if(c!==null){if(o=c.tag,o===13){if(o=zm(c),o!==null){s.blockedOn=o,ng(s.priority,function(){eg(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Bl(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var c=wd(s.domEventName,s.eventSystemFlags,o[0],s.nativeEvent);if(c===null){c=s.nativeEvent;var f=new c.constructor(c.type,c);Un=f,c.target.dispatchEvent(f),Un=null}else return o=ga(c),o!==null&&gd(o),s.blockedOn=c,!1;o.shift()}return!0}function ig(s,o,c){Bl(s)&&c.delete(o)}function p1(){yd=!1,Qr!==null&&Bl(Qr)&&(Qr=null),Jr!==null&&Bl(Jr)&&(Jr=null),Zr!==null&&Bl(Zr)&&(Zr=null),ea.forEach(ig),ta.forEach(ig)}function ra(s,o){s.blockedOn===o&&(s.blockedOn=null,yd||(yd=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,p1)))}function sa(s){function o(m){return ra(m,s)}if(0<$l.length){ra($l[0],s);for(var c=1;c<$l.length;c++){var f=$l[c];f.blockedOn===s&&(f.blockedOn=null)}}for(Qr!==null&&ra(Qr,s),Jr!==null&&ra(Jr,s),Zr!==null&&ra(Zr,s),ea.forEach(o),ta.forEach(o),c=0;c<Yr.length;c++)f=Yr[c],f.blockedOn===s&&(f.blockedOn=null);for(;0<Yr.length&&(c=Yr[0],c.blockedOn===null);)sg(c),c.blockedOn===null&&Yr.shift()}var Ti=I.ReactCurrentBatchConfig,Vl=!0;function m1(s,o,c,f){var m=it,y=Ti.transition;Ti.transition=null;try{it=1,vd(s,o,c,f)}finally{it=m,Ti.transition=y}}function g1(s,o,c,f){var m=it,y=Ti.transition;Ti.transition=null;try{it=4,vd(s,o,c,f)}finally{it=m,Ti.transition=y}}function vd(s,o,c,f){if(Vl){var m=wd(s,o,c,f);if(m===null)Md(s,o,f,zl,c),rg(s,f);else if(h1(m,s,o,c,f))f.stopPropagation();else if(rg(s,f),o&4&&-1<f1.indexOf(s)){for(;m!==null;){var y=ga(m);if(y!==null&&Xm(y),y=wd(s,o,c,f),y===null&&Md(s,o,f,zl,c),y===m)break;m=y}m!==null&&f.stopPropagation()}else Md(s,o,f,null,c)}}var zl=null;function wd(s,o,c,f){if(zl=null,s=Kr(f),s=qs(s),s!==null)if(o=Hs(s),o===null)s=null;else if(c=o.tag,c===13){if(s=zm(o),s!==null)return s;s=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null);return zl=s,null}function og(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(r1()){case fd:return 1;case Qm:return 4;case Dl:case s1:return 16;case Jm:return 536870912;default:return 16}default:return 16}}var Xr=null,xd=null,Wl=null;function ag(){if(Wl)return Wl;var s,o=xd,c=o.length,f,m="value"in Xr?Xr.value:Xr.textContent,y=m.length;for(s=0;s<c&&o[s]===m[s];s++);var k=c-s;for(f=1;f<=k&&o[c-f]===m[y-f];f++);return Wl=m.slice(s,1<f?1-f:void 0)}function Hl(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function ql(){return!0}function lg(){return!1}function vn(s){function o(c,f,m,y,k){this._reactName=c,this._targetInst=m,this.type=f,this.nativeEvent=y,this.target=k,this.currentTarget=null;for(var j in s)s.hasOwnProperty(j)&&(c=s[j],this[j]=c?c(y):y[j]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?ql:lg,this.isPropagationStopped=lg,this}return ne(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=ql)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=ql)},persist:function(){},isPersistent:ql}),o}var ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bd=vn(ji),ia=ne({},ji,{view:0,detail:0}),y1=vn(ia),_d,Sd,oa,Kl=ne({},ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ed,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==oa&&(oa&&s.type==="mousemove"?(_d=s.screenX-oa.screenX,Sd=s.screenY-oa.screenY):Sd=_d=0,oa=s),_d)},movementY:function(s){return"movementY"in s?s.movementY:Sd}}),cg=vn(Kl),v1=ne({},Kl,{dataTransfer:0}),w1=vn(v1),x1=ne({},ia,{relatedTarget:0}),kd=vn(x1),b1=ne({},ji,{animationName:0,elapsedTime:0,pseudoElement:0}),_1=vn(b1),S1=ne({},ji,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),k1=vn(S1),E1=ne({},ji,{data:0}),ug=vn(E1),C1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},N1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},T1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function j1(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=T1[s])?!!o[s]:!1}function Ed(){return j1}var P1=ne({},ia,{key:function(s){if(s.key){var o=C1[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=Hl(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?N1[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ed,charCode:function(s){return s.type==="keypress"?Hl(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Hl(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),I1=vn(P1),R1=ne({},Kl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dg=vn(R1),A1=ne({},ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ed}),O1=vn(A1),D1=ne({},ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),M1=vn(D1),L1=ne({},Kl,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),U1=vn(L1),F1=[9,13,27,32],Cd=u&&"CompositionEvent"in window,aa=null;u&&"documentMode"in document&&(aa=document.documentMode);var $1=u&&"TextEvent"in window&&!aa,fg=u&&(!Cd||aa&&8<aa&&11>=aa),hg=" ",pg=!1;function mg(s,o){switch(s){case"keyup":return F1.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gg(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Pi=!1;function B1(s,o){switch(s){case"compositionend":return gg(o);case"keypress":return o.which!==32?null:(pg=!0,hg);case"textInput":return s=o.data,s===hg&&pg?null:s;default:return null}}function V1(s,o){if(Pi)return s==="compositionend"||!Cd&&mg(s,o)?(s=ag(),Wl=xd=Xr=null,Pi=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return fg&&o.locale!=="ko"?null:o.data;default:return null}}var z1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yg(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!z1[s.type]:o==="textarea"}function vg(s,o,c,f){Il(f),o=Yl(o,"onChange"),0<o.length&&(c=new bd("onChange","change",null,c,f),s.push({event:c,listeners:o}))}var la=null,ca=null;function W1(s){Mg(s,0)}function Gl(s){var o=Di(s);if(Qe(o))return s}function H1(s,o){if(s==="change")return o}var wg=!1;if(u){var Nd;if(u){var Td="oninput"in document;if(!Td){var xg=document.createElement("div");xg.setAttribute("oninput","return;"),Td=typeof xg.oninput=="function"}Nd=Td}else Nd=!1;wg=Nd&&(!document.documentMode||9<document.documentMode)}function bg(){la&&(la.detachEvent("onpropertychange",_g),ca=la=null)}function _g(s){if(s.propertyName==="value"&&Gl(ca)){var o=[];vg(o,ca,s,Kr(s)),Vm(W1,o)}}function q1(s,o,c){s==="focusin"?(bg(),la=o,ca=c,la.attachEvent("onpropertychange",_g)):s==="focusout"&&bg()}function K1(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Gl(ca)}function G1(s,o){if(s==="click")return Gl(o)}function Q1(s,o){if(s==="input"||s==="change")return Gl(o)}function J1(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Bn=typeof Object.is=="function"?Object.is:J1;function ua(s,o){if(Bn(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var c=Object.keys(s),f=Object.keys(o);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var m=c[f];if(!h.call(o,m)||!Bn(s[m],o[m]))return!1}return!0}function Sg(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function kg(s,o){var c=Sg(s);s=0;for(var f;c;){if(c.nodeType===3){if(f=s+c.textContent.length,s<=o&&f>=o)return{node:c,offset:o-s};s=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Sg(c)}}function Eg(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?Eg(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Cg(){for(var s=window,o=pt();o instanceof s.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)s=o.contentWindow;else break;o=pt(s.document)}return o}function jd(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function Z1(s){var o=Cg(),c=s.focusedElem,f=s.selectionRange;if(o!==c&&c&&c.ownerDocument&&Eg(c.ownerDocument.documentElement,c)){if(f!==null&&jd(c)){if(o=f.start,s=f.end,s===void 0&&(s=o),"selectionStart"in c)c.selectionStart=o,c.selectionEnd=Math.min(s,c.value.length);else if(s=(o=c.ownerDocument||document)&&o.defaultView||window,s.getSelection){s=s.getSelection();var m=c.textContent.length,y=Math.min(f.start,m);f=f.end===void 0?y:Math.min(f.end,m),!s.extend&&y>f&&(m=f,f=y,y=m),m=kg(c,y);var k=kg(c,f);m&&k&&(s.rangeCount!==1||s.anchorNode!==m.node||s.anchorOffset!==m.offset||s.focusNode!==k.node||s.focusOffset!==k.offset)&&(o=o.createRange(),o.setStart(m.node,m.offset),s.removeAllRanges(),y>f?(s.addRange(o),s.extend(k.node,k.offset)):(o.setEnd(k.node,k.offset),s.addRange(o)))}}for(o=[],s=c;s=s.parentNode;)s.nodeType===1&&o.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<o.length;c++)s=o[c],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Y1=u&&"documentMode"in document&&11>=document.documentMode,Ii=null,Pd=null,da=null,Id=!1;function Ng(s,o,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Id||Ii==null||Ii!==pt(f)||(f=Ii,"selectionStart"in f&&jd(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),da&&ua(da,f)||(da=f,f=Yl(Pd,"onSelect"),0<f.length&&(o=new bd("onSelect","select",null,o,c),s.push({event:o,listeners:f}),o.target=Ii)))}function Ql(s,o){var c={};return c[s.toLowerCase()]=o.toLowerCase(),c["Webkit"+s]="webkit"+o,c["Moz"+s]="moz"+o,c}var Ri={animationend:Ql("Animation","AnimationEnd"),animationiteration:Ql("Animation","AnimationIteration"),animationstart:Ql("Animation","AnimationStart"),transitionend:Ql("Transition","TransitionEnd")},Rd={},Tg={};u&&(Tg=document.createElement("div").style,"AnimationEvent"in window||(delete Ri.animationend.animation,delete Ri.animationiteration.animation,delete Ri.animationstart.animation),"TransitionEvent"in window||delete Ri.transitionend.transition);function Jl(s){if(Rd[s])return Rd[s];if(!Ri[s])return s;var o=Ri[s],c;for(c in o)if(o.hasOwnProperty(c)&&c in Tg)return Rd[s]=o[c];return s}var jg=Jl("animationend"),Pg=Jl("animationiteration"),Ig=Jl("animationstart"),Rg=Jl("transitionend"),Ag=new Map,Og="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function es(s,o){Ag.set(s,o),a(o,[s])}for(var Ad=0;Ad<Og.length;Ad++){var Od=Og[Ad],X1=Od.toLowerCase(),eE=Od[0].toUpperCase()+Od.slice(1);es(X1,"on"+eE)}es(jg,"onAnimationEnd"),es(Pg,"onAnimationIteration"),es(Ig,"onAnimationStart"),es("dblclick","onDoubleClick"),es("focusin","onFocus"),es("focusout","onBlur"),es(Rg,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tE=new Set("cancel close invalid load scroll toggle".split(" ").concat(fa));function Dg(s,o,c){var f=s.type||"unknown-event";s.currentTarget=c,Xk(f,o,void 0,s),s.currentTarget=null}function Mg(s,o){o=(o&4)!==0;for(var c=0;c<s.length;c++){var f=s[c],m=f.event;f=f.listeners;e:{var y=void 0;if(o)for(var k=f.length-1;0<=k;k--){var j=f[k],R=j.instance,W=j.currentTarget;if(j=j.listener,R!==y&&m.isPropagationStopped())break e;Dg(m,j,W),y=R}else for(k=0;k<f.length;k++){if(j=f[k],R=j.instance,W=j.currentTarget,j=j.listener,R!==y&&m.isPropagationStopped())break e;Dg(m,j,W),y=R}}}if(Ol)throw s=dd,Ol=!1,dd=null,s}function gt(s,o){var c=o[Vd];c===void 0&&(c=o[Vd]=new Set);var f=s+"__bubble";c.has(f)||(Lg(o,s,2,!1),c.add(f))}function Dd(s,o,c){var f=0;o&&(f|=4),Lg(c,s,f,o)}var Zl="_reactListening"+Math.random().toString(36).slice(2);function ha(s){if(!s[Zl]){s[Zl]=!0,r.forEach(function(c){c!=="selectionchange"&&(tE.has(c)||Dd(c,!1,s),Dd(c,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Zl]||(o[Zl]=!0,Dd("selectionchange",!1,o))}}function Lg(s,o,c,f){switch(og(o)){case 1:var m=m1;break;case 4:m=g1;break;default:m=vd}c=m.bind(null,o,c,s),m=void 0,!ud||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),f?m!==void 0?s.addEventListener(o,c,{capture:!0,passive:m}):s.addEventListener(o,c,!0):m!==void 0?s.addEventListener(o,c,{passive:m}):s.addEventListener(o,c,!1)}function Md(s,o,c,f,m){var y=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var k=f.tag;if(k===3||k===4){var j=f.stateNode.containerInfo;if(j===m||j.nodeType===8&&j.parentNode===m)break;if(k===4)for(k=f.return;k!==null;){var R=k.tag;if((R===3||R===4)&&(R=k.stateNode.containerInfo,R===m||R.nodeType===8&&R.parentNode===m))return;k=k.return}for(;j!==null;){if(k=qs(j),k===null)return;if(R=k.tag,R===5||R===6){f=y=k;continue e}j=j.parentNode}}f=f.return}Vm(function(){var W=y,Y=Kr(c),re=[];e:{var Z=Ag.get(s);if(Z!==void 0){var he=bd,ve=s;switch(s){case"keypress":if(Hl(c)===0)break e;case"keydown":case"keyup":he=I1;break;case"focusin":ve="focus",he=kd;break;case"focusout":ve="blur",he=kd;break;case"beforeblur":case"afterblur":he=kd;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=cg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=w1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=O1;break;case jg:case Pg:case Ig:he=_1;break;case Rg:he=M1;break;case"scroll":he=y1;break;case"wheel":he=U1;break;case"copy":case"cut":case"paste":he=k1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=dg}var _e=(o&4)!==0,Tt=!_e&&s==="scroll",F=_e?Z!==null?Z+"Capture":null:Z;_e=[];for(var M=W,B;M!==null;){B=M;var ae=B.stateNode;if(B.tag===5&&ae!==null&&(B=ae,F!==null&&(ae=Qo(M,F),ae!=null&&_e.push(pa(M,ae,B)))),Tt)break;M=M.return}0<_e.length&&(Z=new he(Z,ve,null,c,Y),re.push({event:Z,listeners:_e}))}}if((o&7)===0){e:{if(Z=s==="mouseover"||s==="pointerover",he=s==="mouseout"||s==="pointerout",Z&&c!==Un&&(ve=c.relatedTarget||c.fromElement)&&(qs(ve)||ve[br]))break e;if((he||Z)&&(Z=Y.window===Y?Y:(Z=Y.ownerDocument)?Z.defaultView||Z.parentWindow:window,he?(ve=c.relatedTarget||c.toElement,he=W,ve=ve?qs(ve):null,ve!==null&&(Tt=Hs(ve),ve!==Tt||ve.tag!==5&&ve.tag!==6)&&(ve=null)):(he=null,ve=W),he!==ve)){if(_e=cg,ae="onMouseLeave",F="onMouseEnter",M="mouse",(s==="pointerout"||s==="pointerover")&&(_e=dg,ae="onPointerLeave",F="onPointerEnter",M="pointer"),Tt=he==null?Z:Di(he),B=ve==null?Z:Di(ve),Z=new _e(ae,M+"leave",he,c,Y),Z.target=Tt,Z.relatedTarget=B,ae=null,qs(Y)===W&&(_e=new _e(F,M+"enter",ve,c,Y),_e.target=B,_e.relatedTarget=Tt,ae=_e),Tt=ae,he&&ve)t:{for(_e=he,F=ve,M=0,B=_e;B;B=Ai(B))M++;for(B=0,ae=F;ae;ae=Ai(ae))B++;for(;0<M-B;)_e=Ai(_e),M--;for(;0<B-M;)F=Ai(F),B--;for(;M--;){if(_e===F||F!==null&&_e===F.alternate)break t;_e=Ai(_e),F=Ai(F)}_e=null}else _e=null;he!==null&&Ug(re,Z,he,_e,!1),ve!==null&&Tt!==null&&Ug(re,Tt,ve,_e,!0)}}e:{if(Z=W?Di(W):window,he=Z.nodeName&&Z.nodeName.toLowerCase(),he==="select"||he==="input"&&Z.type==="file")var Ce=H1;else if(yg(Z))if(wg)Ce=Q1;else{Ce=K1;var Pe=q1}else(he=Z.nodeName)&&he.toLowerCase()==="input"&&(Z.type==="checkbox"||Z.type==="radio")&&(Ce=G1);if(Ce&&(Ce=Ce(s,W))){vg(re,Ce,c,Y);break e}Pe&&Pe(s,Z,W),s==="focusout"&&(Pe=Z._wrapperState)&&Pe.controlled&&Z.type==="number"&&Je(Z,"number",Z.value)}switch(Pe=W?Di(W):window,s){case"focusin":(yg(Pe)||Pe.contentEditable==="true")&&(Ii=Pe,Pd=W,da=null);break;case"focusout":da=Pd=Ii=null;break;case"mousedown":Id=!0;break;case"contextmenu":case"mouseup":case"dragend":Id=!1,Ng(re,c,Y);break;case"selectionchange":if(Y1)break;case"keydown":case"keyup":Ng(re,c,Y)}var Ie;if(Cd)e:{switch(s){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else Pi?mg(s,c)&&(Le="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(Le="onCompositionStart");Le&&(fg&&c.locale!=="ko"&&(Pi||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&Pi&&(Ie=ag()):(Xr=Y,xd="value"in Xr?Xr.value:Xr.textContent,Pi=!0)),Pe=Yl(W,Le),0<Pe.length&&(Le=new ug(Le,s,null,c,Y),re.push({event:Le,listeners:Pe}),Ie?Le.data=Ie:(Ie=gg(c),Ie!==null&&(Le.data=Ie)))),(Ie=$1?B1(s,c):V1(s,c))&&(W=Yl(W,"onBeforeInput"),0<W.length&&(Y=new ug("onBeforeInput","beforeinput",null,c,Y),re.push({event:Y,listeners:W}),Y.data=Ie))}Mg(re,o)})}function pa(s,o,c){return{instance:s,listener:o,currentTarget:c}}function Yl(s,o){for(var c=o+"Capture",f=[];s!==null;){var m=s,y=m.stateNode;m.tag===5&&y!==null&&(m=y,y=Qo(s,c),y!=null&&f.unshift(pa(s,y,m)),y=Qo(s,o),y!=null&&f.push(pa(s,y,m))),s=s.return}return f}function Ai(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Ug(s,o,c,f,m){for(var y=o._reactName,k=[];c!==null&&c!==f;){var j=c,R=j.alternate,W=j.stateNode;if(R!==null&&R===f)break;j.tag===5&&W!==null&&(j=W,m?(R=Qo(c,y),R!=null&&k.unshift(pa(c,R,j))):m||(R=Qo(c,y),R!=null&&k.push(pa(c,R,j)))),c=c.return}k.length!==0&&s.push({event:o,listeners:k})}var nE=/\r\n?/g,rE=/\u0000|\uFFFD/g;function Fg(s){return(typeof s=="string"?s:""+s).replace(nE,`
`).replace(rE,"")}function Xl(s,o,c){if(o=Fg(o),Fg(s)!==o&&c)throw Error(n(425))}function ec(){}var Ld=null,Ud=null;function Fd(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var $d=typeof setTimeout=="function"?setTimeout:void 0,sE=typeof clearTimeout=="function"?clearTimeout:void 0,$g=typeof Promise=="function"?Promise:void 0,iE=typeof queueMicrotask=="function"?queueMicrotask:typeof $g<"u"?function(s){return $g.resolve(null).then(s).catch(oE)}:$d;function oE(s){setTimeout(function(){throw s})}function Bd(s,o){var c=o,f=0;do{var m=c.nextSibling;if(s.removeChild(c),m&&m.nodeType===8)if(c=m.data,c==="/$"){if(f===0){s.removeChild(m),sa(o);return}f--}else c!=="$"&&c!=="$?"&&c!=="$!"||f++;c=m}while(c);sa(o)}function ts(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return s}function Bg(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return s;o--}else c==="/$"&&o++}s=s.previousSibling}return null}var Oi=Math.random().toString(36).slice(2),sr="__reactFiber$"+Oi,ma="__reactProps$"+Oi,br="__reactContainer$"+Oi,Vd="__reactEvents$"+Oi,aE="__reactListeners$"+Oi,lE="__reactHandles$"+Oi;function qs(s){var o=s[sr];if(o)return o;for(var c=s.parentNode;c;){if(o=c[br]||c[sr]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(s=Bg(s);s!==null;){if(c=s[sr])return c;s=Bg(s)}return o}s=c,c=s.parentNode}return null}function ga(s){return s=s[sr]||s[br],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Di(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(n(33))}function tc(s){return s[ma]||null}var zd=[],Mi=-1;function ns(s){return{current:s}}function yt(s){0>Mi||(s.current=zd[Mi],zd[Mi]=null,Mi--)}function ft(s,o){Mi++,zd[Mi]=s.current,s.current=o}var rs={},Yt=ns(rs),cn=ns(!1),Ks=rs;function Li(s,o){var c=s.type.contextTypes;if(!c)return rs;var f=s.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var m={},y;for(y in c)m[y]=o[y];return f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=m),m}function un(s){return s=s.childContextTypes,s!=null}function nc(){yt(cn),yt(Yt)}function Vg(s,o,c){if(Yt.current!==rs)throw Error(n(168));ft(Yt,o),ft(cn,c)}function zg(s,o,c){var f=s.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return c;f=f.getChildContext();for(var m in f)if(!(m in o))throw Error(n(108,ue(s)||"Unknown",m));return ne({},c,f)}function rc(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||rs,Ks=Yt.current,ft(Yt,s),ft(cn,cn.current),!0}function Wg(s,o,c){var f=s.stateNode;if(!f)throw Error(n(169));c?(s=zg(s,o,Ks),f.__reactInternalMemoizedMergedChildContext=s,yt(cn),yt(Yt),ft(Yt,s)):yt(cn),ft(cn,c)}var _r=null,sc=!1,Wd=!1;function Hg(s){_r===null?_r=[s]:_r.push(s)}function cE(s){sc=!0,Hg(s)}function ss(){if(!Wd&&_r!==null){Wd=!0;var s=0,o=it;try{var c=_r;for(it=1;s<c.length;s++){var f=c[s];do f=f(!0);while(f!==null)}_r=null,sc=!1}catch(m){throw _r!==null&&(_r=_r.slice(s+1)),Km(fd,ss),m}finally{it=o,Wd=!1}}return null}var Ui=[],Fi=0,ic=null,oc=0,Pn=[],In=0,Gs=null,Sr=1,kr="";function Qs(s,o){Ui[Fi++]=oc,Ui[Fi++]=ic,ic=s,oc=o}function qg(s,o,c){Pn[In++]=Sr,Pn[In++]=kr,Pn[In++]=Gs,Gs=s;var f=Sr;s=kr;var m=32-$n(f)-1;f&=~(1<<m),c+=1;var y=32-$n(o)+m;if(30<y){var k=m-m%5;y=(f&(1<<k)-1).toString(32),f>>=k,m-=k,Sr=1<<32-$n(o)+m|c<<m|f,kr=y+s}else Sr=1<<y|c<<m|f,kr=s}function Hd(s){s.return!==null&&(Qs(s,1),qg(s,1,0))}function qd(s){for(;s===ic;)ic=Ui[--Fi],Ui[Fi]=null,oc=Ui[--Fi],Ui[Fi]=null;for(;s===Gs;)Gs=Pn[--In],Pn[In]=null,kr=Pn[--In],Pn[In]=null,Sr=Pn[--In],Pn[In]=null}var wn=null,xn=null,bt=!1,Vn=null;function Kg(s,o){var c=Dn(5,null,null,0);c.elementType="DELETED",c.stateNode=o,c.return=s,o=s.deletions,o===null?(s.deletions=[c],s.flags|=16):o.push(c)}function Gg(s,o){switch(s.tag){case 5:var c=s.type;return o=o.nodeType!==1||c.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(s.stateNode=o,wn=s,xn=ts(o.firstChild),!0):!1;case 6:return o=s.pendingProps===""||o.nodeType!==3?null:o,o!==null?(s.stateNode=o,wn=s,xn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(c=Gs!==null?{id:Sr,overflow:kr}:null,s.memoizedState={dehydrated:o,treeContext:c,retryLane:1073741824},c=Dn(18,null,null,0),c.stateNode=o,c.return=s,s.child=c,wn=s,xn=null,!0):!1;default:return!1}}function Kd(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Gd(s){if(bt){var o=xn;if(o){var c=o;if(!Gg(s,o)){if(Kd(s))throw Error(n(418));o=ts(c.nextSibling);var f=wn;o&&Gg(s,o)?Kg(f,c):(s.flags=s.flags&-4097|2,bt=!1,wn=s)}}else{if(Kd(s))throw Error(n(418));s.flags=s.flags&-4097|2,bt=!1,wn=s}}}function Qg(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;wn=s}function ac(s){if(s!==wn)return!1;if(!bt)return Qg(s),bt=!0,!1;var o;if((o=s.tag!==3)&&!(o=s.tag!==5)&&(o=s.type,o=o!=="head"&&o!=="body"&&!Fd(s.type,s.memoizedProps)),o&&(o=xn)){if(Kd(s))throw Jg(),Error(n(418));for(;o;)Kg(s,o),o=ts(o.nextSibling)}if(Qg(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8){var c=s.data;if(c==="/$"){if(o===0){xn=ts(s.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++}s=s.nextSibling}xn=null}}else xn=wn?ts(s.stateNode.nextSibling):null;return!0}function Jg(){for(var s=xn;s;)s=ts(s.nextSibling)}function $i(){xn=wn=null,bt=!1}function Qd(s){Vn===null?Vn=[s]:Vn.push(s)}var uE=I.ReactCurrentBatchConfig;function ya(s,o,c){if(s=c.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(n(309));var f=c.stateNode}if(!f)throw Error(n(147,s));var m=f,y=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(k){var j=m.refs;k===null?delete j[y]:j[y]=k},o._stringRef=y,o)}if(typeof s!="string")throw Error(n(284));if(!c._owner)throw Error(n(290,s))}return s}function lc(s,o){throw s=Object.prototype.toString.call(o),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function Zg(s){var o=s._init;return o(s._payload)}function Yg(s){function o(F,M){if(s){var B=F.deletions;B===null?(F.deletions=[M],F.flags|=16):B.push(M)}}function c(F,M){if(!s)return null;for(;M!==null;)o(F,M),M=M.sibling;return null}function f(F,M){for(F=new Map;M!==null;)M.key!==null?F.set(M.key,M):F.set(M.index,M),M=M.sibling;return F}function m(F,M){return F=fs(F,M),F.index=0,F.sibling=null,F}function y(F,M,B){return F.index=B,s?(B=F.alternate,B!==null?(B=B.index,B<M?(F.flags|=2,M):B):(F.flags|=2,M)):(F.flags|=1048576,M)}function k(F){return s&&F.alternate===null&&(F.flags|=2),F}function j(F,M,B,ae){return M===null||M.tag!==6?(M=Bf(B,F.mode,ae),M.return=F,M):(M=m(M,B),M.return=F,M)}function R(F,M,B,ae){var Ce=B.type;return Ce===L?Y(F,M,B.props.children,ae,B.key):M!==null&&(M.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===Q&&Zg(Ce)===M.type)?(ae=m(M,B.props),ae.ref=ya(F,M,B),ae.return=F,ae):(ae=Rc(B.type,B.key,B.props,null,F.mode,ae),ae.ref=ya(F,M,B),ae.return=F,ae)}function W(F,M,B,ae){return M===null||M.tag!==4||M.stateNode.containerInfo!==B.containerInfo||M.stateNode.implementation!==B.implementation?(M=Vf(B,F.mode,ae),M.return=F,M):(M=m(M,B.children||[]),M.return=F,M)}function Y(F,M,B,ae,Ce){return M===null||M.tag!==7?(M=ri(B,F.mode,ae,Ce),M.return=F,M):(M=m(M,B),M.return=F,M)}function re(F,M,B){if(typeof M=="string"&&M!==""||typeof M=="number")return M=Bf(""+M,F.mode,B),M.return=F,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case D:return B=Rc(M.type,M.key,M.props,null,F.mode,B),B.ref=ya(F,null,M),B.return=F,B;case A:return M=Vf(M,F.mode,B),M.return=F,M;case Q:var ae=M._init;return re(F,ae(M._payload),B)}if(P(M)||te(M))return M=ri(M,F.mode,B,null),M.return=F,M;lc(F,M)}return null}function Z(F,M,B,ae){var Ce=M!==null?M.key:null;if(typeof B=="string"&&B!==""||typeof B=="number")return Ce!==null?null:j(F,M,""+B,ae);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case D:return B.key===Ce?R(F,M,B,ae):null;case A:return B.key===Ce?W(F,M,B,ae):null;case Q:return Ce=B._init,Z(F,M,Ce(B._payload),ae)}if(P(B)||te(B))return Ce!==null?null:Y(F,M,B,ae,null);lc(F,B)}return null}function he(F,M,B,ae,Ce){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return F=F.get(B)||null,j(M,F,""+ae,Ce);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case D:return F=F.get(ae.key===null?B:ae.key)||null,R(M,F,ae,Ce);case A:return F=F.get(ae.key===null?B:ae.key)||null,W(M,F,ae,Ce);case Q:var Pe=ae._init;return he(F,M,B,Pe(ae._payload),Ce)}if(P(ae)||te(ae))return F=F.get(B)||null,Y(M,F,ae,Ce,null);lc(M,ae)}return null}function ve(F,M,B,ae){for(var Ce=null,Pe=null,Ie=M,Le=M=0,Ht=null;Ie!==null&&Le<B.length;Le++){Ie.index>Le?(Ht=Ie,Ie=null):Ht=Ie.sibling;var et=Z(F,Ie,B[Le],ae);if(et===null){Ie===null&&(Ie=Ht);break}s&&Ie&&et.alternate===null&&o(F,Ie),M=y(et,M,Le),Pe===null?Ce=et:Pe.sibling=et,Pe=et,Ie=Ht}if(Le===B.length)return c(F,Ie),bt&&Qs(F,Le),Ce;if(Ie===null){for(;Le<B.length;Le++)Ie=re(F,B[Le],ae),Ie!==null&&(M=y(Ie,M,Le),Pe===null?Ce=Ie:Pe.sibling=Ie,Pe=Ie);return bt&&Qs(F,Le),Ce}for(Ie=f(F,Ie);Le<B.length;Le++)Ht=he(Ie,F,Le,B[Le],ae),Ht!==null&&(s&&Ht.alternate!==null&&Ie.delete(Ht.key===null?Le:Ht.key),M=y(Ht,M,Le),Pe===null?Ce=Ht:Pe.sibling=Ht,Pe=Ht);return s&&Ie.forEach(function(hs){return o(F,hs)}),bt&&Qs(F,Le),Ce}function _e(F,M,B,ae){var Ce=te(B);if(typeof Ce!="function")throw Error(n(150));if(B=Ce.call(B),B==null)throw Error(n(151));for(var Pe=Ce=null,Ie=M,Le=M=0,Ht=null,et=B.next();Ie!==null&&!et.done;Le++,et=B.next()){Ie.index>Le?(Ht=Ie,Ie=null):Ht=Ie.sibling;var hs=Z(F,Ie,et.value,ae);if(hs===null){Ie===null&&(Ie=Ht);break}s&&Ie&&hs.alternate===null&&o(F,Ie),M=y(hs,M,Le),Pe===null?Ce=hs:Pe.sibling=hs,Pe=hs,Ie=Ht}if(et.done)return c(F,Ie),bt&&Qs(F,Le),Ce;if(Ie===null){for(;!et.done;Le++,et=B.next())et=re(F,et.value,ae),et!==null&&(M=y(et,M,Le),Pe===null?Ce=et:Pe.sibling=et,Pe=et);return bt&&Qs(F,Le),Ce}for(Ie=f(F,Ie);!et.done;Le++,et=B.next())et=he(Ie,F,Le,et.value,ae),et!==null&&(s&&et.alternate!==null&&Ie.delete(et.key===null?Le:et.key),M=y(et,M,Le),Pe===null?Ce=et:Pe.sibling=et,Pe=et);return s&&Ie.forEach(function(zE){return o(F,zE)}),bt&&Qs(F,Le),Ce}function Tt(F,M,B,ae){if(typeof B=="object"&&B!==null&&B.type===L&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case D:e:{for(var Ce=B.key,Pe=M;Pe!==null;){if(Pe.key===Ce){if(Ce=B.type,Ce===L){if(Pe.tag===7){c(F,Pe.sibling),M=m(Pe,B.props.children),M.return=F,F=M;break e}}else if(Pe.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===Q&&Zg(Ce)===Pe.type){c(F,Pe.sibling),M=m(Pe,B.props),M.ref=ya(F,Pe,B),M.return=F,F=M;break e}c(F,Pe);break}else o(F,Pe);Pe=Pe.sibling}B.type===L?(M=ri(B.props.children,F.mode,ae,B.key),M.return=F,F=M):(ae=Rc(B.type,B.key,B.props,null,F.mode,ae),ae.ref=ya(F,M,B),ae.return=F,F=ae)}return k(F);case A:e:{for(Pe=B.key;M!==null;){if(M.key===Pe)if(M.tag===4&&M.stateNode.containerInfo===B.containerInfo&&M.stateNode.implementation===B.implementation){c(F,M.sibling),M=m(M,B.children||[]),M.return=F,F=M;break e}else{c(F,M);break}else o(F,M);M=M.sibling}M=Vf(B,F.mode,ae),M.return=F,F=M}return k(F);case Q:return Pe=B._init,Tt(F,M,Pe(B._payload),ae)}if(P(B))return ve(F,M,B,ae);if(te(B))return _e(F,M,B,ae);lc(F,B)}return typeof B=="string"&&B!==""||typeof B=="number"?(B=""+B,M!==null&&M.tag===6?(c(F,M.sibling),M=m(M,B),M.return=F,F=M):(c(F,M),M=Bf(B,F.mode,ae),M.return=F,F=M),k(F)):c(F,M)}return Tt}var Bi=Yg(!0),Xg=Yg(!1),cc=ns(null),uc=null,Vi=null,Jd=null;function Zd(){Jd=Vi=uc=null}function Yd(s){var o=cc.current;yt(cc),s._currentValue=o}function Xd(s,o,c){for(;s!==null;){var f=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),s===c)break;s=s.return}}function zi(s,o){uc=s,Jd=Vi=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&o)!==0&&(dn=!0),s.firstContext=null)}function Rn(s){var o=s._currentValue;if(Jd!==s)if(s={context:s,memoizedValue:o,next:null},Vi===null){if(uc===null)throw Error(n(308));Vi=s,uc.dependencies={lanes:0,firstContext:s}}else Vi=Vi.next=s;return o}var Js=null;function ef(s){Js===null?Js=[s]:Js.push(s)}function ey(s,o,c,f){var m=o.interleaved;return m===null?(c.next=c,ef(o)):(c.next=m.next,m.next=c),o.interleaved=c,Er(s,f)}function Er(s,o){s.lanes|=o;var c=s.alternate;for(c!==null&&(c.lanes|=o),c=s,s=s.return;s!==null;)s.childLanes|=o,c=s.alternate,c!==null&&(c.childLanes|=o),c=s,s=s.return;return c.tag===3?c.stateNode:null}var is=!1;function tf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ty(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Cr(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function os(s,o,c){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,(Ye&2)!==0){var m=f.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),f.pending=o,Er(s,c)}return m=f.interleaved,m===null?(o.next=o,ef(f)):(o.next=m.next,m.next=o),f.interleaved=o,Er(s,c)}function dc(s,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194240)!==0)){var f=o.lanes;f&=s.pendingLanes,c|=f,o.lanes=c,md(s,c)}}function ny(s,o){var c=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var m=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var k={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};y===null?m=y=k:y=y.next=k,c=c.next}while(c!==null);y===null?m=y=o:y=y.next=o}else m=y=o;c={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:f.shared,effects:f.effects},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=o:s.next=o,c.lastBaseUpdate=o}function fc(s,o,c,f){var m=s.updateQueue;is=!1;var y=m.firstBaseUpdate,k=m.lastBaseUpdate,j=m.shared.pending;if(j!==null){m.shared.pending=null;var R=j,W=R.next;R.next=null,k===null?y=W:k.next=W,k=R;var Y=s.alternate;Y!==null&&(Y=Y.updateQueue,j=Y.lastBaseUpdate,j!==k&&(j===null?Y.firstBaseUpdate=W:j.next=W,Y.lastBaseUpdate=R))}if(y!==null){var re=m.baseState;k=0,Y=W=R=null,j=y;do{var Z=j.lane,he=j.eventTime;if((f&Z)===Z){Y!==null&&(Y=Y.next={eventTime:he,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});e:{var ve=s,_e=j;switch(Z=o,he=c,_e.tag){case 1:if(ve=_e.payload,typeof ve=="function"){re=ve.call(he,re,Z);break e}re=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=_e.payload,Z=typeof ve=="function"?ve.call(he,re,Z):ve,Z==null)break e;re=ne({},re,Z);break e;case 2:is=!0}}j.callback!==null&&j.lane!==0&&(s.flags|=64,Z=m.effects,Z===null?m.effects=[j]:Z.push(j))}else he={eventTime:he,lane:Z,tag:j.tag,payload:j.payload,callback:j.callback,next:null},Y===null?(W=Y=he,R=re):Y=Y.next=he,k|=Z;if(j=j.next,j===null){if(j=m.shared.pending,j===null)break;Z=j,j=Z.next,Z.next=null,m.lastBaseUpdate=Z,m.shared.pending=null}}while(!0);if(Y===null&&(R=re),m.baseState=R,m.firstBaseUpdate=W,m.lastBaseUpdate=Y,o=m.shared.interleaved,o!==null){m=o;do k|=m.lane,m=m.next;while(m!==o)}else y===null&&(m.shared.lanes=0);Xs|=k,s.lanes=k,s.memoizedState=re}}function ry(s,o,c){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var f=s[o],m=f.callback;if(m!==null){if(f.callback=null,f=c,typeof m!="function")throw Error(n(191,m));m.call(f)}}}var va={},ir=ns(va),wa=ns(va),xa=ns(va);function Zs(s){if(s===va)throw Error(n(174));return s}function nf(s,o){switch(ft(xa,o),ft(wa,s),ft(ir,va),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:He(null,"");break;default:s=s===8?o.parentNode:o,o=s.namespaceURI||null,s=s.tagName,o=He(o,s)}yt(ir),ft(ir,o)}function Wi(){yt(ir),yt(wa),yt(xa)}function sy(s){Zs(xa.current);var o=Zs(ir.current),c=He(o,s.type);o!==c&&(ft(wa,s),ft(ir,c))}function rf(s){wa.current===s&&(yt(ir),yt(wa))}var _t=ns(0);function hc(s){for(var o=s;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var sf=[];function of(){for(var s=0;s<sf.length;s++)sf[s]._workInProgressVersionPrimary=null;sf.length=0}var pc=I.ReactCurrentDispatcher,af=I.ReactCurrentBatchConfig,Ys=0,St=null,Lt=null,zt=null,mc=!1,ba=!1,_a=0,dE=0;function Xt(){throw Error(n(321))}function lf(s,o){if(o===null)return!1;for(var c=0;c<o.length&&c<s.length;c++)if(!Bn(s[c],o[c]))return!1;return!0}function cf(s,o,c,f,m,y){if(Ys=y,St=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,pc.current=s===null||s.memoizedState===null?mE:gE,s=c(f,m),ba){y=0;do{if(ba=!1,_a=0,25<=y)throw Error(n(301));y+=1,zt=Lt=null,o.updateQueue=null,pc.current=yE,s=c(f,m)}while(ba)}if(pc.current=vc,o=Lt!==null&&Lt.next!==null,Ys=0,zt=Lt=St=null,mc=!1,o)throw Error(n(300));return s}function uf(){var s=_a!==0;return _a=0,s}function or(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?St.memoizedState=zt=s:zt=zt.next=s,zt}function An(){if(Lt===null){var s=St.alternate;s=s!==null?s.memoizedState:null}else s=Lt.next;var o=zt===null?St.memoizedState:zt.next;if(o!==null)zt=o,Lt=s;else{if(s===null)throw Error(n(310));Lt=s,s={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},zt===null?St.memoizedState=zt=s:zt=zt.next=s}return zt}function Sa(s,o){return typeof o=="function"?o(s):o}function df(s){var o=An(),c=o.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=s;var f=Lt,m=f.baseQueue,y=c.pending;if(y!==null){if(m!==null){var k=m.next;m.next=y.next,y.next=k}f.baseQueue=m=y,c.pending=null}if(m!==null){y=m.next,f=f.baseState;var j=k=null,R=null,W=y;do{var Y=W.lane;if((Ys&Y)===Y)R!==null&&(R=R.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),f=W.hasEagerState?W.eagerState:s(f,W.action);else{var re={lane:Y,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};R===null?(j=R=re,k=f):R=R.next=re,St.lanes|=Y,Xs|=Y}W=W.next}while(W!==null&&W!==y);R===null?k=f:R.next=j,Bn(f,o.memoizedState)||(dn=!0),o.memoizedState=f,o.baseState=k,o.baseQueue=R,c.lastRenderedState=f}if(s=c.interleaved,s!==null){m=s;do y=m.lane,St.lanes|=y,Xs|=y,m=m.next;while(m!==s)}else m===null&&(c.lanes=0);return[o.memoizedState,c.dispatch]}function ff(s){var o=An(),c=o.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=s;var f=c.dispatch,m=c.pending,y=o.memoizedState;if(m!==null){c.pending=null;var k=m=m.next;do y=s(y,k.action),k=k.next;while(k!==m);Bn(y,o.memoizedState)||(dn=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),c.lastRenderedState=y}return[y,f]}function iy(){}function oy(s,o){var c=St,f=An(),m=o(),y=!Bn(f.memoizedState,m);if(y&&(f.memoizedState=m,dn=!0),f=f.queue,hf(cy.bind(null,c,f,s),[s]),f.getSnapshot!==o||y||zt!==null&&zt.memoizedState.tag&1){if(c.flags|=2048,ka(9,ly.bind(null,c,f,m,o),void 0,null),Wt===null)throw Error(n(349));(Ys&30)!==0||ay(c,o,m)}return m}function ay(s,o,c){s.flags|=16384,s={getSnapshot:o,value:c},o=St.updateQueue,o===null?(o={lastEffect:null,stores:null},St.updateQueue=o,o.stores=[s]):(c=o.stores,c===null?o.stores=[s]:c.push(s))}function ly(s,o,c,f){o.value=c,o.getSnapshot=f,uy(o)&&dy(s)}function cy(s,o,c){return c(function(){uy(o)&&dy(s)})}function uy(s){var o=s.getSnapshot;s=s.value;try{var c=o();return!Bn(s,c)}catch{return!0}}function dy(s){var o=Er(s,1);o!==null&&qn(o,s,1,-1)}function fy(s){var o=or();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:s},o.queue=s,s=s.dispatch=pE.bind(null,St,s),[o.memoizedState,s]}function ka(s,o,c,f){return s={tag:s,create:o,destroy:c,deps:f,next:null},o=St.updateQueue,o===null?(o={lastEffect:null,stores:null},St.updateQueue=o,o.lastEffect=s.next=s):(c=o.lastEffect,c===null?o.lastEffect=s.next=s:(f=c.next,c.next=s,s.next=f,o.lastEffect=s)),s}function hy(){return An().memoizedState}function gc(s,o,c,f){var m=or();St.flags|=s,m.memoizedState=ka(1|o,c,void 0,f===void 0?null:f)}function yc(s,o,c,f){var m=An();f=f===void 0?null:f;var y=void 0;if(Lt!==null){var k=Lt.memoizedState;if(y=k.destroy,f!==null&&lf(f,k.deps)){m.memoizedState=ka(o,c,y,f);return}}St.flags|=s,m.memoizedState=ka(1|o,c,y,f)}function py(s,o){return gc(8390656,8,s,o)}function hf(s,o){return yc(2048,8,s,o)}function my(s,o){return yc(4,2,s,o)}function gy(s,o){return yc(4,4,s,o)}function yy(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function vy(s,o,c){return c=c!=null?c.concat([s]):null,yc(4,4,yy.bind(null,o,s),c)}function pf(){}function wy(s,o){var c=An();o=o===void 0?null:o;var f=c.memoizedState;return f!==null&&o!==null&&lf(o,f[1])?f[0]:(c.memoizedState=[s,o],s)}function xy(s,o){var c=An();o=o===void 0?null:o;var f=c.memoizedState;return f!==null&&o!==null&&lf(o,f[1])?f[0]:(s=s(),c.memoizedState=[s,o],s)}function by(s,o,c){return(Ys&21)===0?(s.baseState&&(s.baseState=!1,dn=!0),s.memoizedState=c):(Bn(c,o)||(c=Zm(),St.lanes|=c,Xs|=c,s.baseState=!0),o)}function fE(s,o){var c=it;it=c!==0&&4>c?c:4,s(!0);var f=af.transition;af.transition={};try{s(!1),o()}finally{it=c,af.transition=f}}function _y(){return An().memoizedState}function hE(s,o,c){var f=us(s);if(c={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null},Sy(s))ky(o,c);else if(c=ey(s,o,c,f),c!==null){var m=sn();qn(c,s,f,m),Ey(c,o,f)}}function pE(s,o,c){var f=us(s),m={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null};if(Sy(s))ky(o,m);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var k=o.lastRenderedState,j=y(k,c);if(m.hasEagerState=!0,m.eagerState=j,Bn(j,k)){var R=o.interleaved;R===null?(m.next=m,ef(o)):(m.next=R.next,R.next=m),o.interleaved=m;return}}catch{}finally{}c=ey(s,o,m,f),c!==null&&(m=sn(),qn(c,s,f,m),Ey(c,o,f))}}function Sy(s){var o=s.alternate;return s===St||o!==null&&o===St}function ky(s,o){ba=mc=!0;var c=s.pending;c===null?o.next=o:(o.next=c.next,c.next=o),s.pending=o}function Ey(s,o,c){if((c&4194240)!==0){var f=o.lanes;f&=s.pendingLanes,c|=f,o.lanes=c,md(s,c)}}var vc={readContext:Rn,useCallback:Xt,useContext:Xt,useEffect:Xt,useImperativeHandle:Xt,useInsertionEffect:Xt,useLayoutEffect:Xt,useMemo:Xt,useReducer:Xt,useRef:Xt,useState:Xt,useDebugValue:Xt,useDeferredValue:Xt,useTransition:Xt,useMutableSource:Xt,useSyncExternalStore:Xt,useId:Xt,unstable_isNewReconciler:!1},mE={readContext:Rn,useCallback:function(s,o){return or().memoizedState=[s,o===void 0?null:o],s},useContext:Rn,useEffect:py,useImperativeHandle:function(s,o,c){return c=c!=null?c.concat([s]):null,gc(4194308,4,yy.bind(null,o,s),c)},useLayoutEffect:function(s,o){return gc(4194308,4,s,o)},useInsertionEffect:function(s,o){return gc(4,2,s,o)},useMemo:function(s,o){var c=or();return o=o===void 0?null:o,s=s(),c.memoizedState=[s,o],s},useReducer:function(s,o,c){var f=or();return o=c!==void 0?c(o):o,f.memoizedState=f.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},f.queue=s,s=s.dispatch=hE.bind(null,St,s),[f.memoizedState,s]},useRef:function(s){var o=or();return s={current:s},o.memoizedState=s},useState:fy,useDebugValue:pf,useDeferredValue:function(s){return or().memoizedState=s},useTransition:function(){var s=fy(!1),o=s[0];return s=fE.bind(null,s[1]),or().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,c){var f=St,m=or();if(bt){if(c===void 0)throw Error(n(407));c=c()}else{if(c=o(),Wt===null)throw Error(n(349));(Ys&30)!==0||ay(f,o,c)}m.memoizedState=c;var y={value:c,getSnapshot:o};return m.queue=y,py(cy.bind(null,f,y,s),[s]),f.flags|=2048,ka(9,ly.bind(null,f,y,c,o),void 0,null),c},useId:function(){var s=or(),o=Wt.identifierPrefix;if(bt){var c=kr,f=Sr;c=(f&~(1<<32-$n(f)-1)).toString(32)+c,o=":"+o+"R"+c,c=_a++,0<c&&(o+="H"+c.toString(32)),o+=":"}else c=dE++,o=":"+o+"r"+c.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},gE={readContext:Rn,useCallback:wy,useContext:Rn,useEffect:hf,useImperativeHandle:vy,useInsertionEffect:my,useLayoutEffect:gy,useMemo:xy,useReducer:df,useRef:hy,useState:function(){return df(Sa)},useDebugValue:pf,useDeferredValue:function(s){var o=An();return by(o,Lt.memoizedState,s)},useTransition:function(){var s=df(Sa)[0],o=An().memoizedState;return[s,o]},useMutableSource:iy,useSyncExternalStore:oy,useId:_y,unstable_isNewReconciler:!1},yE={readContext:Rn,useCallback:wy,useContext:Rn,useEffect:hf,useImperativeHandle:vy,useInsertionEffect:my,useLayoutEffect:gy,useMemo:xy,useReducer:ff,useRef:hy,useState:function(){return ff(Sa)},useDebugValue:pf,useDeferredValue:function(s){var o=An();return Lt===null?o.memoizedState=s:by(o,Lt.memoizedState,s)},useTransition:function(){var s=ff(Sa)[0],o=An().memoizedState;return[s,o]},useMutableSource:iy,useSyncExternalStore:oy,useId:_y,unstable_isNewReconciler:!1};function zn(s,o){if(s&&s.defaultProps){o=ne({},o),s=s.defaultProps;for(var c in s)o[c]===void 0&&(o[c]=s[c]);return o}return o}function mf(s,o,c,f){o=s.memoizedState,c=c(f,o),c=c==null?o:ne({},o,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var wc={isMounted:function(s){return(s=s._reactInternals)?Hs(s)===s:!1},enqueueSetState:function(s,o,c){s=s._reactInternals;var f=sn(),m=us(s),y=Cr(f,m);y.payload=o,c!=null&&(y.callback=c),o=os(s,y,m),o!==null&&(qn(o,s,m,f),dc(o,s,m))},enqueueReplaceState:function(s,o,c){s=s._reactInternals;var f=sn(),m=us(s),y=Cr(f,m);y.tag=1,y.payload=o,c!=null&&(y.callback=c),o=os(s,y,m),o!==null&&(qn(o,s,m,f),dc(o,s,m))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var c=sn(),f=us(s),m=Cr(c,f);m.tag=2,o!=null&&(m.callback=o),o=os(s,m,f),o!==null&&(qn(o,s,f,c),dc(o,s,f))}};function Cy(s,o,c,f,m,y,k){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,y,k):o.prototype&&o.prototype.isPureReactComponent?!ua(c,f)||!ua(m,y):!0}function Ny(s,o,c){var f=!1,m=rs,y=o.contextType;return typeof y=="object"&&y!==null?y=Rn(y):(m=un(o)?Ks:Yt.current,f=o.contextTypes,y=(f=f!=null)?Li(s,m):rs),o=new o(c,y),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=wc,s.stateNode=o,o._reactInternals=s,f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=m,s.__reactInternalMemoizedMaskedChildContext=y),o}function Ty(s,o,c,f){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,f),o.state!==s&&wc.enqueueReplaceState(o,o.state,null)}function gf(s,o,c,f){var m=s.stateNode;m.props=c,m.state=s.memoizedState,m.refs={},tf(s);var y=o.contextType;typeof y=="object"&&y!==null?m.context=Rn(y):(y=un(o)?Ks:Yt.current,m.context=Li(s,y)),m.state=s.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(mf(s,o,y,c),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(o=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),o!==m.state&&wc.enqueueReplaceState(m,m.state,null),fc(s,c,m,f),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308)}function Hi(s,o){try{var c="",f=o;do c+=Oe(f),f=f.return;while(f);var m=c}catch(y){m=`
Error generating stack: `+y.message+`
`+y.stack}return{value:s,source:o,stack:m,digest:null}}function yf(s,o,c){return{value:s,source:null,stack:c??null,digest:o??null}}function vf(s,o){try{console.error(o.value)}catch(c){setTimeout(function(){throw c})}}var vE=typeof WeakMap=="function"?WeakMap:Map;function jy(s,o,c){c=Cr(-1,c),c.tag=3,c.payload={element:null};var f=o.value;return c.callback=function(){Cc||(Cc=!0,Af=f),vf(s,o)},c}function Py(s,o,c){c=Cr(-1,c),c.tag=3;var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var m=o.value;c.payload=function(){return f(m)},c.callback=function(){vf(s,o)}}var y=s.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(c.callback=function(){vf(s,o),typeof f!="function"&&(ls===null?ls=new Set([this]):ls.add(this));var k=o.stack;this.componentDidCatch(o.value,{componentStack:k!==null?k:""})}),c}function Iy(s,o,c){var f=s.pingCache;if(f===null){f=s.pingCache=new vE;var m=new Set;f.set(o,m)}else m=f.get(o),m===void 0&&(m=new Set,f.set(o,m));m.has(c)||(m.add(c),s=RE.bind(null,s,o,c),o.then(s,s))}function Ry(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function Ay(s,o,c,f,m){return(s.mode&1)===0?(s===o?s.flags|=65536:(s.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(o=Cr(-1,1),o.tag=2,os(c,o,1))),c.lanes|=1),s):(s.flags|=65536,s.lanes=m,s)}var wE=I.ReactCurrentOwner,dn=!1;function rn(s,o,c,f){o.child=s===null?Xg(o,null,c,f):Bi(o,s.child,c,f)}function Oy(s,o,c,f,m){c=c.render;var y=o.ref;return zi(o,m),f=cf(s,o,c,f,y,m),c=uf(),s!==null&&!dn?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~m,Nr(s,o,m)):(bt&&c&&Hd(o),o.flags|=1,rn(s,o,f,m),o.child)}function Dy(s,o,c,f,m){if(s===null){var y=c.type;return typeof y=="function"&&!$f(y)&&y.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(o.tag=15,o.type=y,My(s,o,y,f,m)):(s=Rc(c.type,null,f,o,o.mode,m),s.ref=o.ref,s.return=o,o.child=s)}if(y=s.child,(s.lanes&m)===0){var k=y.memoizedProps;if(c=c.compare,c=c!==null?c:ua,c(k,f)&&s.ref===o.ref)return Nr(s,o,m)}return o.flags|=1,s=fs(y,f),s.ref=o.ref,s.return=o,o.child=s}function My(s,o,c,f,m){if(s!==null){var y=s.memoizedProps;if(ua(y,f)&&s.ref===o.ref)if(dn=!1,o.pendingProps=f=y,(s.lanes&m)!==0)(s.flags&131072)!==0&&(dn=!0);else return o.lanes=s.lanes,Nr(s,o,m)}return wf(s,o,c,f,m)}function Ly(s,o,c){var f=o.pendingProps,m=f.children,y=s!==null?s.memoizedState:null;if(f.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},ft(Ki,bn),bn|=c;else{if((c&1073741824)===0)return s=y!==null?y.baseLanes|c:c,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,ft(Ki,bn),bn|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=y!==null?y.baseLanes:c,ft(Ki,bn),bn|=f}else y!==null?(f=y.baseLanes|c,o.memoizedState=null):f=c,ft(Ki,bn),bn|=f;return rn(s,o,m,c),o.child}function Uy(s,o){var c=o.ref;(s===null&&c!==null||s!==null&&s.ref!==c)&&(o.flags|=512,o.flags|=2097152)}function wf(s,o,c,f,m){var y=un(c)?Ks:Yt.current;return y=Li(o,y),zi(o,m),c=cf(s,o,c,f,y,m),f=uf(),s!==null&&!dn?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~m,Nr(s,o,m)):(bt&&f&&Hd(o),o.flags|=1,rn(s,o,c,m),o.child)}function Fy(s,o,c,f,m){if(un(c)){var y=!0;rc(o)}else y=!1;if(zi(o,m),o.stateNode===null)bc(s,o),Ny(o,c,f),gf(o,c,f,m),f=!0;else if(s===null){var k=o.stateNode,j=o.memoizedProps;k.props=j;var R=k.context,W=c.contextType;typeof W=="object"&&W!==null?W=Rn(W):(W=un(c)?Ks:Yt.current,W=Li(o,W));var Y=c.getDerivedStateFromProps,re=typeof Y=="function"||typeof k.getSnapshotBeforeUpdate=="function";re||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(j!==f||R!==W)&&Ty(o,k,f,W),is=!1;var Z=o.memoizedState;k.state=Z,fc(o,f,k,m),R=o.memoizedState,j!==f||Z!==R||cn.current||is?(typeof Y=="function"&&(mf(o,c,Y,f),R=o.memoizedState),(j=is||Cy(o,c,j,f,Z,R,W))?(re||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(o.flags|=4194308)):(typeof k.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=R),k.props=f,k.state=R,k.context=W,f=j):(typeof k.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{k=o.stateNode,ty(s,o),j=o.memoizedProps,W=o.type===o.elementType?j:zn(o.type,j),k.props=W,re=o.pendingProps,Z=k.context,R=c.contextType,typeof R=="object"&&R!==null?R=Rn(R):(R=un(c)?Ks:Yt.current,R=Li(o,R));var he=c.getDerivedStateFromProps;(Y=typeof he=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(j!==re||Z!==R)&&Ty(o,k,f,R),is=!1,Z=o.memoizedState,k.state=Z,fc(o,f,k,m);var ve=o.memoizedState;j!==re||Z!==ve||cn.current||is?(typeof he=="function"&&(mf(o,c,he,f),ve=o.memoizedState),(W=is||Cy(o,c,W,f,Z,ve,R)||!1)?(Y||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(f,ve,R),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(f,ve,R)),typeof k.componentDidUpdate=="function"&&(o.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof k.componentDidUpdate!="function"||j===s.memoizedProps&&Z===s.memoizedState||(o.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||j===s.memoizedProps&&Z===s.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=ve),k.props=f,k.state=ve,k.context=R,f=W):(typeof k.componentDidUpdate!="function"||j===s.memoizedProps&&Z===s.memoizedState||(o.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||j===s.memoizedProps&&Z===s.memoizedState||(o.flags|=1024),f=!1)}return xf(s,o,c,f,y,m)}function xf(s,o,c,f,m,y){Uy(s,o);var k=(o.flags&128)!==0;if(!f&&!k)return m&&Wg(o,c,!1),Nr(s,o,y);f=o.stateNode,wE.current=o;var j=k&&typeof c.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,s!==null&&k?(o.child=Bi(o,s.child,null,y),o.child=Bi(o,null,j,y)):rn(s,o,j,y),o.memoizedState=f.state,m&&Wg(o,c,!0),o.child}function $y(s){var o=s.stateNode;o.pendingContext?Vg(s,o.pendingContext,o.pendingContext!==o.context):o.context&&Vg(s,o.context,!1),nf(s,o.containerInfo)}function By(s,o,c,f,m){return $i(),Qd(m),o.flags|=256,rn(s,o,c,f),o.child}var bf={dehydrated:null,treeContext:null,retryLane:0};function _f(s){return{baseLanes:s,cachePool:null,transitions:null}}function Vy(s,o,c){var f=o.pendingProps,m=_t.current,y=!1,k=(o.flags&128)!==0,j;if((j=k)||(j=s!==null&&s.memoizedState===null?!1:(m&2)!==0),j?(y=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(m|=1),ft(_t,m&1),s===null)return Gd(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((o.mode&1)===0?o.lanes=1:s.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(k=f.children,s=f.fallback,y?(f=o.mode,y=o.child,k={mode:"hidden",children:k},(f&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=k):y=Ac(k,f,0,null),s=ri(s,f,c,null),y.return=o,s.return=o,y.sibling=s,o.child=y,o.child.memoizedState=_f(c),o.memoizedState=bf,s):Sf(o,k));if(m=s.memoizedState,m!==null&&(j=m.dehydrated,j!==null))return xE(s,o,k,f,j,m,c);if(y){y=f.fallback,k=o.mode,m=s.child,j=m.sibling;var R={mode:"hidden",children:f.children};return(k&1)===0&&o.child!==m?(f=o.child,f.childLanes=0,f.pendingProps=R,o.deletions=null):(f=fs(m,R),f.subtreeFlags=m.subtreeFlags&14680064),j!==null?y=fs(j,y):(y=ri(y,k,c,null),y.flags|=2),y.return=o,f.return=o,f.sibling=y,o.child=f,f=y,y=o.child,k=s.child.memoizedState,k=k===null?_f(c):{baseLanes:k.baseLanes|c,cachePool:null,transitions:k.transitions},y.memoizedState=k,y.childLanes=s.childLanes&~c,o.memoizedState=bf,f}return y=s.child,s=y.sibling,f=fs(y,{mode:"visible",children:f.children}),(o.mode&1)===0&&(f.lanes=c),f.return=o,f.sibling=null,s!==null&&(c=o.deletions,c===null?(o.deletions=[s],o.flags|=16):c.push(s)),o.child=f,o.memoizedState=null,f}function Sf(s,o){return o=Ac({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function xc(s,o,c,f){return f!==null&&Qd(f),Bi(o,s.child,null,c),s=Sf(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function xE(s,o,c,f,m,y,k){if(c)return o.flags&256?(o.flags&=-257,f=yf(Error(n(422))),xc(s,o,k,f)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(y=f.fallback,m=o.mode,f=Ac({mode:"visible",children:f.children},m,0,null),y=ri(y,m,k,null),y.flags|=2,f.return=o,y.return=o,f.sibling=y,o.child=f,(o.mode&1)!==0&&Bi(o,s.child,null,k),o.child.memoizedState=_f(k),o.memoizedState=bf,y);if((o.mode&1)===0)return xc(s,o,k,null);if(m.data==="$!"){if(f=m.nextSibling&&m.nextSibling.dataset,f)var j=f.dgst;return f=j,y=Error(n(419)),f=yf(y,f,void 0),xc(s,o,k,f)}if(j=(k&s.childLanes)!==0,dn||j){if(f=Wt,f!==null){switch(k&-k){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(f.suspendedLanes|k))!==0?0:m,m!==0&&m!==y.retryLane&&(y.retryLane=m,Er(s,m),qn(f,s,m,-1))}return Ff(),f=yf(Error(n(421))),xc(s,o,k,f)}return m.data==="$?"?(o.flags|=128,o.child=s.child,o=AE.bind(null,s),m._reactRetry=o,null):(s=y.treeContext,xn=ts(m.nextSibling),wn=o,bt=!0,Vn=null,s!==null&&(Pn[In++]=Sr,Pn[In++]=kr,Pn[In++]=Gs,Sr=s.id,kr=s.overflow,Gs=o),o=Sf(o,f.children),o.flags|=4096,o)}function zy(s,o,c){s.lanes|=o;var f=s.alternate;f!==null&&(f.lanes|=o),Xd(s.return,o,c)}function kf(s,o,c,f,m){var y=s.memoizedState;y===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:m}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=f,y.tail=c,y.tailMode=m)}function Wy(s,o,c){var f=o.pendingProps,m=f.revealOrder,y=f.tail;if(rn(s,o,f.children,c),f=_t.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&zy(s,c,o);else if(s.tag===19)zy(s,c,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}if(ft(_t,f),(o.mode&1)===0)o.memoizedState=null;else switch(m){case"forwards":for(c=o.child,m=null;c!==null;)s=c.alternate,s!==null&&hc(s)===null&&(m=c),c=c.sibling;c=m,c===null?(m=o.child,o.child=null):(m=c.sibling,c.sibling=null),kf(o,!1,m,c,y);break;case"backwards":for(c=null,m=o.child,o.child=null;m!==null;){if(s=m.alternate,s!==null&&hc(s)===null){o.child=m;break}s=m.sibling,m.sibling=c,c=m,m=s}kf(o,!0,c,null,y);break;case"together":kf(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function bc(s,o){(o.mode&1)===0&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function Nr(s,o,c){if(s!==null&&(o.dependencies=s.dependencies),Xs|=o.lanes,(c&o.childLanes)===0)return null;if(s!==null&&o.child!==s.child)throw Error(n(153));if(o.child!==null){for(s=o.child,c=fs(s,s.pendingProps),o.child=c,c.return=o;s.sibling!==null;)s=s.sibling,c=c.sibling=fs(s,s.pendingProps),c.return=o;c.sibling=null}return o.child}function bE(s,o,c){switch(o.tag){case 3:$y(o),$i();break;case 5:sy(o);break;case 1:un(o.type)&&rc(o);break;case 4:nf(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,m=o.memoizedProps.value;ft(cc,f._currentValue),f._currentValue=m;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(ft(_t,_t.current&1),o.flags|=128,null):(c&o.child.childLanes)!==0?Vy(s,o,c):(ft(_t,_t.current&1),s=Nr(s,o,c),s!==null?s.sibling:null);ft(_t,_t.current&1);break;case 19:if(f=(c&o.childLanes)!==0,(s.flags&128)!==0){if(f)return Wy(s,o,c);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ft(_t,_t.current),f)break;return null;case 22:case 23:return o.lanes=0,Ly(s,o,c)}return Nr(s,o,c)}var Hy,Ef,qy,Ky;Hy=function(s,o){for(var c=o.child;c!==null;){if(c.tag===5||c.tag===6)s.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Ef=function(){},qy=function(s,o,c,f){var m=s.memoizedProps;if(m!==f){s=o.stateNode,Zs(ir.current);var y=null;switch(c){case"input":m=dt(s,m),f=dt(s,f),y=[];break;case"select":m=ne({},m,{value:void 0}),f=ne({},f,{value:void 0}),y=[];break;case"textarea":m=V(s,m),f=V(s,f),y=[];break;default:typeof m.onClick!="function"&&typeof f.onClick=="function"&&(s.onclick=ec)}Zt(c,f);var k;c=null;for(W in m)if(!f.hasOwnProperty(W)&&m.hasOwnProperty(W)&&m[W]!=null)if(W==="style"){var j=m[W];for(k in j)j.hasOwnProperty(k)&&(c||(c={}),c[k]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(i.hasOwnProperty(W)?y||(y=[]):(y=y||[]).push(W,null));for(W in f){var R=f[W];if(j=m?.[W],f.hasOwnProperty(W)&&R!==j&&(R!=null||j!=null))if(W==="style")if(j){for(k in j)!j.hasOwnProperty(k)||R&&R.hasOwnProperty(k)||(c||(c={}),c[k]="");for(k in R)R.hasOwnProperty(k)&&j[k]!==R[k]&&(c||(c={}),c[k]=R[k])}else c||(y||(y=[]),y.push(W,c)),c=R;else W==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,j=j?j.__html:void 0,R!=null&&j!==R&&(y=y||[]).push(W,R)):W==="children"?typeof R!="string"&&typeof R!="number"||(y=y||[]).push(W,""+R):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(i.hasOwnProperty(W)?(R!=null&&W==="onScroll"&&gt("scroll",s),y||j===R||(y=[])):(y=y||[]).push(W,R))}c&&(y=y||[]).push("style",c);var W=y;(o.updateQueue=W)&&(o.flags|=4)}},Ky=function(s,o,c,f){c!==f&&(o.flags|=4)};function Ea(s,o){if(!bt)switch(s.tailMode){case"hidden":o=s.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function en(s){var o=s.alternate!==null&&s.alternate.child===s.child,c=0,f=0;if(o)for(var m=s.child;m!==null;)c|=m.lanes|m.childLanes,f|=m.subtreeFlags&14680064,f|=m.flags&14680064,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)c|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=f,s.childLanes=c,o}function _E(s,o,c){var f=o.pendingProps;switch(qd(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return en(o),null;case 1:return un(o.type)&&nc(),en(o),null;case 3:return f=o.stateNode,Wi(),yt(cn),yt(Yt),of(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(ac(o)?o.flags|=4:s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Vn!==null&&(Mf(Vn),Vn=null))),Ef(s,o),en(o),null;case 5:rf(o);var m=Zs(xa.current);if(c=o.type,s!==null&&o.stateNode!=null)qy(s,o,c,f,m),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(n(166));return en(o),null}if(s=Zs(ir.current),ac(o)){f=o.stateNode,c=o.type;var y=o.memoizedProps;switch(f[sr]=o,f[ma]=y,s=(o.mode&1)!==0,c){case"dialog":gt("cancel",f),gt("close",f);break;case"iframe":case"object":case"embed":gt("load",f);break;case"video":case"audio":for(m=0;m<fa.length;m++)gt(fa[m],f);break;case"source":gt("error",f);break;case"img":case"image":case"link":gt("error",f),gt("load",f);break;case"details":gt("toggle",f);break;case"input":Vt(f,y),gt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!y.multiple},gt("invalid",f);break;case"textarea":de(f,y),gt("invalid",f)}Zt(c,y),m=null;for(var k in y)if(y.hasOwnProperty(k)){var j=y[k];k==="children"?typeof j=="string"?f.textContent!==j&&(y.suppressHydrationWarning!==!0&&Xl(f.textContent,j,s),m=["children",j]):typeof j=="number"&&f.textContent!==""+j&&(y.suppressHydrationWarning!==!0&&Xl(f.textContent,j,s),m=["children",""+j]):i.hasOwnProperty(k)&&j!=null&&k==="onScroll"&&gt("scroll",f)}switch(c){case"input":De(f),Ee(f,y,!0);break;case"textarea":De(f),se(f);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(f.onclick=ec)}f=m,o.updateQueue=f,f!==null&&(o.flags|=4)}else{k=m.nodeType===9?m:m.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=xe(c)),s==="http://www.w3.org/1999/xhtml"?c==="script"?(s=k.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof f.is=="string"?s=k.createElement(c,{is:f.is}):(s=k.createElement(c),c==="select"&&(k=s,f.multiple?k.multiple=!0:f.size&&(k.size=f.size))):s=k.createElementNS(s,c),s[sr]=o,s[ma]=f,Hy(s,o,!1,!1),o.stateNode=s;e:{switch(k=xr(c,f),c){case"dialog":gt("cancel",s),gt("close",s),m=f;break;case"iframe":case"object":case"embed":gt("load",s),m=f;break;case"video":case"audio":for(m=0;m<fa.length;m++)gt(fa[m],s);m=f;break;case"source":gt("error",s),m=f;break;case"img":case"image":case"link":gt("error",s),gt("load",s),m=f;break;case"details":gt("toggle",s),m=f;break;case"input":Vt(s,f),m=dt(s,f),gt("invalid",s);break;case"option":m=f;break;case"select":s._wrapperState={wasMultiple:!!f.multiple},m=ne({},f,{value:void 0}),gt("invalid",s);break;case"textarea":de(s,f),m=V(s,f),gt("invalid",s);break;default:m=f}Zt(c,m),j=m;for(y in j)if(j.hasOwnProperty(y)){var R=j[y];y==="style"?Et(s,R):y==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&ge(s,R)):y==="children"?typeof R=="string"?(c!=="textarea"||R!=="")&&ze(s,R):typeof R=="number"&&ze(s,""+R):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(i.hasOwnProperty(y)?R!=null&&y==="onScroll"&&gt("scroll",s):R!=null&&N(s,y,R,k))}switch(c){case"input":De(s),Ee(s,f,!1);break;case"textarea":De(s),se(s);break;case"option":f.value!=null&&s.setAttribute("value",""+me(f.value));break;case"select":s.multiple=!!f.multiple,y=f.value,y!=null?U(s,!!f.multiple,y,!1):f.defaultValue!=null&&U(s,!!f.multiple,f.defaultValue,!0);break;default:typeof m.onClick=="function"&&(s.onclick=ec)}switch(c){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return en(o),null;case 6:if(s&&o.stateNode!=null)Ky(s,o,s.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(n(166));if(c=Zs(xa.current),Zs(ir.current),ac(o)){if(f=o.stateNode,c=o.memoizedProps,f[sr]=o,(y=f.nodeValue!==c)&&(s=wn,s!==null))switch(s.tag){case 3:Xl(f.nodeValue,c,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Xl(f.nodeValue,c,(s.mode&1)!==0)}y&&(o.flags|=4)}else f=(c.nodeType===9?c:c.ownerDocument).createTextNode(f),f[sr]=o,o.stateNode=f}return en(o),null;case 13:if(yt(_t),f=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(bt&&xn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Jg(),$i(),o.flags|=98560,y=!1;else if(y=ac(o),f!==null&&f.dehydrated!==null){if(s===null){if(!y)throw Error(n(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(n(317));y[sr]=o}else $i(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;en(o),y=!1}else Vn!==null&&(Mf(Vn),Vn=null),y=!0;if(!y)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=c,o):(f=f!==null,f!==(s!==null&&s.memoizedState!==null)&&f&&(o.child.flags|=8192,(o.mode&1)!==0&&(s===null||(_t.current&1)!==0?Ut===0&&(Ut=3):Ff())),o.updateQueue!==null&&(o.flags|=4),en(o),null);case 4:return Wi(),Ef(s,o),s===null&&ha(o.stateNode.containerInfo),en(o),null;case 10:return Yd(o.type._context),en(o),null;case 17:return un(o.type)&&nc(),en(o),null;case 19:if(yt(_t),y=o.memoizedState,y===null)return en(o),null;if(f=(o.flags&128)!==0,k=y.rendering,k===null)if(f)Ea(y,!1);else{if(Ut!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(k=hc(s),k!==null){for(o.flags|=128,Ea(y,!1),f=k.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=c,c=o.child;c!==null;)y=c,s=f,y.flags&=14680066,k=y.alternate,k===null?(y.childLanes=0,y.lanes=s,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=k.childLanes,y.lanes=k.lanes,y.child=k.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=k.memoizedProps,y.memoizedState=k.memoizedState,y.updateQueue=k.updateQueue,y.type=k.type,s=k.dependencies,y.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),c=c.sibling;return ft(_t,_t.current&1|2),o.child}s=s.sibling}y.tail!==null&&Nt()>Gi&&(o.flags|=128,f=!0,Ea(y,!1),o.lanes=4194304)}else{if(!f)if(s=hc(k),s!==null){if(o.flags|=128,f=!0,c=s.updateQueue,c!==null&&(o.updateQueue=c,o.flags|=4),Ea(y,!0),y.tail===null&&y.tailMode==="hidden"&&!k.alternate&&!bt)return en(o),null}else 2*Nt()-y.renderingStartTime>Gi&&c!==1073741824&&(o.flags|=128,f=!0,Ea(y,!1),o.lanes=4194304);y.isBackwards?(k.sibling=o.child,o.child=k):(c=y.last,c!==null?c.sibling=k:o.child=k,y.last=k)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=Nt(),o.sibling=null,c=_t.current,ft(_t,f?c&1|2:c&1),o):(en(o),null);case 22:case 23:return Uf(),f=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==f&&(o.flags|=8192),f&&(o.mode&1)!==0?(bn&1073741824)!==0&&(en(o),o.subtreeFlags&6&&(o.flags|=8192)):en(o),null;case 24:return null;case 25:return null}throw Error(n(156,o.tag))}function SE(s,o){switch(qd(o),o.tag){case 1:return un(o.type)&&nc(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return Wi(),yt(cn),yt(Yt),of(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 5:return rf(o),null;case 13:if(yt(_t),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(n(340));$i()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return yt(_t),null;case 4:return Wi(),null;case 10:return Yd(o.type._context),null;case 22:case 23:return Uf(),null;case 24:return null;default:return null}}var _c=!1,tn=!1,kE=typeof WeakSet=="function"?WeakSet:Set,ye=null;function qi(s,o){var c=s.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(f){Ct(s,o,f)}else c.current=null}function Cf(s,o,c){try{c()}catch(f){Ct(s,o,f)}}var Gy=!1;function EE(s,o){if(Ld=Vl,s=Cg(),jd(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var m=f.anchorOffset,y=f.focusNode;f=f.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var k=0,j=-1,R=-1,W=0,Y=0,re=s,Z=null;t:for(;;){for(var he;re!==c||m!==0&&re.nodeType!==3||(j=k+m),re!==y||f!==0&&re.nodeType!==3||(R=k+f),re.nodeType===3&&(k+=re.nodeValue.length),(he=re.firstChild)!==null;)Z=re,re=he;for(;;){if(re===s)break t;if(Z===c&&++W===m&&(j=k),Z===y&&++Y===f&&(R=k),(he=re.nextSibling)!==null)break;re=Z,Z=re.parentNode}re=he}c=j===-1||R===-1?null:{start:j,end:R}}else c=null}c=c||{start:0,end:0}}else c=null;for(Ud={focusedElem:s,selectionRange:c},Vl=!1,ye=o;ye!==null;)if(o=ye,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,ye=s;else for(;ye!==null;){o=ye;try{var ve=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ve!==null){var _e=ve.memoizedProps,Tt=ve.memoizedState,F=o.stateNode,M=F.getSnapshotBeforeUpdate(o.elementType===o.type?_e:zn(o.type,_e),Tt);F.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var B=o.stateNode.containerInfo;B.nodeType===1?B.textContent="":B.nodeType===9&&B.documentElement&&B.removeChild(B.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(ae){Ct(o,o.return,ae)}if(s=o.sibling,s!==null){s.return=o.return,ye=s;break}ye=o.return}return ve=Gy,Gy=!1,ve}function Ca(s,o,c){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var m=f=f.next;do{if((m.tag&s)===s){var y=m.destroy;m.destroy=void 0,y!==void 0&&Cf(o,c,y)}m=m.next}while(m!==f)}}function Sc(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var c=o=o.next;do{if((c.tag&s)===s){var f=c.create;c.destroy=f()}c=c.next}while(c!==o)}}function Nf(s){var o=s.ref;if(o!==null){var c=s.stateNode;switch(s.tag){case 5:s=c;break;default:s=c}typeof o=="function"?o(s):o.current=s}}function Qy(s){var o=s.alternate;o!==null&&(s.alternate=null,Qy(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&(delete o[sr],delete o[ma],delete o[Vd],delete o[aE],delete o[lE])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Jy(s){return s.tag===5||s.tag===3||s.tag===4}function Zy(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Jy(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Tf(s,o,c){var f=s.tag;if(f===5||f===6)s=s.stateNode,o?c.nodeType===8?c.parentNode.insertBefore(s,o):c.insertBefore(s,o):(c.nodeType===8?(o=c.parentNode,o.insertBefore(s,c)):(o=c,o.appendChild(s)),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=ec));else if(f!==4&&(s=s.child,s!==null))for(Tf(s,o,c),s=s.sibling;s!==null;)Tf(s,o,c),s=s.sibling}function jf(s,o,c){var f=s.tag;if(f===5||f===6)s=s.stateNode,o?c.insertBefore(s,o):c.appendChild(s);else if(f!==4&&(s=s.child,s!==null))for(jf(s,o,c),s=s.sibling;s!==null;)jf(s,o,c),s=s.sibling}var Qt=null,Wn=!1;function as(s,o,c){for(c=c.child;c!==null;)Yy(s,o,c),c=c.sibling}function Yy(s,o,c){if(rr&&typeof rr.onCommitFiberUnmount=="function")try{rr.onCommitFiberUnmount(Ml,c)}catch{}switch(c.tag){case 5:tn||qi(c,o);case 6:var f=Qt,m=Wn;Qt=null,as(s,o,c),Qt=f,Wn=m,Qt!==null&&(Wn?(s=Qt,c=c.stateNode,s.nodeType===8?s.parentNode.removeChild(c):s.removeChild(c)):Qt.removeChild(c.stateNode));break;case 18:Qt!==null&&(Wn?(s=Qt,c=c.stateNode,s.nodeType===8?Bd(s.parentNode,c):s.nodeType===1&&Bd(s,c),sa(s)):Bd(Qt,c.stateNode));break;case 4:f=Qt,m=Wn,Qt=c.stateNode.containerInfo,Wn=!0,as(s,o,c),Qt=f,Wn=m;break;case 0:case 11:case 14:case 15:if(!tn&&(f=c.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){m=f=f.next;do{var y=m,k=y.destroy;y=y.tag,k!==void 0&&((y&2)!==0||(y&4)!==0)&&Cf(c,o,k),m=m.next}while(m!==f)}as(s,o,c);break;case 1:if(!tn&&(qi(c,o),f=c.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=c.memoizedProps,f.state=c.memoizedState,f.componentWillUnmount()}catch(j){Ct(c,o,j)}as(s,o,c);break;case 21:as(s,o,c);break;case 22:c.mode&1?(tn=(f=tn)||c.memoizedState!==null,as(s,o,c),tn=f):as(s,o,c);break;default:as(s,o,c)}}function Xy(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var c=s.stateNode;c===null&&(c=s.stateNode=new kE),o.forEach(function(f){var m=OE.bind(null,s,f);c.has(f)||(c.add(f),f.then(m,m))})}}function Hn(s,o){var c=o.deletions;if(c!==null)for(var f=0;f<c.length;f++){var m=c[f];try{var y=s,k=o,j=k;e:for(;j!==null;){switch(j.tag){case 5:Qt=j.stateNode,Wn=!1;break e;case 3:Qt=j.stateNode.containerInfo,Wn=!0;break e;case 4:Qt=j.stateNode.containerInfo,Wn=!0;break e}j=j.return}if(Qt===null)throw Error(n(160));Yy(y,k,m),Qt=null,Wn=!1;var R=m.alternate;R!==null&&(R.return=null),m.return=null}catch(W){Ct(m,o,W)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)ev(o,s),o=o.sibling}function ev(s,o){var c=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Hn(o,s),ar(s),f&4){try{Ca(3,s,s.return),Sc(3,s)}catch(_e){Ct(s,s.return,_e)}try{Ca(5,s,s.return)}catch(_e){Ct(s,s.return,_e)}}break;case 1:Hn(o,s),ar(s),f&512&&c!==null&&qi(c,c.return);break;case 5:if(Hn(o,s),ar(s),f&512&&c!==null&&qi(c,c.return),s.flags&32){var m=s.stateNode;try{ze(m,"")}catch(_e){Ct(s,s.return,_e)}}if(f&4&&(m=s.stateNode,m!=null)){var y=s.memoizedProps,k=c!==null?c.memoizedProps:y,j=s.type,R=s.updateQueue;if(s.updateQueue=null,R!==null)try{j==="input"&&y.type==="radio"&&y.name!=null&&kt(m,y),xr(j,k);var W=xr(j,y);for(k=0;k<R.length;k+=2){var Y=R[k],re=R[k+1];Y==="style"?Et(m,re):Y==="dangerouslySetInnerHTML"?ge(m,re):Y==="children"?ze(m,re):N(m,Y,re,W)}switch(j){case"input":Gt(m,y);break;case"textarea":oe(m,y);break;case"select":var Z=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!y.multiple;var he=y.value;he!=null?U(m,!!y.multiple,he,!1):Z!==!!y.multiple&&(y.defaultValue!=null?U(m,!!y.multiple,y.defaultValue,!0):U(m,!!y.multiple,y.multiple?[]:"",!1))}m[ma]=y}catch(_e){Ct(s,s.return,_e)}}break;case 6:if(Hn(o,s),ar(s),f&4){if(s.stateNode===null)throw Error(n(162));m=s.stateNode,y=s.memoizedProps;try{m.nodeValue=y}catch(_e){Ct(s,s.return,_e)}}break;case 3:if(Hn(o,s),ar(s),f&4&&c!==null&&c.memoizedState.isDehydrated)try{sa(o.containerInfo)}catch(_e){Ct(s,s.return,_e)}break;case 4:Hn(o,s),ar(s);break;case 13:Hn(o,s),ar(s),m=s.child,m.flags&8192&&(y=m.memoizedState!==null,m.stateNode.isHidden=y,!y||m.alternate!==null&&m.alternate.memoizedState!==null||(Rf=Nt())),f&4&&Xy(s);break;case 22:if(Y=c!==null&&c.memoizedState!==null,s.mode&1?(tn=(W=tn)||Y,Hn(o,s),tn=W):Hn(o,s),ar(s),f&8192){if(W=s.memoizedState!==null,(s.stateNode.isHidden=W)&&!Y&&(s.mode&1)!==0)for(ye=s,Y=s.child;Y!==null;){for(re=ye=Y;ye!==null;){switch(Z=ye,he=Z.child,Z.tag){case 0:case 11:case 14:case 15:Ca(4,Z,Z.return);break;case 1:qi(Z,Z.return);var ve=Z.stateNode;if(typeof ve.componentWillUnmount=="function"){f=Z,c=Z.return;try{o=f,ve.props=o.memoizedProps,ve.state=o.memoizedState,ve.componentWillUnmount()}catch(_e){Ct(f,c,_e)}}break;case 5:qi(Z,Z.return);break;case 22:if(Z.memoizedState!==null){rv(re);continue}}he!==null?(he.return=Z,ye=he):rv(re)}Y=Y.sibling}e:for(Y=null,re=s;;){if(re.tag===5){if(Y===null){Y=re;try{m=re.stateNode,W?(y=m.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(j=re.stateNode,R=re.memoizedProps.style,k=R!=null&&R.hasOwnProperty("display")?R.display:null,j.style.display=mt("display",k))}catch(_e){Ct(s,s.return,_e)}}}else if(re.tag===6){if(Y===null)try{re.stateNode.nodeValue=W?"":re.memoizedProps}catch(_e){Ct(s,s.return,_e)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===s)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===s)break e;for(;re.sibling===null;){if(re.return===null||re.return===s)break e;Y===re&&(Y=null),re=re.return}Y===re&&(Y=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:Hn(o,s),ar(s),f&4&&Xy(s);break;case 21:break;default:Hn(o,s),ar(s)}}function ar(s){var o=s.flags;if(o&2){try{e:{for(var c=s.return;c!==null;){if(Jy(c)){var f=c;break e}c=c.return}throw Error(n(160))}switch(f.tag){case 5:var m=f.stateNode;f.flags&32&&(ze(m,""),f.flags&=-33);var y=Zy(s);jf(s,y,m);break;case 3:case 4:var k=f.stateNode.containerInfo,j=Zy(s);Tf(s,j,k);break;default:throw Error(n(161))}}catch(R){Ct(s,s.return,R)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function CE(s,o,c){ye=s,tv(s)}function tv(s,o,c){for(var f=(s.mode&1)!==0;ye!==null;){var m=ye,y=m.child;if(m.tag===22&&f){var k=m.memoizedState!==null||_c;if(!k){var j=m.alternate,R=j!==null&&j.memoizedState!==null||tn;j=_c;var W=tn;if(_c=k,(tn=R)&&!W)for(ye=m;ye!==null;)k=ye,R=k.child,k.tag===22&&k.memoizedState!==null?sv(m):R!==null?(R.return=k,ye=R):sv(m);for(;y!==null;)ye=y,tv(y),y=y.sibling;ye=m,_c=j,tn=W}nv(s)}else(m.subtreeFlags&8772)!==0&&y!==null?(y.return=m,ye=y):nv(s)}}function nv(s){for(;ye!==null;){var o=ye;if((o.flags&8772)!==0){var c=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:tn||Sc(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!tn)if(c===null)f.componentDidMount();else{var m=o.elementType===o.type?c.memoizedProps:zn(o.type,c.memoizedProps);f.componentDidUpdate(m,c.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&ry(o,y,f);break;case 3:var k=o.updateQueue;if(k!==null){if(c=null,o.child!==null)switch(o.child.tag){case 5:c=o.child.stateNode;break;case 1:c=o.child.stateNode}ry(o,k,c)}break;case 5:var j=o.stateNode;if(c===null&&o.flags&4){c=j;var R=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&c.focus();break;case"img":R.src&&(c.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var W=o.alternate;if(W!==null){var Y=W.memoizedState;if(Y!==null){var re=Y.dehydrated;re!==null&&sa(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}tn||o.flags&512&&Nf(o)}catch(Z){Ct(o,o.return,Z)}}if(o===s){ye=null;break}if(c=o.sibling,c!==null){c.return=o.return,ye=c;break}ye=o.return}}function rv(s){for(;ye!==null;){var o=ye;if(o===s){ye=null;break}var c=o.sibling;if(c!==null){c.return=o.return,ye=c;break}ye=o.return}}function sv(s){for(;ye!==null;){var o=ye;try{switch(o.tag){case 0:case 11:case 15:var c=o.return;try{Sc(4,o)}catch(R){Ct(o,c,R)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var m=o.return;try{f.componentDidMount()}catch(R){Ct(o,m,R)}}var y=o.return;try{Nf(o)}catch(R){Ct(o,y,R)}break;case 5:var k=o.return;try{Nf(o)}catch(R){Ct(o,k,R)}}}catch(R){Ct(o,o.return,R)}if(o===s){ye=null;break}var j=o.sibling;if(j!==null){j.return=o.return,ye=j;break}ye=o.return}}var NE=Math.ceil,kc=I.ReactCurrentDispatcher,Pf=I.ReactCurrentOwner,On=I.ReactCurrentBatchConfig,Ye=0,Wt=null,Pt=null,Jt=0,bn=0,Ki=ns(0),Ut=0,Na=null,Xs=0,Ec=0,If=0,Ta=null,fn=null,Rf=0,Gi=1/0,Tr=null,Cc=!1,Af=null,ls=null,Nc=!1,cs=null,Tc=0,ja=0,Of=null,jc=-1,Pc=0;function sn(){return(Ye&6)!==0?Nt():jc!==-1?jc:jc=Nt()}function us(s){return(s.mode&1)===0?1:(Ye&2)!==0&&Jt!==0?Jt&-Jt:uE.transition!==null?(Pc===0&&(Pc=Zm()),Pc):(s=it,s!==0||(s=window.event,s=s===void 0?16:og(s.type)),s)}function qn(s,o,c,f){if(50<ja)throw ja=0,Of=null,Error(n(185));Xo(s,c,f),((Ye&2)===0||s!==Wt)&&(s===Wt&&((Ye&2)===0&&(Ec|=c),Ut===4&&ds(s,Jt)),hn(s,f),c===1&&Ye===0&&(o.mode&1)===0&&(Gi=Nt()+500,sc&&ss()))}function hn(s,o){var c=s.callbackNode;u1(s,o);var f=Fl(s,s===Wt?Jt:0);if(f===0)c!==null&&Gm(c),s.callbackNode=null,s.callbackPriority=0;else if(o=f&-f,s.callbackPriority!==o){if(c!=null&&Gm(c),o===1)s.tag===0?cE(ov.bind(null,s)):Hg(ov.bind(null,s)),iE(function(){(Ye&6)===0&&ss()}),c=null;else{switch(Ym(f)){case 1:c=fd;break;case 4:c=Qm;break;case 16:c=Dl;break;case 536870912:c=Jm;break;default:c=Dl}c=pv(c,iv.bind(null,s))}s.callbackPriority=o,s.callbackNode=c}}function iv(s,o){if(jc=-1,Pc=0,(Ye&6)!==0)throw Error(n(327));var c=s.callbackNode;if(Qi()&&s.callbackNode!==c)return null;var f=Fl(s,s===Wt?Jt:0);if(f===0)return null;if((f&30)!==0||(f&s.expiredLanes)!==0||o)o=Ic(s,f);else{o=f;var m=Ye;Ye|=2;var y=lv();(Wt!==s||Jt!==o)&&(Tr=null,Gi=Nt()+500,ti(s,o));do try{PE();break}catch(j){av(s,j)}while(!0);Zd(),kc.current=y,Ye=m,Pt!==null?o=0:(Wt=null,Jt=0,o=Ut)}if(o!==0){if(o===2&&(m=hd(s),m!==0&&(f=m,o=Df(s,m))),o===1)throw c=Na,ti(s,0),ds(s,f),hn(s,Nt()),c;if(o===6)ds(s,f);else{if(m=s.current.alternate,(f&30)===0&&!TE(m)&&(o=Ic(s,f),o===2&&(y=hd(s),y!==0&&(f=y,o=Df(s,y))),o===1))throw c=Na,ti(s,0),ds(s,f),hn(s,Nt()),c;switch(s.finishedWork=m,s.finishedLanes=f,o){case 0:case 1:throw Error(n(345));case 2:ni(s,fn,Tr);break;case 3:if(ds(s,f),(f&130023424)===f&&(o=Rf+500-Nt(),10<o)){if(Fl(s,0)!==0)break;if(m=s.suspendedLanes,(m&f)!==f){sn(),s.pingedLanes|=s.suspendedLanes&m;break}s.timeoutHandle=$d(ni.bind(null,s,fn,Tr),o);break}ni(s,fn,Tr);break;case 4:if(ds(s,f),(f&4194240)===f)break;for(o=s.eventTimes,m=-1;0<f;){var k=31-$n(f);y=1<<k,k=o[k],k>m&&(m=k),f&=~y}if(f=m,f=Nt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*NE(f/1960))-f,10<f){s.timeoutHandle=$d(ni.bind(null,s,fn,Tr),f);break}ni(s,fn,Tr);break;case 5:ni(s,fn,Tr);break;default:throw Error(n(329))}}}return hn(s,Nt()),s.callbackNode===c?iv.bind(null,s):null}function Df(s,o){var c=Ta;return s.current.memoizedState.isDehydrated&&(ti(s,o).flags|=256),s=Ic(s,o),s!==2&&(o=fn,fn=c,o!==null&&Mf(o)),s}function Mf(s){fn===null?fn=s:fn.push.apply(fn,s)}function TE(s){for(var o=s;;){if(o.flags&16384){var c=o.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var f=0;f<c.length;f++){var m=c[f],y=m.getSnapshot;m=m.value;try{if(!Bn(y(),m))return!1}catch{return!1}}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ds(s,o){for(o&=~If,o&=~Ec,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var c=31-$n(o),f=1<<c;s[c]=-1,o&=~f}}function ov(s){if((Ye&6)!==0)throw Error(n(327));Qi();var o=Fl(s,0);if((o&1)===0)return hn(s,Nt()),null;var c=Ic(s,o);if(s.tag!==0&&c===2){var f=hd(s);f!==0&&(o=f,c=Df(s,f))}if(c===1)throw c=Na,ti(s,0),ds(s,o),hn(s,Nt()),c;if(c===6)throw Error(n(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,ni(s,fn,Tr),hn(s,Nt()),null}function Lf(s,o){var c=Ye;Ye|=1;try{return s(o)}finally{Ye=c,Ye===0&&(Gi=Nt()+500,sc&&ss())}}function ei(s){cs!==null&&cs.tag===0&&(Ye&6)===0&&Qi();var o=Ye;Ye|=1;var c=On.transition,f=it;try{if(On.transition=null,it=1,s)return s()}finally{it=f,On.transition=c,Ye=o,(Ye&6)===0&&ss()}}function Uf(){bn=Ki.current,yt(Ki)}function ti(s,o){s.finishedWork=null,s.finishedLanes=0;var c=s.timeoutHandle;if(c!==-1&&(s.timeoutHandle=-1,sE(c)),Pt!==null)for(c=Pt.return;c!==null;){var f=c;switch(qd(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&nc();break;case 3:Wi(),yt(cn),yt(Yt),of();break;case 5:rf(f);break;case 4:Wi();break;case 13:yt(_t);break;case 19:yt(_t);break;case 10:Yd(f.type._context);break;case 22:case 23:Uf()}c=c.return}if(Wt=s,Pt=s=fs(s.current,null),Jt=bn=o,Ut=0,Na=null,If=Ec=Xs=0,fn=Ta=null,Js!==null){for(o=0;o<Js.length;o++)if(c=Js[o],f=c.interleaved,f!==null){c.interleaved=null;var m=f.next,y=c.pending;if(y!==null){var k=y.next;y.next=m,f.next=k}c.pending=f}Js=null}return s}function av(s,o){do{var c=Pt;try{if(Zd(),pc.current=vc,mc){for(var f=St.memoizedState;f!==null;){var m=f.queue;m!==null&&(m.pending=null),f=f.next}mc=!1}if(Ys=0,zt=Lt=St=null,ba=!1,_a=0,Pf.current=null,c===null||c.return===null){Ut=1,Na=o,Pt=null;break}e:{var y=s,k=c.return,j=c,R=o;if(o=Jt,j.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var W=R,Y=j,re=Y.tag;if((Y.mode&1)===0&&(re===0||re===11||re===15)){var Z=Y.alternate;Z?(Y.updateQueue=Z.updateQueue,Y.memoizedState=Z.memoizedState,Y.lanes=Z.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var he=Ry(k);if(he!==null){he.flags&=-257,Ay(he,k,j,y,o),he.mode&1&&Iy(y,W,o),o=he,R=W;var ve=o.updateQueue;if(ve===null){var _e=new Set;_e.add(R),o.updateQueue=_e}else ve.add(R);break e}else{if((o&1)===0){Iy(y,W,o),Ff();break e}R=Error(n(426))}}else if(bt&&j.mode&1){var Tt=Ry(k);if(Tt!==null){(Tt.flags&65536)===0&&(Tt.flags|=256),Ay(Tt,k,j,y,o),Qd(Hi(R,j));break e}}y=R=Hi(R,j),Ut!==4&&(Ut=2),Ta===null?Ta=[y]:Ta.push(y),y=k;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var F=jy(y,R,o);ny(y,F);break e;case 1:j=R;var M=y.type,B=y.stateNode;if((y.flags&128)===0&&(typeof M.getDerivedStateFromError=="function"||B!==null&&typeof B.componentDidCatch=="function"&&(ls===null||!ls.has(B)))){y.flags|=65536,o&=-o,y.lanes|=o;var ae=Py(y,j,o);ny(y,ae);break e}}y=y.return}while(y!==null)}uv(c)}catch(Ce){o=Ce,Pt===c&&c!==null&&(Pt=c=c.return);continue}break}while(!0)}function lv(){var s=kc.current;return kc.current=vc,s===null?vc:s}function Ff(){(Ut===0||Ut===3||Ut===2)&&(Ut=4),Wt===null||(Xs&268435455)===0&&(Ec&268435455)===0||ds(Wt,Jt)}function Ic(s,o){var c=Ye;Ye|=2;var f=lv();(Wt!==s||Jt!==o)&&(Tr=null,ti(s,o));do try{jE();break}catch(m){av(s,m)}while(!0);if(Zd(),Ye=c,kc.current=f,Pt!==null)throw Error(n(261));return Wt=null,Jt=0,Ut}function jE(){for(;Pt!==null;)cv(Pt)}function PE(){for(;Pt!==null&&!t1();)cv(Pt)}function cv(s){var o=hv(s.alternate,s,bn);s.memoizedProps=s.pendingProps,o===null?uv(s):Pt=o,Pf.current=null}function uv(s){var o=s;do{var c=o.alternate;if(s=o.return,(o.flags&32768)===0){if(c=_E(c,o,bn),c!==null){Pt=c;return}}else{if(c=SE(c,o),c!==null){c.flags&=32767,Pt=c;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Ut=6,Pt=null;return}}if(o=o.sibling,o!==null){Pt=o;return}Pt=o=s}while(o!==null);Ut===0&&(Ut=5)}function ni(s,o,c){var f=it,m=On.transition;try{On.transition=null,it=1,IE(s,o,c,f)}finally{On.transition=m,it=f}return null}function IE(s,o,c,f){do Qi();while(cs!==null);if((Ye&6)!==0)throw Error(n(327));c=s.finishedWork;var m=s.finishedLanes;if(c===null)return null;if(s.finishedWork=null,s.finishedLanes=0,c===s.current)throw Error(n(177));s.callbackNode=null,s.callbackPriority=0;var y=c.lanes|c.childLanes;if(d1(s,y),s===Wt&&(Pt=Wt=null,Jt=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Nc||(Nc=!0,pv(Dl,function(){return Qi(),null})),y=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||y){y=On.transition,On.transition=null;var k=it;it=1;var j=Ye;Ye|=4,Pf.current=null,EE(s,c),ev(c,s),Z1(Ud),Vl=!!Ld,Ud=Ld=null,s.current=c,CE(c),n1(),Ye=j,it=k,On.transition=y}else s.current=c;if(Nc&&(Nc=!1,cs=s,Tc=m),y=s.pendingLanes,y===0&&(ls=null),i1(c.stateNode),hn(s,Nt()),o!==null)for(f=s.onRecoverableError,c=0;c<o.length;c++)m=o[c],f(m.value,{componentStack:m.stack,digest:m.digest});if(Cc)throw Cc=!1,s=Af,Af=null,s;return(Tc&1)!==0&&s.tag!==0&&Qi(),y=s.pendingLanes,(y&1)!==0?s===Of?ja++:(ja=0,Of=s):ja=0,ss(),null}function Qi(){if(cs!==null){var s=Ym(Tc),o=On.transition,c=it;try{if(On.transition=null,it=16>s?16:s,cs===null)var f=!1;else{if(s=cs,cs=null,Tc=0,(Ye&6)!==0)throw Error(n(331));var m=Ye;for(Ye|=4,ye=s.current;ye!==null;){var y=ye,k=y.child;if((ye.flags&16)!==0){var j=y.deletions;if(j!==null){for(var R=0;R<j.length;R++){var W=j[R];for(ye=W;ye!==null;){var Y=ye;switch(Y.tag){case 0:case 11:case 15:Ca(8,Y,y)}var re=Y.child;if(re!==null)re.return=Y,ye=re;else for(;ye!==null;){Y=ye;var Z=Y.sibling,he=Y.return;if(Qy(Y),Y===W){ye=null;break}if(Z!==null){Z.return=he,ye=Z;break}ye=he}}}var ve=y.alternate;if(ve!==null){var _e=ve.child;if(_e!==null){ve.child=null;do{var Tt=_e.sibling;_e.sibling=null,_e=Tt}while(_e!==null)}}ye=y}}if((y.subtreeFlags&2064)!==0&&k!==null)k.return=y,ye=k;else e:for(;ye!==null;){if(y=ye,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Ca(9,y,y.return)}var F=y.sibling;if(F!==null){F.return=y.return,ye=F;break e}ye=y.return}}var M=s.current;for(ye=M;ye!==null;){k=ye;var B=k.child;if((k.subtreeFlags&2064)!==0&&B!==null)B.return=k,ye=B;else e:for(k=M;ye!==null;){if(j=ye,(j.flags&2048)!==0)try{switch(j.tag){case 0:case 11:case 15:Sc(9,j)}}catch(Ce){Ct(j,j.return,Ce)}if(j===k){ye=null;break e}var ae=j.sibling;if(ae!==null){ae.return=j.return,ye=ae;break e}ye=j.return}}if(Ye=m,ss(),rr&&typeof rr.onPostCommitFiberRoot=="function")try{rr.onPostCommitFiberRoot(Ml,s)}catch{}f=!0}return f}finally{it=c,On.transition=o}}return!1}function dv(s,o,c){o=Hi(c,o),o=jy(s,o,1),s=os(s,o,1),o=sn(),s!==null&&(Xo(s,1,o),hn(s,o))}function Ct(s,o,c){if(s.tag===3)dv(s,s,c);else for(;o!==null;){if(o.tag===3){dv(o,s,c);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(ls===null||!ls.has(f))){s=Hi(c,s),s=Py(o,s,1),o=os(o,s,1),s=sn(),o!==null&&(Xo(o,1,s),hn(o,s));break}}o=o.return}}function RE(s,o,c){var f=s.pingCache;f!==null&&f.delete(o),o=sn(),s.pingedLanes|=s.suspendedLanes&c,Wt===s&&(Jt&c)===c&&(Ut===4||Ut===3&&(Jt&130023424)===Jt&&500>Nt()-Rf?ti(s,0):If|=c),hn(s,o)}function fv(s,o){o===0&&((s.mode&1)===0?o=1:(o=Ul,Ul<<=1,(Ul&130023424)===0&&(Ul=4194304)));var c=sn();s=Er(s,o),s!==null&&(Xo(s,o,c),hn(s,c))}function AE(s){var o=s.memoizedState,c=0;o!==null&&(c=o.retryLane),fv(s,c)}function OE(s,o){var c=0;switch(s.tag){case 13:var f=s.stateNode,m=s.memoizedState;m!==null&&(c=m.retryLane);break;case 19:f=s.stateNode;break;default:throw Error(n(314))}f!==null&&f.delete(o),fv(s,c)}var hv;hv=function(s,o,c){if(s!==null)if(s.memoizedProps!==o.pendingProps||cn.current)dn=!0;else{if((s.lanes&c)===0&&(o.flags&128)===0)return dn=!1,bE(s,o,c);dn=(s.flags&131072)!==0}else dn=!1,bt&&(o.flags&1048576)!==0&&qg(o,oc,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;bc(s,o),s=o.pendingProps;var m=Li(o,Yt.current);zi(o,c),m=cf(null,o,f,s,m,c);var y=uf();return o.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,un(f)?(y=!0,rc(o)):y=!1,o.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,tf(o),m.updater=wc,o.stateNode=m,m._reactInternals=o,gf(o,f,s,c),o=xf(null,o,f,!0,y,c)):(o.tag=0,bt&&y&&Hd(o),rn(null,o,m,c),o=o.child),o;case 16:f=o.elementType;e:{switch(bc(s,o),s=o.pendingProps,m=f._init,f=m(f._payload),o.type=f,m=o.tag=ME(f),s=zn(f,s),m){case 0:o=wf(null,o,f,s,c);break e;case 1:o=Fy(null,o,f,s,c);break e;case 11:o=Oy(null,o,f,s,c);break e;case 14:o=Dy(null,o,f,zn(f.type,s),c);break e}throw Error(n(306,f,""))}return o;case 0:return f=o.type,m=o.pendingProps,m=o.elementType===f?m:zn(f,m),wf(s,o,f,m,c);case 1:return f=o.type,m=o.pendingProps,m=o.elementType===f?m:zn(f,m),Fy(s,o,f,m,c);case 3:e:{if($y(o),s===null)throw Error(n(387));f=o.pendingProps,y=o.memoizedState,m=y.element,ty(s,o),fc(o,f,null,c);var k=o.memoizedState;if(f=k.element,y.isDehydrated)if(y={element:f,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){m=Hi(Error(n(423)),o),o=By(s,o,f,c,m);break e}else if(f!==m){m=Hi(Error(n(424)),o),o=By(s,o,f,c,m);break e}else for(xn=ts(o.stateNode.containerInfo.firstChild),wn=o,bt=!0,Vn=null,c=Xg(o,null,f,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if($i(),f===m){o=Nr(s,o,c);break e}rn(s,o,f,c)}o=o.child}return o;case 5:return sy(o),s===null&&Gd(o),f=o.type,m=o.pendingProps,y=s!==null?s.memoizedProps:null,k=m.children,Fd(f,m)?k=null:y!==null&&Fd(f,y)&&(o.flags|=32),Uy(s,o),rn(s,o,k,c),o.child;case 6:return s===null&&Gd(o),null;case 13:return Vy(s,o,c);case 4:return nf(o,o.stateNode.containerInfo),f=o.pendingProps,s===null?o.child=Bi(o,null,f,c):rn(s,o,f,c),o.child;case 11:return f=o.type,m=o.pendingProps,m=o.elementType===f?m:zn(f,m),Oy(s,o,f,m,c);case 7:return rn(s,o,o.pendingProps,c),o.child;case 8:return rn(s,o,o.pendingProps.children,c),o.child;case 12:return rn(s,o,o.pendingProps.children,c),o.child;case 10:e:{if(f=o.type._context,m=o.pendingProps,y=o.memoizedProps,k=m.value,ft(cc,f._currentValue),f._currentValue=k,y!==null)if(Bn(y.value,k)){if(y.children===m.children&&!cn.current){o=Nr(s,o,c);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var j=y.dependencies;if(j!==null){k=y.child;for(var R=j.firstContext;R!==null;){if(R.context===f){if(y.tag===1){R=Cr(-1,c&-c),R.tag=2;var W=y.updateQueue;if(W!==null){W=W.shared;var Y=W.pending;Y===null?R.next=R:(R.next=Y.next,Y.next=R),W.pending=R}}y.lanes|=c,R=y.alternate,R!==null&&(R.lanes|=c),Xd(y.return,c,o),j.lanes|=c;break}R=R.next}}else if(y.tag===10)k=y.type===o.type?null:y.child;else if(y.tag===18){if(k=y.return,k===null)throw Error(n(341));k.lanes|=c,j=k.alternate,j!==null&&(j.lanes|=c),Xd(k,c,o),k=y.sibling}else k=y.child;if(k!==null)k.return=y;else for(k=y;k!==null;){if(k===o){k=null;break}if(y=k.sibling,y!==null){y.return=k.return,k=y;break}k=k.return}y=k}rn(s,o,m.children,c),o=o.child}return o;case 9:return m=o.type,f=o.pendingProps.children,zi(o,c),m=Rn(m),f=f(m),o.flags|=1,rn(s,o,f,c),o.child;case 14:return f=o.type,m=zn(f,o.pendingProps),m=zn(f.type,m),Dy(s,o,f,m,c);case 15:return My(s,o,o.type,o.pendingProps,c);case 17:return f=o.type,m=o.pendingProps,m=o.elementType===f?m:zn(f,m),bc(s,o),o.tag=1,un(f)?(s=!0,rc(o)):s=!1,zi(o,c),Ny(o,f,m),gf(o,f,m,c),xf(null,o,f,!0,s,c);case 19:return Wy(s,o,c);case 22:return Ly(s,o,c)}throw Error(n(156,o.tag))};function pv(s,o){return Km(s,o)}function DE(s,o,c,f){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(s,o,c,f){return new DE(s,o,c,f)}function $f(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ME(s){if(typeof s=="function")return $f(s)?1:0;if(s!=null){if(s=s.$$typeof,s===q)return 11;if(s===fe)return 14}return 2}function fs(s,o){var c=s.alternate;return c===null?(c=Dn(s.tag,o,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=o,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&14680064,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,o=s.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c}function Rc(s,o,c,f,m,y){var k=2;if(f=s,typeof s=="function")$f(s)&&(k=1);else if(typeof s=="string")k=5;else e:switch(s){case L:return ri(c.children,m,y,o);case $:k=8,m|=8;break;case ee:return s=Dn(12,c,o,m|2),s.elementType=ee,s.lanes=y,s;case J:return s=Dn(13,c,o,m),s.elementType=J,s.lanes=y,s;case X:return s=Dn(19,c,o,m),s.elementType=X,s.lanes=y,s;case ce:return Ac(c,m,y,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case z:k=10;break e;case K:k=9;break e;case q:k=11;break e;case fe:k=14;break e;case Q:k=16,f=null;break e}throw Error(n(130,s==null?s:typeof s,""))}return o=Dn(k,c,o,m),o.elementType=s,o.type=f,o.lanes=y,o}function ri(s,o,c,f){return s=Dn(7,s,f,o),s.lanes=c,s}function Ac(s,o,c,f){return s=Dn(22,s,f,o),s.elementType=ce,s.lanes=c,s.stateNode={isHidden:!1},s}function Bf(s,o,c){return s=Dn(6,s,null,o),s.lanes=c,s}function Vf(s,o,c){return o=Dn(4,s.children!==null?s.children:[],s.key,o),o.lanes=c,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function LE(s,o,c,f,m){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pd(0),this.expirationTimes=pd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pd(0),this.identifierPrefix=f,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function zf(s,o,c,f,m,y,k,j,R){return s=new LE(s,o,c,j,R),o===1?(o=1,y===!0&&(o|=8)):o=0,y=Dn(3,null,null,o),s.current=y,y.stateNode=s,y.memoizedState={element:f,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},tf(y),s}function UE(s,o,c){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:f==null?null:""+f,children:s,containerInfo:o,implementation:c}}function mv(s){if(!s)return rs;s=s._reactInternals;e:{if(Hs(s)!==s||s.tag!==1)throw Error(n(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(un(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(n(171))}if(s.tag===1){var c=s.type;if(un(c))return zg(s,c,o)}return o}function gv(s,o,c,f,m,y,k,j,R){return s=zf(c,f,!0,s,m,y,k,j,R),s.context=mv(null),c=s.current,f=sn(),m=us(c),y=Cr(f,m),y.callback=o??null,os(c,y,m),s.current.lanes=m,Xo(s,m,f),hn(s,f),s}function Oc(s,o,c,f){var m=o.current,y=sn(),k=us(m);return c=mv(c),o.context===null?o.context=c:o.pendingContext=c,o=Cr(y,k),o.payload={element:s},f=f===void 0?null:f,f!==null&&(o.callback=f),s=os(m,o,k),s!==null&&(qn(s,m,k,y),dc(s,m,k)),k}function Dc(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function yv(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<o?c:o}}function Wf(s,o){yv(s,o),(s=s.alternate)&&yv(s,o)}function FE(){return null}var vv=typeof reportError=="function"?reportError:function(s){console.error(s)};function Hf(s){this._internalRoot=s}Mc.prototype.render=Hf.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(n(409));Oc(s,o,null,null)},Mc.prototype.unmount=Hf.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;ei(function(){Oc(null,s,null,null)}),o[br]=null}};function Mc(s){this._internalRoot=s}Mc.prototype.unstable_scheduleHydration=function(s){if(s){var o=tg();s={blockedOn:null,target:s,priority:o};for(var c=0;c<Yr.length&&o!==0&&o<Yr[c].priority;c++);Yr.splice(c,0,s),c===0&&sg(s)}};function qf(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Lc(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function wv(){}function $E(s,o,c,f,m){if(m){if(typeof f=="function"){var y=f;f=function(){var W=Dc(k);y.call(W)}}var k=gv(o,f,s,0,null,!1,!1,"",wv);return s._reactRootContainer=k,s[br]=k.current,ha(s.nodeType===8?s.parentNode:s),ei(),k}for(;m=s.lastChild;)s.removeChild(m);if(typeof f=="function"){var j=f;f=function(){var W=Dc(R);j.call(W)}}var R=zf(s,0,!1,null,null,!1,!1,"",wv);return s._reactRootContainer=R,s[br]=R.current,ha(s.nodeType===8?s.parentNode:s),ei(function(){Oc(o,R,c,f)}),R}function Uc(s,o,c,f,m){var y=c._reactRootContainer;if(y){var k=y;if(typeof m=="function"){var j=m;m=function(){var R=Dc(k);j.call(R)}}Oc(o,k,s,m)}else k=$E(c,o,s,m,f);return Dc(k)}Xm=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var c=Yo(o.pendingLanes);c!==0&&(md(o,c|1),hn(o,Nt()),(Ye&6)===0&&(Gi=Nt()+500,ss()))}break;case 13:ei(function(){var f=Er(s,1);if(f!==null){var m=sn();qn(f,s,1,m)}}),Wf(s,1)}},gd=function(s){if(s.tag===13){var o=Er(s,134217728);if(o!==null){var c=sn();qn(o,s,134217728,c)}Wf(s,134217728)}},eg=function(s){if(s.tag===13){var o=us(s),c=Er(s,o);if(c!==null){var f=sn();qn(c,s,o,f)}Wf(s,o)}},tg=function(){return it},ng=function(s,o){var c=it;try{return it=s,o()}finally{it=c}},Ni=function(s,o,c){switch(o){case"input":if(Gt(s,c),o=c.name,c.type==="radio"&&o!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<c.length;o++){var f=c[o];if(f!==s&&f.form===s.form){var m=tc(f);if(!m)throw Error(n(90));Qe(f),Gt(f,m)}}}break;case"textarea":oe(s,c);break;case"select":o=c.value,o!=null&&U(s,!!c.multiple,o,!1)}},$m=Lf,Bm=ei;var BE={usingClientEntryPoint:!1,Events:[ga,Di,tc,Il,Rl,Lf]},Pa={findFiberByHostInstance:qs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VE={bundleType:Pa.bundleType,version:Pa.version,rendererPackageName:Pa.rendererPackageName,rendererConfig:Pa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Hm(s),s===null?null:s.stateNode},findFiberByHostInstance:Pa.findFiberByHostInstance||FE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fc.isDisabled&&Fc.supportsFiber)try{Ml=Fc.inject(VE),rr=Fc}catch{}}return pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BE,pn.createPortal=function(s,o){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qf(o))throw Error(n(200));return UE(s,o,null,c)},pn.createRoot=function(s,o){if(!qf(s))throw Error(n(299));var c=!1,f="",m=vv;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(m=o.onRecoverableError)),o=zf(s,1,!1,null,null,c,!1,f,m),s[br]=o.current,ha(s.nodeType===8?s.parentNode:s),new Hf(o)},pn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=Hm(o),s=s===null?null:s.stateNode,s},pn.flushSync=function(s){return ei(s)},pn.hydrate=function(s,o,c){if(!Lc(o))throw Error(n(200));return Uc(null,s,o,!0,c)},pn.hydrateRoot=function(s,o,c){if(!qf(s))throw Error(n(405));var f=c!=null&&c.hydratedSources||null,m=!1,y="",k=vv;if(c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onRecoverableError!==void 0&&(k=c.onRecoverableError)),o=gv(o,null,s,1,c??null,m,!1,y,k),s[br]=o.current,ha(s),f)for(s=0;s<f.length;s++)c=f[s],m=c._getVersion,m=m(c._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[c,m]:o.mutableSourceEagerHydrationData.push(c,m);return new Mc(o)},pn.render=function(s,o,c){if(!Lc(o))throw Error(n(200));return Uc(null,s,o,!1,c)},pn.unmountComponentAtNode=function(s){if(!Lc(s))throw Error(n(40));return s._reactRootContainer?(ei(function(){Uc(null,null,s,!1,function(){s._reactRootContainer=null,s[br]=null})}),!0):!1},pn.unstable_batchedUpdates=Lf,pn.unstable_renderSubtreeIntoContainer=function(s,o,c,f){if(!Lc(c))throw Error(n(200));if(s==null||s._reactInternals===void 0)throw Error(n(38));return Uc(s,o,c,!1,f)},pn.version="18.3.1-next-f1338f8080-20240426",pn}var Nv;function Sb(){if(Nv)return Qf.exports;Nv=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Qf.exports=ZE(),Qf.exports}var Tv;function YE(){if(Tv)return $c;Tv=1;var t=Sb();return $c.createRoot=t.createRoot,$c.hydrateRoot=t.hydrateRoot,$c}var XE=YE(),Bo=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},eC={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},tC=class{#e=eC;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,e){return this.#e.setTimeout(t,e)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,e){return this.#e.setInterval(t,e)}clearInterval(t){this.#e.clearInterval(t)}},di=new tC;function nC(t){setTimeout(t,0)}var gi=typeof window>"u"||"Deno"in globalThis;function on(){}function rC(t,e){return typeof t=="function"?t(e):t}function Vh(t){return typeof t=="number"&&t>=0&&t!==1/0}function kb(t,e){return Math.max(t+(e||0)-Date.now(),0)}function js(t,e){return typeof t=="function"?t(e):t}function Mn(t,e){return typeof t=="function"?t(e):t}function jv(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:a,queryKey:l,stale:u}=t;if(l){if(r){if(e.queryHash!==Bp(l,e.options))return!1}else if(!sl(e.queryKey,l))return!1}if(n!=="all"){const h=e.isActive();if(n==="active"&&!h||n==="inactive"&&h)return!1}return!(typeof u=="boolean"&&e.isStale()!==u||i&&i!==e.state.fetchStatus||a&&!a(e))}function Pv(t,e){const{exact:n,status:r,predicate:i,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(yi(e.options.mutationKey)!==yi(a))return!1}else if(!sl(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function Bp(t,e){return(e?.queryKeyHashFn||yi)(t)}function yi(t){return JSON.stringify(t,(e,n)=>zh(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function sl(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>sl(t[n],e[n])):!1}var sC=Object.prototype.hasOwnProperty;function Eb(t,e){if(t===e)return t;const n=Iv(t)&&Iv(e);if(!n&&!(zh(t)&&zh(e)))return e;const i=(n?t:Object.keys(t)).length,a=n?e:Object.keys(e),l=a.length,u=n?new Array(l):{};let h=0;for(let p=0;p<l;p++){const g=n?p:a[p],v=t[g],w=e[g];if(v===w){u[g]=v,(n?p<i:sC.call(t,g))&&h++;continue}if(v===null||w===null||typeof v!="object"||typeof w!="object"){u[g]=w;continue}const S=Eb(v,w);u[g]=S,S===v&&h++}return i===l&&h===i?t:u}function pu(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function Iv(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function zh(t){if(!Rv(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Rv(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Rv(t){return Object.prototype.toString.call(t)==="[object Object]"}function iC(t){return new Promise(e=>{di.setTimeout(e,t)})}function Wh(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?Eb(t,e):e}function oC(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function aC(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Vp=Symbol();function Cb(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===Vp?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function Nb(t,e){return typeof t=="function"?t(...e):!!t}var lC=class extends Bo{#e;#t;#n;constructor(){super(),this.#n=t=>{if(!gi&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},zp=new lC;function Hh(){let t,e;const n=new Promise((i,a)=>{t=i,e=a});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}var cC=nC;function uC(){let t=[],e=0,n=u=>{u()},r=u=>{u()},i=cC;const a=u=>{e?t.push(u):i(()=>{n(u)})},l=()=>{const u=t;t=[],u.length&&i(()=>{r(()=>{u.forEach(h=>{n(h)})})})};return{batch:u=>{let h;e++;try{h=u()}finally{e--,e||l()}return h},batchCalls:u=>(...h)=>{a(()=>{u(...h)})},schedule:a,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{i=u}}}var $t=uC(),dC=class extends Bo{#e=!0;#t;#n;constructor(){super(),this.#n=t=>{if(!gi&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#n=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},mu=new dC;function fC(t){return Math.min(1e3*2**t,3e4)}function Tb(t){return(t??"online")==="online"?mu.isOnline():!0}var qh=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function jb(t){let e=!1,n=0,r;const i=Hh(),a=()=>i.status!=="pending",l=x=>{if(!a()){const _=new qh(x);w(_),t.onCancel?.(_)}},u=()=>{e=!0},h=()=>{e=!1},p=()=>zp.isFocused()&&(t.networkMode==="always"||mu.isOnline())&&t.canRun(),g=()=>Tb(t.networkMode)&&t.canRun(),v=x=>{a()||(r?.(),i.resolve(x))},w=x=>{a()||(r?.(),i.reject(x))},S=()=>new Promise(x=>{r=_=>{(a()||p())&&x(_)},t.onPause?.()}).then(()=>{r=void 0,a()||t.onContinue?.()}),E=()=>{if(a())return;let x;const _=n===0?t.initialPromise:void 0;try{x=_??t.fn()}catch(T){x=Promise.reject(T)}Promise.resolve(x).then(v).catch(T=>{if(a())return;const C=t.retry??(gi?0:3),N=t.retryDelay??fC,I=typeof N=="function"?N(n,T):N,D=C===!0||typeof C=="number"&&n<C||typeof C=="function"&&C(n,T);if(e||!D){w(T);return}n++,t.onFail?.(n,T),iC(I).then(()=>p()?void 0:S()).then(()=>{e?w(T):E()})})};return{promise:i,status:()=>i.status,cancel:l,continue:()=>(r?.(),i),cancelRetry:u,continueRetry:h,canStart:g,start:()=>(g()?E():S().then(E),i)}}var Pb=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Vh(this.gcTime)&&(this.#e=di.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(gi?1/0:300*1e3))}clearGcTimeout(){this.#e&&(di.clearTimeout(this.#e),this.#e=void 0)}},hC=class extends Pb{#e;#t;#n;#s;#r;#o;#a;constructor(t){super(),this.#a=!1,this.#o=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#s=t.client,this.#n=this.#s.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=Av(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(t){if(this.options={...this.#o,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=Av(this.options);e.data!==void 0&&(this.setData(e.data,{updatedAt:e.dataUpdatedAt,manual:!0}),this.#e=e)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(t,e){const n=Wh(this.state.data,t,this.options);return this.#i({data:n,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),n}setState(t,e){this.#i({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#r?.promise;return this.#r?.cancel(t),e?e.then(on).catch(on):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>Mn(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Vp||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>js(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!kb(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#r&&(this.#a?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}async fetch(t,e){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(t&&this.setOptions(t),!this.options.queryFn){const u=this.observers.find(h=>h.options.queryFn);u&&this.setOptions(u.options)}const n=new AbortController,r=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(this.#a=!0,n.signal)})},i=()=>{const u=Cb(this.options,e),p=(()=>{const g={client:this.#s,queryKey:this.queryKey,meta:this.meta};return r(g),g})();return this.#a=!1,this.options.persister?this.options.persister(u,p,this):u(p)},l=(()=>{const u={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:i};return r(u),u})();this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#i({type:"fetch",meta:l.fetchOptions?.meta}),this.#r=jb({initialPromise:e?.initialPromise,fn:l.fetchFn,onCancel:u=>{u instanceof qh&&u.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(u,h)=>{this.#i({type:"failed",failureCount:u,error:h})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0});try{const u=await this.#r.start();if(u===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(u),this.#n.config.onSuccess?.(u,this),this.#n.config.onSettled?.(u,this.state.error,this),u}catch(u){if(u instanceof qh){if(u.silent)return this.#r.promise;if(u.revert){if(this.state.data===void 0)throw u;return this.state.data}}throw this.#i({type:"error",error:u}),this.#n.config.onError?.(u,this),this.#n.config.onSettled?.(this.state.data,u,this),u}finally{this.scheduleGc()}}#i(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Ib(n.data,this.options),fetchMeta:t.meta??null};case"success":const r={...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?r:void 0,r;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),$t.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:t})})}};function Ib(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Tb(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Av(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var pC=class extends Bo{constructor(t,e){super(),this.options=e,this.#e=t,this.#i=null,this.#a=Hh(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#n=void 0;#s=void 0;#r;#o;#a;#i;#m;#f;#h;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Ov(this.#t,this.options)?this.#d():this.updateResult(),this.#w())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Kh(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Kh(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#x(),this.#b(),this.#t.removeObserver(this)}setOptions(t){const e=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Mn(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#_(),this.#t.setOptions(this.options),e._defaulted&&!pu(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&Dv(this.#t,n,this.options,e)&&this.#d(),this.updateResult(),r&&(this.#t!==n||Mn(this.options.enabled,this.#t)!==Mn(e.enabled,this.#t)||js(this.options.staleTime,this.#t)!==js(e.staleTime,this.#t))&&this.#g();const i=this.#y();r&&(this.#t!==n||Mn(this.options.enabled,this.#t)!==Mn(e.enabled,this.#t)||i!==this.#l)&&this.#v(i)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(e,t);return gC(this,n)&&(this.#s=n,this.#o=this.options,this.#r=this.#t.state),n}getCurrentResult(){return this.#s}trackResult(t,e){return new Proxy(t,{get:(n,r)=>(this.trackProp(r),e?.(r),r==="promise"&&!this.options.experimental_prefetchInRender&&this.#a.status==="pending"&&this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(n,r))})}trackProp(t){this.#p.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return this.#d({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#d(t){this.#_();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(on)),e}#g(){this.#x();const t=js(this.options.staleTime,this.#t);if(gi||this.#s.isStale||!Vh(t))return;const n=kb(this.#s.dataUpdatedAt,t)+1;this.#c=di.setTimeout(()=>{this.#s.isStale||this.updateResult()},n)}#y(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(t){this.#b(),this.#l=t,!(gi||Mn(this.options.enabled,this.#t)===!1||!Vh(this.#l)||this.#l===0)&&(this.#u=di.setInterval(()=>{(this.options.refetchIntervalInBackground||zp.isFocused())&&this.#d()},this.#l))}#w(){this.#g(),this.#v(this.#y())}#x(){this.#c&&(di.clearTimeout(this.#c),this.#c=void 0)}#b(){this.#u&&(di.clearInterval(this.#u),this.#u=void 0)}createResult(t,e){const n=this.#t,r=this.options,i=this.#s,a=this.#r,l=this.#o,h=t!==n?t.state:this.#n,{state:p}=t;let g={...p},v=!1,w;if(e._optimisticResults){const $=this.hasListeners(),ee=!$&&Ov(t,e),z=$&&Dv(t,n,e,r);(ee||z)&&(g={...g,...Ib(p.data,t.options)}),e._optimisticResults==="isRestoring"&&(g.fetchStatus="idle")}let{error:S,errorUpdatedAt:E,status:x}=g;w=g.data;let _=!1;if(e.placeholderData!==void 0&&w===void 0&&x==="pending"){let $;i?.isPlaceholderData&&e.placeholderData===l?.placeholderData?($=i.data,_=!0):$=typeof e.placeholderData=="function"?e.placeholderData(this.#h?.state.data,this.#h):e.placeholderData,$!==void 0&&(x="success",w=Wh(i?.data,$,e),v=!0)}if(e.select&&w!==void 0&&!_)if(i&&w===a?.data&&e.select===this.#m)w=this.#f;else try{this.#m=e.select,w=e.select(w),w=Wh(i?.data,w,e),this.#f=w,this.#i=null}catch($){this.#i=$}this.#i&&(S=this.#i,w=this.#f,E=Date.now(),x="error");const T=g.fetchStatus==="fetching",C=x==="pending",N=x==="error",I=C&&T,D=w!==void 0,L={status:x,fetchStatus:g.fetchStatus,isPending:C,isSuccess:x==="success",isError:N,isInitialLoading:I,isLoading:I,data:w,dataUpdatedAt:g.dataUpdatedAt,error:S,errorUpdatedAt:E,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>h.dataUpdateCount||g.errorUpdateCount>h.errorUpdateCount,isFetching:T,isRefetching:T&&!C,isLoadingError:N&&!D,isPaused:g.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:N&&D,isStale:Wp(t,e),refetch:this.refetch,promise:this.#a,isEnabled:Mn(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const $=K=>{L.status==="error"?K.reject(L.error):L.data!==void 0&&K.resolve(L.data)},ee=()=>{const K=this.#a=L.promise=Hh();$(K)},z=this.#a;switch(z.status){case"pending":t.queryHash===n.queryHash&&$(z);break;case"fulfilled":(L.status==="error"||L.data!==z.value)&&ee();break;case"rejected":(L.status!=="error"||L.error!==z.reason)&&ee();break}}return L}updateResult(){const t=this.#s,e=this.createResult(this.#t,this.options);if(this.#r=this.#t.state,this.#o=this.options,this.#r.data!==void 0&&(this.#h=this.#t),pu(e,t))return;this.#s=e;const n=()=>{if(!t)return!0;const{notifyOnChangeProps:r}=this.options,i=typeof r=="function"?r():r;if(i==="all"||!i&&!this.#p.size)return!0;const a=new Set(i??this.#p);return this.options.throwOnError&&a.add("error"),Object.keys(this.#s).some(l=>{const u=l;return this.#s[u]!==t[u]&&a.has(u)})};this.#S({listeners:n()})}#_(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#n=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#w()}#S(t){$t.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#s)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function mC(t,e){return Mn(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Ov(t,e){return mC(t,e)||t.state.data!==void 0&&Kh(t,e,e.refetchOnMount)}function Kh(t,e,n){if(Mn(e.enabled,t)!==!1&&js(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Wp(t,e)}return!1}function Dv(t,e,n,r){return(t!==e||Mn(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Wp(t,n)}function Wp(t,e){return Mn(e.enabled,t)!==!1&&t.isStaleByTime(js(e.staleTime,t))}function gC(t,e){return!pu(t.getCurrentResult(),e)}function Mv(t){return{onFetch:(e,n)=>{const r=e.options,i=e.fetchOptions?.meta?.fetchMore?.direction,a=e.state.data?.pages||[],l=e.state.data?.pageParams||[];let u={pages:[],pageParams:[]},h=0;const p=async()=>{let g=!1;const v=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},w=Cb(e.options,e.fetchOptions),S=async(E,x,_)=>{if(g)return Promise.reject();if(x==null&&E.pages.length)return Promise.resolve(E);const C=(()=>{const A={client:e.client,queryKey:e.queryKey,pageParam:x,direction:_?"backward":"forward",meta:e.options.meta};return v(A),A})(),N=await w(C),{maxPages:I}=e.options,D=_?aC:oC;return{pages:D(E.pages,N,I),pageParams:D(E.pageParams,x,I)}};if(i&&a.length){const E=i==="backward",x=E?yC:Lv,_={pages:a,pageParams:l},T=x(r,_);u=await S(_,T,E)}else{const E=t??a.length;do{const x=h===0?l[0]??r.initialPageParam:Lv(r,u);if(h>0&&x==null)break;u=await S(u,x),h++}while(h<E)}return u};e.options.persister?e.fetchFn=()=>e.options.persister?.(p,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n):e.fetchFn=p}}}function Lv(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function yC(t,{pages:e,pageParams:n}){return e.length>0?t.getPreviousPageParam?.(e[0],e,n[0],n):void 0}var vC=class extends Pb{#e;#t;#n;#s;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#n=t.mutationCache,this.#t=[],this.state=t.state||Rb(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(e=>e!==t),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#r({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=jb({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(a,l)=>{this.#r({type:"failed",failureCount:a,error:l})},onPause:()=>{this.#r({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const r=this.state.status==="pending",i=!this.#s.canStart();try{if(r)e();else{this.#r({type:"pending",variables:t,isPaused:i}),await this.#n.config.onMutate?.(t,this,n);const l=await this.options.onMutate?.(t,n);l!==this.state.context&&this.#r({type:"pending",context:l,variables:t,isPaused:i})}const a=await this.#s.start();return await this.#n.config.onSuccess?.(a,t,this.state.context,this,n),await this.options.onSuccess?.(a,t,this.state.context,n),await this.#n.config.onSettled?.(a,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(a,null,t,this.state.context,n),this.#r({type:"success",data:a}),a}catch(a){try{throw await this.#n.config.onError?.(a,t,this.state.context,this,n),await this.options.onError?.(a,t,this.state.context,n),await this.#n.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(void 0,a,t,this.state.context,n),a}finally{this.#r({type:"error",error:a})}}finally{this.#n.runNext(this)}}#r(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),$t.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(t)}),this.#n.notify({mutation:this,type:"updated",action:t})})}};function Rb(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var wC=class extends Bo{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(t,e,n){const r=new vC({client:t,mutationCache:this,mutationId:++this.#n,options:t.defaultMutationOptions(e),state:n});return this.add(r),r}add(t){this.#e.add(t);const e=Bc(t);if(typeof e=="string"){const n=this.#t.get(e);n?n.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=Bc(t);if(typeof e=="string"){const n=this.#t.get(e);if(n)if(n.length>1){const r=n.indexOf(t);r!==-1&&n.splice(r,1)}else n[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=Bc(t);if(typeof e=="string"){const r=this.#t.get(e)?.find(i=>i.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=Bc(t);return typeof e=="string"?this.#t.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){$t.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Pv(e,n))}findAll(t={}){return this.getAll().filter(e=>Pv(t,e))}notify(t){$t.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return $t.batch(()=>Promise.all(t.map(e=>e.continue().catch(on))))}};function Bc(t){return t.options.scope?.id}var xC=class extends Bo{#e;#t=void 0;#n;#s;constructor(e,n){super(),this.#e=e,this.setOptions(n),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const n=this.options;this.options=this.#e.defaultMutationOptions(e),pu(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&yi(n.mutationKey)!==yi(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#r(),this.#o(e)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#r(),this.#o()}mutate(e,n){return this.#s=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(e)}#r(){const e=this.#n?.state??Rb();this.#t={...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset}}#o(e){$t.batch(()=>{if(this.#s&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context,i={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#s.onSuccess?.(e.data,n,r,i),this.#s.onSettled?.(e.data,null,n,r,i)):e?.type==="error"&&(this.#s.onError?.(e.error,n,r,i),this.#s.onSettled?.(void 0,e.error,n,r,i))}this.listeners.forEach(n=>{n(this.#t)})})}},bC=class extends Bo{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,n){const r=e.queryKey,i=e.queryHash??Bp(r,e);let a=this.get(i);return a||(a=new hC({client:t,queryKey:r,queryHash:i,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(r)}),this.add(a)),a}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){$t.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>jv(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>jv(t,n)):e}notify(t){$t.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){$t.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){$t.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ab=class{#e;#t;#n;#s;#r;#o;#a;#i;constructor(t={}){this.#e=t.queryCache||new bC,this.#t=t.mutationCache||new wC,this.#n=t.defaultOptions||{},this.#s=new Map,this.#r=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#a=zp.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=mu.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#a?.(),this.#a=void 0,this.#i?.(),this.#i=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=this.#e.build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(js(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),a=this.#e.get(r.queryHash)?.state.data,l=rC(e,a);if(l!==void 0)return this.#e.build(this,r).setData(l,{...n,manual:!0})}setQueriesData(t,e,n){return $t.batch(()=>this.#e.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;$t.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=this.#e;return $t.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=$t.batch(()=>this.#e.findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(on).catch(on)}invalidateQueries(t,e={}){return $t.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=$t.batch(()=>this.#e.findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,n);return n.throwOnError||(a=a.catch(on)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(on)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=this.#e.build(this,e);return n.isStaleByTime(js(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(on).catch(on)}fetchInfiniteQuery(t){return t.behavior=Mv(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(on).catch(on)}ensureInfiniteQueryData(t){return t.behavior=Mv(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return mu.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,e){this.#s.set(yi(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#s.values()],n={};return e.forEach(r=>{sl(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){this.#r.set(yi(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#r.values()],n={};return e.forEach(r=>{sl(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Bp(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Vp&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Ob=b.createContext(void 0),yr=t=>{const e=b.useContext(Ob);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},_C=({client:t,children:e})=>(b.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),d.jsx(Ob.Provider,{value:t,children:e})),Db=b.createContext(!1),SC=()=>b.useContext(Db);Db.Provider;function kC(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var EC=b.createContext(kC()),CC=()=>b.useContext(EC),NC=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},TC=t=>{b.useEffect(()=>{t.clearReset()},[t])},jC=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:i})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(i&&t.data===void 0||Nb(n,[t.error,r])),PC=t=>{if(t.suspense){const n=i=>i==="static"?i:Math.max(i??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...i)=>n(r(...i)):n(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},IC=(t,e)=>t.isLoading&&t.isFetching&&!e,RC=(t,e)=>t?.suspense&&e.isPending,Uv=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function AC(t,e,n){const r=SC(),i=CC(),a=yr(),l=a.defaultQueryOptions(t);a.getDefaultOptions().queries?._experimental_beforeQuery?.(l),l._optimisticResults=r?"isRestoring":"optimistic",PC(l),NC(l,i),TC(i);const u=!a.getQueryCache().get(l.queryHash),[h]=b.useState(()=>new e(a,l)),p=h.getOptimisticResult(l),g=!r&&t.subscribed!==!1;if(b.useSyncExternalStore(b.useCallback(v=>{const w=g?h.subscribe($t.batchCalls(v)):on;return h.updateResult(),w},[h,g]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),b.useEffect(()=>{h.setOptions(l)},[l,h]),RC(l,p))throw Uv(l,h,i);if(jC({result:p,errorResetBoundary:i,throwOnError:l.throwOnError,query:a.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw p.error;return a.getDefaultOptions().queries?._experimental_afterQuery?.(l,p),l.experimental_prefetchInRender&&!gi&&IC(p,r)&&(u?Uv(l,h,i):a.getQueryCache().get(l.queryHash)?.promise)?.catch(on).finally(()=>{h.updateResult()}),l.notifyOnChangeProps?p:h.trackResult(p)}function En(t,e){return AC(t,pC)}function gu(t,e){const n=yr(),[r]=b.useState(()=>new xC(n,t));b.useEffect(()=>{r.setOptions(t)},[r,t]);const i=b.useSyncExternalStore(b.useCallback(l=>r.subscribe($t.batchCalls(l)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=b.useCallback((l,u)=>{r.mutate(l,u).catch(on)},[r]);if(i.error&&Nb(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}const OC="modulepreload",DC=function(t){return"/"+t},Fv={},Si=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let h=function(p){return Promise.all(p.map(g=>Promise.resolve(g).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),u=l?.nonce||l?.getAttribute("nonce");i=h(n.map(p=>{if(p=DC(p),p in Fv)return;Fv[p]=!0;const g=p.endsWith(".css"),v=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${v}`))return;const w=document.createElement("link");if(w.rel=g?"stylesheet":OC,g||(w.as="script"),w.crossOrigin="",w.href=p,u&&w.setAttribute("nonce",u),document.head.appendChild(w),g)return new Promise((S,E)=>{w.addEventListener("load",S),w.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return i.then(l=>{for(const u of l||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})};var MC=function(){return null};const LC=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Si(async()=>{const{default:r}=await Promise.resolve().then(()=>Vo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Hp extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class $v extends Hp{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Bv extends Hp{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Vv extends Hp{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Gh;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Gh||(Gh={}));var UC=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function u(g){try{p(r.next(g))}catch(v){l(v)}}function h(g){try{p(r.throw(g))}catch(v){l(v)}}function p(g){g.done?a(g.value):i(g.value).then(u,h)}p((r=r.apply(t,e||[])).next())})};class FC{constructor(e,{headers:n={},customFetch:r,region:i=Gh.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=LC(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return UC(this,arguments,void 0,function*(n,r={}){var i;try{const{headers:a,method:l,body:u,signal:h}=r;let p={},{region:g}=r;g||(g=this.region);const v=new URL(`${this.url}/${n}`);g&&g!=="any"&&(p["x-region"]=g,v.searchParams.set("forceFunctionRegion",g));let w;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",w=u):typeof u=="string"?(p["Content-Type"]="text/plain",w=u):typeof FormData<"u"&&u instanceof FormData?w=u:(p["Content-Type"]="application/json",w=JSON.stringify(u)));const S=yield this.fetch(v.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),a),body:w,signal:h}).catch(T=>{throw T.name==="AbortError"?T:new $v(T)}),E=S.headers.get("x-relay-error");if(E&&E==="true")throw new Bv(S);if(!S.ok)throw new Vv(S);let x=((i=S.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),_;return x==="application/json"?_=yield S.json():x==="application/octet-stream"?_=yield S.blob():x==="text/event-stream"?_=S:x==="multipart/form-data"?_=yield S.formData():_=yield S.text(),{data:_,error:null,response:S}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new $v(a)}:{data:null,error:a,response:a instanceof Vv||a instanceof Bv?a.context:void 0}}})}}var qt={},Ji={},Zi={},Yi={},Xi={},eo={},$C=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ro=$C();const BC=Ro.fetch,Mb=Ro.fetch.bind(Ro),Lb=Ro.Headers,VC=Ro.Request,zC=Ro.Response,Vo=Object.freeze(Object.defineProperty({__proto__:null,Headers:Lb,Request:VC,Response:zC,default:Mb,fetch:BC},Symbol.toStringTag,{value:"Module"})),WC=HE(Vo);var Vc={},zv;function Ub(){if(zv)return Vc;zv=1,Object.defineProperty(Vc,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Vc.default=t,Vc}var Wv;function Fb(){if(Wv)return eo;Wv=1;var t=eo&&eo.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(eo,"__esModule",{value:!0});const e=t(WC),n=t(Ub());class r{constructor(a){var l,u;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(l=a.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=a.signal,this.isMaybeSingle=(u=a.isMaybeSingle)!==null&&u!==void 0?u:!1,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=new Headers(this.headers),this.headers.set(a,l),this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let h=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var g,v,w,S;let E=null,x=null,_=null,T=p.status,C=p.statusText;if(p.ok){if(this.method!=="HEAD"){const A=await p.text();A===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((g=this.headers.get("Accept"))===null||g===void 0)&&g.includes("application/vnd.pgrst.plan+text"))?x=A:x=JSON.parse(A))}const I=(v=this.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),D=(w=p.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");I&&D&&D.length>1&&(_=parseInt(D[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(x)&&(x.length>1?(E={code:"PGRST116",details:`Results contain ${x.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},x=null,_=null,T=406,C="Not Acceptable"):x.length===1?x=x[0]:x=null)}else{const I=await p.text();try{E=JSON.parse(I),Array.isArray(E)&&p.status===404&&(x=[],E=null,T=200,C="OK")}catch{p.status===404&&I===""?(T=204,C="No Content"):E={message:I}}if(E&&this.isMaybeSingle&&(!((S=E?.details)===null||S===void 0)&&S.includes("0 rows"))&&(E=null,T=200,C="OK"),E&&this.shouldThrowOnError)throw new n.default(E)}return{error:E,data:x,count:_,status:T,statusText:C}});return this.shouldThrowOnError||(h=h.catch(p=>{var g,v,w;return{error:{message:`${(g=p?.name)!==null&&g!==void 0?g:"FetchError"}: ${p?.message}`,details:`${(v=p?.stack)!==null&&v!==void 0?v:""}`,hint:"",code:`${(w=p?.code)!==null&&w!==void 0?w:""}`},data:null,count:null,status:0,statusText:""}})),h.then(a,l)}returns(){return this}overrideTypes(){return this}}return eo.default=r,eo}var Hv;function $b(){if(Hv)return Xi;Hv=1;var t=Xi&&Xi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Xi,"__esModule",{value:!0});const e=t(Fb());class n extends e.default{select(i){let a=!1;const l=(i??"*").split("").map(u=>/\s/.test(u)&&!a?"":(u==='"'&&(a=!a),u)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:a=!0,nullsFirst:l,foreignTable:u,referencedTable:h=u}={}){const p=h?`${h}.order`:"order",g=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${g?`${g},`:""}${i}.${a?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:l=a}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${i}`),this}range(i,a,{foreignTable:l,referencedTable:u=l}={}){const h=typeof u>"u"?"offset":`${u}.offset`,p=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(h,`${i}`),this.url.searchParams.set(p,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:a=!1,settings:l=!1,buffers:u=!1,wal:h=!1,format:p="text"}={}){var g;const v=[i?"analyze":null,a?"verbose":null,l?"settings":null,u?"buffers":null,h?"wal":null].filter(Boolean).join("|"),w=(g=this.headers.get("Accept"))!==null&&g!==void 0?g:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${w}"; options=${v};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Xi.default=n,Xi}var qv;function qp(){if(qv)return Yi;qv=1;var t=Yi&&Yi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Yi,"__esModule",{value:!0});const e=t($b());class n extends e.default{eq(i,a){return this.url.searchParams.append(i,`eq.${a}`),this}neq(i,a){return this.url.searchParams.append(i,`neq.${a}`),this}gt(i,a){return this.url.searchParams.append(i,`gt.${a}`),this}gte(i,a){return this.url.searchParams.append(i,`gte.${a}`),this}lt(i,a){return this.url.searchParams.append(i,`lt.${a}`),this}lte(i,a){return this.url.searchParams.append(i,`lte.${a}`),this}like(i,a){return this.url.searchParams.append(i,`like.${a}`),this}likeAllOf(i,a){return this.url.searchParams.append(i,`like(all).{${a.join(",")}}`),this}likeAnyOf(i,a){return this.url.searchParams.append(i,`like(any).{${a.join(",")}}`),this}ilike(i,a){return this.url.searchParams.append(i,`ilike.${a}`),this}ilikeAllOf(i,a){return this.url.searchParams.append(i,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(i,a){return this.url.searchParams.append(i,`ilike(any).{${a.join(",")}}`),this}is(i,a){return this.url.searchParams.append(i,`is.${a}`),this}in(i,a){const l=Array.from(new Set(a)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cs.{${a.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(a)}`),this}containedBy(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cd.{${a.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(a)}`),this}rangeGt(i,a){return this.url.searchParams.append(i,`sr.${a}`),this}rangeGte(i,a){return this.url.searchParams.append(i,`nxl.${a}`),this}rangeLt(i,a){return this.url.searchParams.append(i,`sl.${a}`),this}rangeLte(i,a){return this.url.searchParams.append(i,`nxr.${a}`),this}rangeAdjacent(i,a){return this.url.searchParams.append(i,`adj.${a}`),this}overlaps(i,a){return typeof a=="string"?this.url.searchParams.append(i,`ov.${a}`):this.url.searchParams.append(i,`ov.{${a.join(",")}}`),this}textSearch(i,a,{config:l,type:u}={}){let h="";u==="plain"?h="pl":u==="phrase"?h="ph":u==="websearch"&&(h="w");const p=l===void 0?"":`(${l})`;return this.url.searchParams.append(i,`${h}fts${p}.${a}`),this}match(i){return Object.entries(i).forEach(([a,l])=>{this.url.searchParams.append(a,`eq.${l}`)}),this}not(i,a,l){return this.url.searchParams.append(i,`not.${a}.${l}`),this}or(i,{foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${i})`),this}filter(i,a,l){return this.url.searchParams.append(i,`${a}.${l}`),this}}return Yi.default=n,Yi}var Kv;function Bb(){if(Kv)return Zi;Kv=1;var t=Zi&&Zi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Zi,"__esModule",{value:!0});const e=t(qp());class n{constructor(i,{headers:a={},schema:l,fetch:u}){this.url=i,this.headers=new Headers(a),this.schema=l,this.fetch=u}select(i,a){const{head:l=!1,count:u}=a??{},h=l?"HEAD":"GET";let p=!1;const g=(i??"*").split("").map(v=>/\s/.test(v)&&!p?"":(v==='"'&&(p=!p),v)).join("");return this.url.searchParams.set("select",g),u&&this.headers.append("Prefer",`count=${u}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:a,defaultToNull:l=!0}={}){var u;const h="POST";if(a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const p=i.reduce((g,v)=>g.concat(Object.keys(v)),[]);if(p.length>0){const g=[...new Set(p)].map(v=>`"${v}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(i,{onConflict:a,ignoreDuplicates:l=!1,count:u,defaultToNull:h=!0}={}){var p;const g="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),u&&this.headers.append("Prefer",`count=${u}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const v=i.reduce((w,S)=>w.concat(Object.keys(S)),[]);if(v.length>0){const w=[...new Set(v)].map(S=>`"${S}"`);this.url.searchParams.set("columns",w.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(i,{count:a}={}){var l;const u="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:i}={}){var a;const l="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return Zi.default=n,Zi}var Gv;function HC(){if(Gv)return Ji;Gv=1;var t=Ji&&Ji.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ji,"__esModule",{value:!0});const e=t(Bb()),n=t(qp());class r{constructor(a,{headers:l={},schema:u,fetch:h}={}){this.url=a,this.headers=new Headers(l),this.schemaName=u,this.fetch=h}from(a){const l=new URL(`${this.url}/${a}`);return new e.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new r(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,l={},{head:u=!1,get:h=!1,count:p}={}){var g;let v;const w=new URL(`${this.url}/rpc/${a}`);let S;u||h?(v=u?"HEAD":"GET",Object.entries(l).filter(([x,_])=>_!==void 0).map(([x,_])=>[x,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([x,_])=>{w.searchParams.append(x,_)})):(v="POST",S=l);const E=new Headers(this.headers);return p&&E.set("Prefer",`count=${p}`),new n.default({method:v,url:w,headers:E,schema:this.schemaName,body:S,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}}return Ji.default=r,Ji}var Qv;function qC(){if(Qv)return qt;Qv=1;var t=qt&&qt.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(qt,"__esModule",{value:!0}),qt.PostgrestError=qt.PostgrestBuilder=qt.PostgrestTransformBuilder=qt.PostgrestFilterBuilder=qt.PostgrestQueryBuilder=qt.PostgrestClient=void 0;const e=t(HC());qt.PostgrestClient=e.default;const n=t(Bb());qt.PostgrestQueryBuilder=n.default;const r=t(qp());qt.PostgrestFilterBuilder=r.default;const i=t($b());qt.PostgrestTransformBuilder=i.default;const a=t(Fb());qt.PostgrestBuilder=a.default;const l=t(Ub());return qt.PostgrestError=l.default,qt.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:a.default,PostgrestError:l.default},qt}var KC=qC();const GC=Fp(KC),{PostgrestClient:QC,PostgrestQueryBuilder:i$,PostgrestFilterBuilder:o$,PostgrestTransformBuilder:a$,PostgrestBuilder:l$,PostgrestError:c$}=GC;class JC{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const ZC="2.75.0",YC=`realtime-js/${ZC}`,XC="1.0.0",Qh=1e4,eN=1e3,tN=100;var Ka;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ka||(Ka={}));var Ft;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ft||(Ft={}));var Qn;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Qn||(Qn={}));var Jh;(function(t){t.websocket="websocket"})(Jh||(Jh={}));var ci;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ci||(ci={}));class nN{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const i=n.getUint8(1),a=n.getUint8(2);let l=this.HEADER_LENGTH+2;const u=r.decode(e.slice(l,l+i));l=l+i;const h=r.decode(e.slice(l,l+a));l=l+a;const p=JSON.parse(r.decode(e.slice(l,e.byteLength)));return{ref:null,topic:u,event:h,payload:p}}}class Vb{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ht;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ht||(ht={}));const Jv=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((a,l)=>(a[l]=rN(l,t,e,i),a),{}):{}},rN=(t,e,n,r)=>{const i=e.find(u=>u.name===t),a=i?.type,l=n[t];return a&&!r.includes(a)?zb(a,l):Zh(l)},zb=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return aN(e,n)}switch(t){case ht.bool:return sN(e);case ht.float4:case ht.float8:case ht.int2:case ht.int4:case ht.int8:case ht.numeric:case ht.oid:return iN(e);case ht.json:case ht.jsonb:return oN(e);case ht.timestamp:return lN(e);case ht.abstime:case ht.date:case ht.daterange:case ht.int4range:case ht.int8range:case ht.money:case ht.reltime:case ht.text:case ht.time:case ht.timestamptz:case ht.timetz:case ht.tsrange:case ht.tstzrange:return Zh(e);default:return Zh(e)}},Zh=t=>t,sN=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},iN=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},oN=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},aN=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let a;const l=t.slice(1,n);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(u=>zb(e,u))}return t},lN=t=>typeof t=="string"?t.replace(" ","T"):t,Wb=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Yf{constructor(e,n,r={},i=Qh){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Zv;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Zv||(Zv={}));class Ga{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ga.syncState(this.state,i,a,l),this.pendingDiffs.forEach(h=>{this.state=Ga.syncDiff(this.state,h,a,l)}),this.pendingDiffs=[],u()}),this.channel._on(r.diff,{},i=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Ga.syncDiff(this.state,i,a,l),u())}),this.onJoin((i,a,l)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:l})}),this.onLeave((i,a,l)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const a=this.cloneDeep(e),l=this.transformState(n),u={},h={};return this.map(a,(p,g)=>{l[p]||(h[p]=g)}),this.map(l,(p,g)=>{const v=a[p];if(v){const w=g.map(_=>_.presence_ref),S=v.map(_=>_.presence_ref),E=g.filter(_=>S.indexOf(_.presence_ref)<0),x=v.filter(_=>w.indexOf(_.presence_ref)<0);E.length>0&&(u[p]=E),x.length>0&&(h[p]=x)}else u[p]=g}),this.syncDiff(a,{joins:u,leaves:h},r,i)}static syncDiff(e,n,r,i){const{joins:a,leaves:l}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(a,(u,h)=>{var p;const g=(p=e[u])!==null&&p!==void 0?p:[];if(e[u]=this.cloneDeep(h),g.length>0){const v=e[u].map(S=>S.presence_ref),w=g.filter(S=>v.indexOf(S.presence_ref)<0);e[u].unshift(...w)}r(u,g,h)}),this.map(l,(u,h)=>{let p=e[u];if(!p)return;const g=h.map(v=>v.presence_ref);p=p.filter(v=>g.indexOf(v.presence_ref)<0),e[u]=p,i(u,p,h),p.length===0&&delete e[u]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Yv;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Yv||(Yv={}));var Qa;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Qa||(Qa={}));var Or;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Or||(Or={}));class Kp{constructor(e,n={config:{}},r){var i,a;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Ft.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Yf(this,Qn.join,this.params,this.timeout),this.rejoinTimer=new Vb(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ft.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ft.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Ft.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Qn.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new Ga(this),this.broadcastEndpointURL=Wb(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Ft.closed){const{config:{broadcast:l,presence:u,private:h}}=this.params,p=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(S=>S.filter))!==null&&i!==void 0?i:[],g=!!this.bindings[Qa.PRESENCE]&&this.bindings[Qa.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,v={},w={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:g}),postgres_changes:p,private:h};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(S=>e?.(Or.CHANNEL_ERROR,S)),this._onClose(()=>e?.(Or.CLOSED)),this.updateJoinPayload(Object.assign({config:w},v)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:S})=>{var E;if(this.socket.setAuth(),S===void 0){e?.(Or.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,_=(E=x?.length)!==null&&E!==void 0?E:0,T=[];for(let C=0;C<_;C++){const N=x[C],{filter:{event:I,schema:D,table:A,filter:L}}=N,$=S&&S[C];if($&&$.event===I&&$.schema===D&&$.table===A&&$.filter===L)T.push(Object.assign(Object.assign({},N),{id:$.id}));else{this.unsubscribe(),this.state=Ft.errored,e?.(Or.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,e&&e(Or.SUBSCRIBED);return}}).receive("error",S=>{this.state=Ft.errored,e?.(Or.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(S).join(", ")||"error")))}).receive("timeout",()=>{e?.(Or.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Ft.joined&&e===Qa.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:l}=e,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=p.body)===null||i===void 0?void 0:i.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,u,h;const p=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||h===void 0)&&h.ack)&&a("ok"),p.receive("ok",()=>a("ok")),p.receive("error",()=>a("error")),p.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ft.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Qn.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Yf(this,Qn.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ft.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,a=setTimeout(()=>i.abort(),r),l=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(a),l}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Yf(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>tN){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,a;const l=e.toLocaleLowerCase(),{close:u,error:h,leave:p,join:g}=Qn;if(r&&[u,h,p,g].indexOf(l)>=0&&r!==this._joinRef())return;let w=this._onMessage(l,n,r);if(n&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(S=>{var E,x,_;return((E=S.filter)===null||E===void 0?void 0:E.event)==="*"||((_=(x=S.filter)===null||x===void 0?void 0:x.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===l}).map(S=>S.callback(w,r)):(a=this.bindings[l])===null||a===void 0||a.filter(S=>{var E,x,_,T,C,N;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in S){const I=S.id,D=(E=S.filter)===null||E===void 0?void 0:E.event;return I&&((x=n.ids)===null||x===void 0?void 0:x.includes(I))&&(D==="*"||D?.toLocaleLowerCase()===((_=n.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const I=(C=(T=S?.filter)===null||T===void 0?void 0:T.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return I==="*"||I===((N=n?.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return S.type.toLocaleLowerCase()===l}).map(S=>{if(typeof w=="object"&&"ids"in w){const E=w.data,{schema:x,table:_,commit_timestamp:T,type:C,errors:N}=E;w=Object.assign(Object.assign({},{schema:x,table:_,commit_timestamp:T,eventType:C,new:{},old:{},errors:N}),this._getPayloadRecords(E))}S.callback(w,r)})}_isClosed(){return this.state===Ft.closed}_isJoined(){return this.state===Ft.joined}_isJoining(){return this.state===Ft.joining}_isLeaving(){return this.state===Ft.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),a={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&Kp.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Qn.close,{},e)}_onError(e){this._on(Qn.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ft.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Jv(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Jv(e.columns,e.old_record)),n}}const Xf=()=>{},zc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},cN=[1e3,2e3,5e3,1e4],uN=1e4,dN=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class fN{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Qh,this.transport=null,this.heartbeatIntervalMs=zc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Xf,this.ref=0,this.reconnectTimer=null,this.logger=Xf,this.conn=null,this.sendBuffer=[],this.serializer=new nN,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...l)=>Si(async()=>{const{default:u}=await Promise.resolve().then(()=>Vo);return{default:u}},void 0).then(({default:u})=>u(...l)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...l)=>a(...l)},!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Jh.websocket}`,this.httpEndpoint=Wb(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=JC.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:XC}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ka.connecting:return ci.Connecting;case Ka.open:return ci.Open;case Ka.closing:return ci.Closing;default:return ci.Closed}}isConnected(){return this.connectionState()===ci.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(a=>a.topic===r);if(i)return i;{const a=new Kp(`realtime:${e}`,n,this);return this.channels.push(a),a}}push(e){const{topic:n,event:r,payload:i,ref:a}=e,l=()=>{this.encode(e,u=>{var h;(h=this.conn)===null||h===void 0||h.send(u)})};this.log("push",`${n} ${r} (${a})`,i),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(eN,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},zc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:a,ref:l}=n,u=l?`(${l})`:"",h=a.status||"";this.log("receive",`${h} ${r} ${i} ${u}`.trim(),a),this.channels.filter(p=>p._isMember(r)).forEach(p=>p._trigger(i,a,l)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Qn.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([dN],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:YC};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Qn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Vb(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},zc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,a,l,u,h,p,g;if(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:Qh,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:zc.HEARTBEAT_INTERVAL,this.worker=(a=e?.worker)!==null&&a!==void 0?a:!1,this.accessToken=(l=e?.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=e?.heartbeatCallback)!==null&&u!==void 0?u:Xf,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e?.reconnectAfterMs)!==null&&h!==void 0?h:(v=>cN[v-1]||uN),this.encode=(p=e?.encode)!==null&&p!==void 0?p:((v,w)=>w(JSON.stringify(v))),this.decode=(g=e?.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class Gp extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function At(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class hN extends Gp{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Yh extends Gp{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var pN=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function u(g){try{p(r.next(g))}catch(v){l(v)}}function h(g){try{p(r.throw(g))}catch(v){l(v)}}function p(g){g.done?a(g.value):i(g.value).then(u,h)}p((r=r.apply(t,e||[])).next())})};const Hb=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Si(async()=>{const{default:r}=await Promise.resolve().then(()=>Vo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},mN=()=>pN(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Si(()=>Promise.resolve().then(()=>Vo),void 0)).Response:Response}),Xh=t=>{if(Array.isArray(t))return t.map(n=>Xh(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[i]=Xh(r)}),e},gN=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var ki=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function u(g){try{p(r.next(g))}catch(v){l(v)}}function h(g){try{p(r.throw(g))}catch(v){l(v)}}function p(g){g.done?a(g.value):i(g.value).then(u,h)}p((r=r.apply(t,e||[])).next())})};const eh=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),yN=(t,e,n)=>ki(void 0,void 0,void 0,function*(){const r=yield mN();t instanceof r&&!n?.noResolveJson?t.json().then(i=>{const a=t.status||500,l=i?.statusCode||a+"";e(new hN(eh(i),a,l))}).catch(i=>{e(new Yh(eh(i),i))}):e(new Yh(eh(t),t))}),vN=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"||!r?i:(gN(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(r)):i.body=r,e?.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),n))};function yl(t,e,n,r,i,a){return ki(this,void 0,void 0,function*(){return new Promise((l,u)=>{t(n,vN(e,r,i,a)).then(h=>{if(!h.ok)throw h;return r?.noResolveJson?h:h.json()}).then(h=>l(h)).catch(h=>yN(h,u,r))})})}function yu(t,e,n,r){return ki(this,void 0,void 0,function*(){return yl(t,"GET",e,n,r)})}function lr(t,e,n,r,i){return ki(this,void 0,void 0,function*(){return yl(t,"POST",e,r,i,n)})}function ep(t,e,n,r,i){return ki(this,void 0,void 0,function*(){return yl(t,"PUT",e,r,i,n)})}function wN(t,e,n,r){return ki(this,void 0,void 0,function*(){return yl(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function qb(t,e,n,r,i){return ki(this,void 0,void 0,function*(){return yl(t,"DELETE",e,r,i,n)})}var xN=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function u(g){try{p(r.next(g))}catch(v){l(v)}}function h(g){try{p(r.throw(g))}catch(v){l(v)}}function p(g){g.done?a(g.value):i(g.value).then(u,h)}p((r=r.apply(t,e||[])).next())})};class bN{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return xN(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(At(e))return{data:null,error:e};throw e}})}}var _N=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function u(g){try{p(r.next(g))}catch(v){l(v)}}function h(g){try{p(r.throw(g))}catch(v){l(v)}}function p(g){g.done?a(g.value):i(g.value).then(u,h)}p((r=r.apply(t,e||[])).next())})};class SN{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}asStream(){return new bN(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.execute().then(e,n)}execute(){return _N(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(At(e))return{data:null,error:e};throw e}})}}var mn=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function u(g){try{p(r.next(g))}catch(v){l(v)}}function h(g){try{p(r.throw(g))}catch(v){l(v)}}function p(g){g.done?a(g.value):i(g.value).then(u,h)}p((r=r.apply(t,e||[])).next())})};const kN={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Xv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class EN{constructor(e,n={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=Hb(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,i){return mn(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},Xv),i);let u=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(l.upsert)});const h=l.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),h&&a.append("metadata",this.encodeMetadata(h)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",l.cacheControl),h&&a.append("metadata",this.encodeMetadata(h))):(a=r,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,h&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),i?.headers&&(u=Object.assign(Object.assign({},u),i.headers));const p=this._removeEmptyFolders(n),g=this._getFinalPath(p),v=yield(e=="PUT"?ep:lr)(this.fetch,`${this.url}/object/${g}`,a,Object.assign({headers:u},l?.duplex?{duplex:l.duplex}:{}));return{data:{path:p,id:v.Id,fullPath:v.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(At(a))return{data:null,error:a};throw a}})}upload(e,n,r){return mn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return mn(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),l=this._getFinalPath(a),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",n);try{let h;const p=Object.assign({upsert:Xv.upsert},i),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&r instanceof Blob?(h=new FormData,h.append("cacheControl",p.cacheControl),h.append("",r)):typeof FormData<"u"&&r instanceof FormData?(h=r,h.append("cacheControl",p.cacheControl)):(h=r,g["cache-control"]=`max-age=${p.cacheControl}`,g["content-type"]=p.contentType);const v=yield ep(this.fetch,u.toString(),h,{headers:g});return{data:{path:a,fullPath:v.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(At(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(e,n){return mn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n?.upsert&&(i["x-upsert"]="true");const a=yield lr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),l=new URL(this.url+a.url),u=l.searchParams.get("token");if(!u)throw new Gp("No token returned by API");return{data:{signedUrl:l.toString(),path:e,token:u},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(At(r))return{data:null,error:r};throw r}})}update(e,n,r){return mn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return mn(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(At(i))return{data:null,error:i};throw i}})}copy(e,n,r){return mn(this,void 0,void 0,function*(){try{return{data:{path:(yield lr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(At(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return mn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),a=yield lr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const l=r?.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(At(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return mn(this,void 0,void 0,function*(){try{const i=yield lr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(At(i))return{data:null,error:i};throw i}})}download(e,n){const i=typeof n?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(n?.transform||{}),l=a?`?${a}`:"",u=this._getFinalPath(e),h=()=>yu(this.fetch,`${this.url}/${i}/${u}${l}`,{headers:this.headers,noResolveJson:!0});return new SN(h,this.shouldThrowOnError)}info(e){return mn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield yu(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Xh(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(At(r))return{data:null,error:r};throw r}})}exists(e){return mn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield wN(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(At(r)&&r instanceof Yh){const i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],a=n?.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&i.push(a);const u=typeof n?.transform<"u"?"render/image":"object",h=this.transformOptsToQueryString(n?.transform||{});h!==""&&i.push(h);let p=i.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${r}${p}`)}}}remove(e){return mn(this,void 0,void 0,function*(){try{return{data:yield qb(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}})}list(e,n,r){return mn(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},kN),n),{prefix:e||""});return{data:yield lr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(At(i))return{data:null,error:i};throw i}})}listV2(e,n){return mn(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield lr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(At(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const CN="2.75.0",NN={"X-Client-Info":`storage-js/${CN}`};var to=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function u(g){try{p(r.next(g))}catch(v){l(v)}}function h(g){try{p(r.throw(g))}catch(v){l(v)}}function p(g){g.done?a(g.value):i(g.value).then(u,h)}p((r=r.apply(t,e||[])).next())})};class TN{constructor(e,n={},r,i){this.shouldThrowOnError=!1;const a=new URL(e);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},NN),n),this.fetch=Hb(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return to(this,void 0,void 0,function*(){try{return{data:yield yu(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(At(e))return{data:null,error:e};throw e}})}getBucket(e){return to(this,void 0,void 0,function*(){try{return{data:yield yu(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}})}createBucket(e){return to(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield lr(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(At(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return to(this,void 0,void 0,function*(){try{return{data:yield ep(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(At(r))return{data:null,error:r};throw r}})}emptyBucket(e){return to(this,void 0,void 0,function*(){try{return{data:yield lr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}})}deleteBucket(e){return to(this,void 0,void 0,function*(){try{return{data:yield qb(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}})}}class jN extends TN{constructor(e,n={},r,i){super(e,n,r,i)}from(e){return new EN(this.url,this.headers,e,this.fetch)}}const PN="2.75.0";let Ba="";typeof Deno<"u"?Ba="deno":typeof document<"u"?Ba="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ba="react-native":Ba="node";const IN={"X-Client-Info":`supabase-js-${Ba}/${PN}`},RN={headers:IN},AN={schema:"public"},ON={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},DN={};var MN=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function u(g){try{p(r.next(g))}catch(v){l(v)}}function h(g){try{p(r.throw(g))}catch(v){l(v)}}function p(g){g.done?a(g.value):i(g.value).then(u,h)}p((r=r.apply(t,e||[])).next())})};const LN=t=>{let e;return t?e=t:typeof fetch>"u"?e=Mb:e=fetch,(...n)=>e(...n)},UN=()=>typeof Headers>"u"?Lb:Headers,FN=(t,e,n)=>{const r=LN(n),i=UN();return(a,l)=>MN(void 0,void 0,void 0,function*(){var u;const h=(u=yield e())!==null&&u!==void 0?u:t;let p=new i(l?.headers);return p.has("apikey")||p.set("apikey",t),p.has("Authorization")||p.set("Authorization",`Bearer ${h}`),r(a,Object.assign(Object.assign({},l),{headers:p}))})};var $N=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function u(g){try{p(r.next(g))}catch(v){l(v)}}function h(g){try{p(r.throw(g))}catch(v){l(v)}}function p(g){g.done?a(g.value):i(g.value).then(u,h)}p((r=r.apply(t,e||[])).next())})};function BN(t){return t.endsWith("/")?t:t+"/"}function VN(t,e){var n,r;const{db:i,auth:a,realtime:l,global:u}=t,{db:h,auth:p,realtime:g,global:v}=e,w={db:Object.assign(Object.assign({},h),i),auth:Object.assign(Object.assign({},p),a),realtime:Object.assign(Object.assign({},g),l),storage:{},global:Object.assign(Object.assign(Object.assign({},v),u),{headers:Object.assign(Object.assign({},(n=v?.headers)!==null&&n!==void 0?n:{}),(r=u?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>$N(this,void 0,void 0,function*(){return""})};return t.accessToken?w.accessToken=t.accessToken:delete w.accessToken,w}function zN(t){const e=t?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(BN(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Kb="2.75.0",go=30*1e3,tp=3,th=tp*go,WN="http://localhost:9999",HN="supabase.auth.token",qN={"X-Client-Info":`gotrue-js/${Kb}`},np="X-Supabase-Api-Version",Gb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},KN=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,GN=600*1e3;class il extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Re(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class QN extends il{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function JN(t){return Re(t)&&t.name==="AuthApiError"}class ui extends il{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Fs extends il{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class vs extends Fs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ZN(t){return Re(t)&&t.name==="AuthSessionMissingError"}class no extends Fs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Wc extends Fs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Hc extends Fs{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function YN(t){return Re(t)&&t.name==="AuthImplicitGrantRedirectError"}class ew extends Fs{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class rp extends Fs{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function nh(t){return Re(t)&&t.name==="AuthRetryableFetchError"}class tw extends Fs{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class sp extends Fs{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const vu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),nw=` 	
\r=`.split(""),XN=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<nw.length;e+=1)t[nw[e].charCodeAt(0)]=-2;for(let e=0;e<vu.length;e+=1)t[vu[e].charCodeAt(0)]=e;return t})();function rw(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(vu[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(vu[r]),e.queuedBits-=6}}function Qb(t,e,n){const r=XN[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function sw(t){const e=[],n=l=>{e.push(String.fromCodePoint(l))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=l=>{nT(l,r,n)};for(let l=0;l<t.length;l+=1)Qb(t.charCodeAt(l),i,a);return e.join("")}function eT(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function tT(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}eT(r,e)}}function nT(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function _o(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)Qb(t.charCodeAt(i),n,r);return new Uint8Array(e)}function rT(t){const e=[];return tT(t,n=>e.push(n)),new Uint8Array(e)}function fi(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>rw(i,n,r)),rw(null,n,r),e.join("")}function sT(t){return Math.round(Date.now()/1e3)+t}function iT(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const _n=()=>typeof window<"u"&&typeof document<"u",si={tested:!1,writable:!1},Jb=()=>{if(!_n())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(si.tested)return si.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),si.tested=!0,si.writable=!0}catch{si.tested=!0,si.writable=!1}return si.writable};function oT(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,a)=>{e[a]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const Zb=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Si(async()=>{const{default:r}=await Promise.resolve().then(()=>Vo);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},aT=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",yo=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},ii=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ps=async(t,e)=>{await t.removeItem(e)};let Yb=class Xb{constructor(){this.promise=new Xb.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}};Yb.promiseConstructor=Promise;function rh(t){const e=t.split(".");if(e.length!==3)throw new sp("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!KN.test(e[r]))throw new sp("JWT not in base64url format");return{header:JSON.parse(sw(e[0])),payload:JSON.parse(sw(e[1])),signature:_o(e[2]),raw:{header:e[0],payload:e[1]}}}async function lT(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function cT(t,e){return new Promise((r,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await t(a);if(!e(a,null,l)){r(l);return}}catch(l){if(!e(a,l)){i(l);return}}})()})}function uT(t){return("0"+t.toString(16)).substr(-2)}function dT(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let a=0;a<56;a++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,uT).join("")}async function fT(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function hT(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await fT(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ro(t,e,n=!1){const r=dT();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await yo(t,`${e}-code-verifier`,i);const a=await hT(r);return[a,r===a?"plain":"s256"]}const pT=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function mT(t){const e=t.headers.get(np);if(!e||!e.match(pT))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function gT(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function yT(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const vT=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function so(t){if(!vT.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function sh(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function iw(t){return JSON.parse(JSON.stringify(t))}var wT=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const ai=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),xT=[502,503,504];async function ow(t){var e;if(!aT(t))throw new rp(ai(t),0);if(xT.includes(t.status))throw new rp(ai(t),t.status);let n;try{n=await t.json()}catch(a){throw new ui(ai(a),a)}let r;const i=mT(t);if(i&&i.getTime()>=Gb["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new tw(ai(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new vs}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new tw(ai(n),t.status,n.weak_password.reasons);throw new QN(ai(n),t.status||500,r)}const bT=(t,e,n,r)=>{const i={method:t,headers:e?.headers||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function Fe(t,e,n,r){var i;const a=Object.assign({},r?.headers);a[np]||(a[np]=Gb["2024-01-01"].name),r?.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const l=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(l.redirect_to=r.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",h=await _T(t,e,n+u,{headers:a,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(h):{data:Object.assign({},h),error:null}}async function _T(t,e,n,r,i,a){const l=bT(e,r,i,a);let u;try{u=await t(n,Object.assign({},l))}catch(h){throw console.error(h),new rp(ai(h),0)}if(u.ok||await ow(u),r?.noResolveJson)return u;try{return await u.json()}catch(h){await ow(h)}}function Kn(t){var e;let n=null;ET(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=sT(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function aw(t){const e=Kn(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function _s(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function ST(t){return{data:t,error:null}}function kT(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a}=t,l=wT(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:a},h=Object.assign({},l);return{data:{properties:u,user:h},error:null}}function lw(t){return t}function ET(t){return t.access_token&&t.refresh_token&&t.expires_in}const ih=["global","local","others"];var CT=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class NT{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Zb(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=ih[0]){if(ih.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${ih.join(", ")}`);try{return await Fe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Fe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:_s})}catch(r){if(Re(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=CT(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await Fe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:kT,redirectTo:n?.redirectTo})}catch(n){if(Re(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Fe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:_s})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,a,l,u,h;try{const p={nextPage:null,lastPage:0,total:0},g=await Fe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:lw});if(g.error)throw g.error;const v=await g.json(),w=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,S=(h=(u=g.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&h!==void 0?h:[];return S.length>0&&(S.forEach(E=>{const x=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(E.split(";")[1].split("=")[1]);p[`${_}Page`]=x}),p.total=parseInt(w)),{data:Object.assign(Object.assign({},v),p),error:null}}catch(p){if(Re(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){so(e);try{return await Fe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:_s})}catch(n){if(Re(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){so(e);try{return await Fe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:_s})}catch(r){if(Re(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){so(e);try{return await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:_s})}catch(r){if(Re(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){so(e.userId);try{const{data:n,error:r}=await Fe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _deleteFactor(e){so(e.userId),so(e.id);try{return{data:await Fe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,a,l,u,h;try{const p={nextPage:null,lastPage:0,total:0},g=await Fe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:lw});if(g.error)throw g.error;const v=await g.json(),w=(l=g.headers.get("x-total-count"))!==null&&l!==void 0?l:0,S=(h=(u=g.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&h!==void 0?h:[];return S.length>0&&(S.forEach(E=>{const x=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(E.split(";")[1].split("=")[1]);p[`${_}Page`]=x}),p.total=parseInt(w)),{data:Object.assign(Object.assign({},v),p),error:null}}catch(p){if(Re(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await Fe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Fe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await Fe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Fe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}}function cw(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const io={debug:!!(globalThis&&Jb()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class e0 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class TT extends e0{}async function jT(t,e,n){io.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),io.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){io.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{io.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw io.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new TT(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(io.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function PT(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function t0(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function IT(t){return parseInt(t,16)}function RT(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function AT(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:a=new Date,nonce:l,notBefore:u,requestId:h,resources:p,scheme:g,uri:v,version:w}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(w!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${w}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const S=t0(t.address),E=g?`${g}://${r}`:r,x=t.statement?`${t.statement}
`:"",_=`${E} wants you to sign in with your Ethereum account:
${S}

${x}`;let T=`URI: ${v}
Version: ${w}
Chain ID: ${n}${l?`
Nonce: ${l}`:""}
Issued At: ${a.toISOString()}`;if(i&&(T+=`
Expiration Time: ${i.toISOString()}`),u&&(T+=`
Not Before: ${u.toISOString()}`),h&&(T+=`
Request ID: ${h}`),p){let C=`
Resources:`;for(const N of p){if(!N||typeof N!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${N}`);C+=`
- ${N}`}T+=C}return`${_}
${T}`}class Rt extends Error{constructor({message:e,code:n,cause:r,name:i}){var a;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=i??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class wu extends Rt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function OT({error:t,options:e}){var n,r,i;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Rt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Rt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Rt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Rt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Rt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Rt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return a.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new Rt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Rt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const l=window.location.hostname;if(r0(l)){if(a.rp.id!==l)return new Rt({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Rt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Rt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Rt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Rt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function DT({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Rt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Rt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(r0(r)){if(n.rpId!==r)return new Rt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Rt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Rt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Rt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}var n0=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class MT{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const LT=new MT;function UT(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=n0(t,["challenge","user","excludeCredentials"]),a=_o(e).buffer,l=Object.assign(Object.assign({},n),{id:_o(n.id).buffer}),u=Object.assign(Object.assign({},i),{challenge:a,user:l});if(r&&r.length>0){u.excludeCredentials=new Array(r.length);for(let h=0;h<r.length;h++){const p=r[h];u.excludeCredentials[h]=Object.assign(Object.assign({},p),{id:_o(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return u}function FT(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=n0(t,["challenge","allowCredentials"]),i=_o(e).buffer,a=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let l=0;l<n.length;l++){const u=n[l];a.allowCredentials[l]=Object.assign(Object.assign({},u),{id:_o(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function $T(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:fi(new Uint8Array(t.response.attestationObject)),clientDataJSON:fi(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function BT(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:fi(new Uint8Array(i.authenticatorData)),clientDataJSON:fi(new Uint8Array(i.clientDataJSON)),signature:fi(new Uint8Array(i.signature)),userHandle:i.userHandle?fi(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function r0(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function uw(){var t,e;return!!(_n()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function VT(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new wu("Browser returned unexpected credential type",e)}:{data:null,error:new wu("Empty credential response",e)}}catch(e){return{data:null,error:OT({error:e,options:t})}}}async function zT(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new wu("Browser returned unexpected credential type",e)}:{data:null,error:new wu("Empty credential response",e)}}catch(e){return{data:null,error:DT({error:e,options:t})}}}const WT={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},HT={userVerification:"preferred",hints:["security-key"]};function xu(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const a in i){const l=i[a];if(l!==void 0)if(Array.isArray(l))r[a]=l;else if(n(l))r[a]=l;else if(e(l)){const u=r[a];e(u)?r[a]=xu(u,l):r[a]=xu(l)}else r[a]=l}return r}function qT(t,e){return xu(WT,t,e||{})}function KT(t,e){return xu(HT,t,e||{})}class GT{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},a){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!l)return{data:null,error:u};const h=i??LT.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:p}=l.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${r}`),p.displayName||(p.displayName=p.name)}switch(l.webauthn.type){case"create":{const p=qT(l.webauthn.credential_options.publicKey,a?.create),{data:g,error:v}=await VT({publicKey:p,signal:h});return g?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:g}},error:null}:{data:null,error:v}}case"request":{const p=KT(l.webauthn.credential_options.publicKey,a?.request),{data:g,error:v}=await zT(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:p,signal:h}));return g?{data:{factorId:e,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:g}},error:null}:{data:null,error:v}}}}catch(l){return Re(l)?{data:null,error:l}:{data:null,error:new ui("Unexpected error in challenge",l)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},a){if(!n)return{data:null,error:new il("rpId is required for WebAuthn authentication")};try{if(!uw())return{data:null,error:new ui("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:a});if(!l)return{data:null,error:u};const{webauthn:h}=l;return this._verify({factorId:e,challengeId:l.challengeId,webauthn:{type:h.type,rpId:n,rpOrigins:r,credential_response:h.credential_response}})}catch(l){return Re(l)?{data:null,error:l}:{data:null,error:new ui("Unexpected error in authenticate",l)}}}async _register({friendlyName:e,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},a){if(!n)return{data:null,error:new il("rpId is required for WebAuthn registration")};try{if(!uw())return{data:null,error:new ui("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:e});if(!l)return await this.client.mfa.listFactors().then(g=>{var v;return(v=g.data)===null||v===void 0?void 0:v.all.find(w=>w.factor_type==="webauthn"&&w.friendly_name===e&&w.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g?.id}):void 0),{data:null,error:u};const{data:h,error:p}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:a});return h?this._verify({factorId:l.id,challengeId:h.challengeId,webauthn:{rpId:n,rpOrigins:r,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:p}}catch(l){return Re(l)?{data:null,error:l}:{data:null,error:new ui("Unexpected error in register",l)}}}}PT();const QT={url:WN,storageKey:HN,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:qN,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function dw(t,e,n){return await n()}const oo={};class ol{get jwks(){var e,n;return(n=(e=oo[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){oo[this.storageKey]=Object.assign(Object.assign({},oo[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=oo[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){oo[this.storageKey]=Object.assign(Object.assign({},oo[this.storageKey]),{cachedAt:e})}constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ol.nextInstanceID,ol.nextInstanceID+=1,this.instanceID>0&&_n()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},QT),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new NT({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Zb(i.fetch),this.lock=i.lock||dw,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:_n()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=jT:this.lock=dw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new GT(this)},this.persistSession?(i.storage?this.storage=i.storage:Jb()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=cw(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=cw(this.memoryStorage)),_n()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Kb}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=oT(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),_n()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),YN(a)){const h=(e=a.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:u}=i;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Re(n)?{error:n}:{error:new ui("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const a=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:Kn}),{data:l,error:u}=a;if(u||!l)return{data:{user:null,session:null},error:u};const h=l.session,p=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(a){if(Re(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var n,r,i;try{let a;if("email"in e){const{email:g,password:v,options:w}=e;let S=null,E=null;this.flowType==="pkce"&&([S,E]=await ro(this.storage,this.storageKey)),a=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w?.emailRedirectTo,body:{email:g,password:v,data:(n=w?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:w?.captchaToken},code_challenge:S,code_challenge_method:E},xform:Kn})}else if("phone"in e){const{phone:g,password:v,options:w}=e;a=await Fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:v,data:(r=w?.data)!==null&&r!==void 0?r:{},channel:(i=w?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:w?.captchaToken}},xform:Kn})}else throw new Wc("You must provide either an email or phone number and a password");const{data:l,error:u}=a;if(u||!l)return{data:{user:null,session:null},error:u};const h=l.session,p=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(a){if(Re(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:l,options:u}=e;n=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:aw})}else if("phone"in e){const{phone:a,password:l,options:u}=e;n=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:u?.captchaToken}},xform:aw})}else throw new Wc("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new no}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Re(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,i,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,a,l,u,h,p,g,v,w;let S,E;if("message"in e)S=e.message,E=e.signature;else{const{chain:x,wallet:_,statement:T,options:C}=e;let N;if(_n())if(typeof _=="object")N=_;else{const ee=window;if("ethereum"in ee&&typeof ee.ethereum=="object"&&"request"in ee.ethereum&&typeof ee.ethereum.request=="function")N=ee.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!C?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=_}const I=new URL((n=C?.url)!==null&&n!==void 0?n:window.location.href),D=await N.request({method:"eth_requestAccounts"}).then(ee=>ee).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!D||D.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const A=t0(D[0]);let L=(r=C?.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!L){const ee=await N.request({method:"eth_chainId"});L=IT(ee)}const $={domain:I.host,address:A,statement:T,uri:I.href,version:"1",chainId:L,nonce:(i=C?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(l=(a=C?.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=C?.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(h=C?.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(p=C?.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(g=C?.signInWithEthereum)===null||g===void 0?void 0:g.resources};S=AT($),E=await N.request({method:"personal_sign",params:[RT(S),A]})}try{const{data:x,error:_}=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:S,signature:E},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:Kn});if(_)throw _;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new no}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:_})}catch(x){if(Re(x))return{data:{user:null,session:null},error:x};throw x}}async signInWithSolana(e){var n,r,i,a,l,u,h,p,g,v,w,S;let E,x;if("message"in e)E=e.message,x=e.signature;else{const{chain:_,wallet:T,statement:C,options:N}=e;let I;if(_n())if(typeof T=="object")I=T;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))I=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!N?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=T}const D=new URL((n=N?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in I&&I.signIn){const A=await I.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N?.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),C?{statement:C}:null));let L;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")L=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)L=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in L&&"signature"in L&&(typeof L.signedMessage=="string"||L.signedMessage instanceof Uint8Array)&&L.signature instanceof Uint8Array)E=typeof L.signedMessage=="string"?L.signedMessage:new TextDecoder().decode(L.signedMessage),x=L.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in I)||typeof I.signMessage!="function"||!("publicKey"in I)||typeof I!="object"||!I.publicKey||!("toBase58"in I.publicKey)||typeof I.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${D.host} wants you to sign in with your Solana account:`,I.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(i=(r=N?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=N?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((l=N?.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((u=N?.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((h=N?.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((p=N?.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((v=(g=N?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||v===void 0)&&v.length?["Resources",...N.signInWithSolana.resources.map(L=>`- ${L}`)]:[]].join(`
`);const A=await I.signMessage(new TextEncoder().encode(E),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=A}}try{const{data:_,error:T}=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:fi(x)},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(S=e.options)===null||S===void 0?void 0:S.captchaToken}}:null),xform:Kn});if(T)throw T;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new no}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:T})}catch(_){if(Re(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(e){const n=await ii(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:a,error:l}=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Kn});if(await ps(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new no}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:l})}catch(a){if(Re(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:a,nonce:l}=e,u=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:Kn}),{data:h,error:p}=u;return p?{data:{user:null,session:null},error:p}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new no}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:p})}catch(n){if(Re(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,i,a,l;try{if("email"in e){const{email:u,options:h}=e;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await ro(this.storage,this.storageKey));const{error:v}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=h?.data)!==null&&n!==void 0?n:{},create_user:(r=h?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},code_challenge:p,code_challenge_method:g},redirectTo:h?.emailRedirectTo});return{data:{user:null,session:null},error:v}}if("phone"in e){const{phone:u,options:h}=e,{data:p,error:g}=await Fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(i=h?.data)!==null&&i!==void 0?i:{},create_user:(a=h?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:h?.captchaToken},channel:(l=h?.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:p?.message_id},error:g}}throw new Wc("You must provide either an email or phone number.")}catch(u){if(Re(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(e){var n,r;try{let i,a;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:l,error:u}=await Fe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:Kn});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const h=l.session,p=l.user;return h?.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(i){if(Re(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,r,i;try{let a=null,l=null;return this.flowType==="pkce"&&([a,l]=await ro(this.storage,this.storageKey)),await Fe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:ST})}catch(a){if(Re(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new vs;const{error:i}=await Fe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(Re(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:a}=e,{error:l}=await Fe(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in e){const{phone:r,type:i,options:a}=e,{data:l,error:u}=await Fe(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:l?.message_id},error:u}}throw new Wc("You must provide either an email or phone number and a type")}catch(n){if(Re(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await ii(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<th:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const l=await ii(this.userStorage,this.storageKey+"-user");l?.user?e.user=l.user:e.user=sh()}if(this.storage.isServer&&e.user){let l=this.suppressGetSessionWarning;e=new Proxy(e,{get:(h,p,g)=>(!l&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(h,p,g))})}return{data:{session:e},error:null}}const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:_s}):await this._useSession(async n=>{var r,i,a;const{data:l,error:u}=n;if(u)throw u;return!(!((r=l.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new vs}:await Fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:_s})})}catch(n){if(Re(n))return ZN(n)&&(await this._removeSession(),await ps(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:a}=r;if(a)throw a;if(!i.session)throw new vs;const l=i.session;let u=null,h=null;this.flowType==="pkce"&&e.email!=null&&([u,h]=await ro(this.storage,this.storageKey));const{data:p,error:g}=await Fe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:h}),jwt:l.access_token,xform:_s});if(g)throw g;return l.user=p.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(r){if(Re(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new vs;const n=Date.now()/1e3;let r=n,i=!0,a=null;const{payload:l}=rh(e.access_token);if(l.exp&&(r=l.exp,i=r<=n),i){const{data:u,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!u)return{data:{user:null,session:null},error:null};a=u}else{const{data:u,error:h}=await this._getUser(e.access_token);if(h)throw h;a={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(Re(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:l,error:u}=n;if(u)throw u;e=(r=l.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new vs;const{data:i,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Re(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!_n())throw new Hc("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Hc(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new ew("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Hc("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ew("No code detected.");const{data:C,error:N}=await this._exchangeCodeForSession(e.code);if(N)throw N;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:a,refresh_token:l,expires_in:u,expires_at:h,token_type:p}=e;if(!a||!u||!l||!p)throw new Hc("No session defined in URL");const g=Math.round(Date.now()/1e3),v=parseInt(u);let w=g+v;h&&(w=parseInt(h));const S=w-g;S*1e3<=go&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${S}s, should have been closer to ${v}s`);const E=w-v;g-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,w,g):g-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,w,g);const{data:x,error:_}=await this._getUser(a);if(_)throw _;const T={provider_token:r,provider_refresh_token:i,access_token:a,expires_in:v,expires_at:w,refresh_token:l,token_type:p,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:T,redirectType:e.type},error:null}}catch(r){if(Re(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await ii(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return{error:a};const l=(r=i.session)===null||r===void 0?void 0:r.access_token;if(l){const{error:u}=await this.admin.signOut(l,e);if(u&&!(JN(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return e!=="others"&&(await this._removeSession(),await ps(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=iT(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:a},error:l}=n;if(l)throw l;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await ro(this.storage,this.storageKey,!0));try{return await Fe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(Re(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Re(n))return{data:null,error:n};throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async a=>{var l,u,h,p,g;const{data:v,error:w}=a;if(w)throw w;const S=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(l=e.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await Fe(this.fetch,"GET",S,{headers:this.headers,jwt:(g=(p=v.session)===null||p===void 0?void 0:p.access_token)!==null&&g!==void 0?g:void 0})});if(i)throw i;return _n()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:e.provider,url:r?.url},error:null}}catch(r){if(Re(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:a}}=n;if(i)throw i;const{options:l,provider:u,token:h,access_token:p,nonce:g}=e,v=await Fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a?.access_token)!==null&&r!==void 0?r:void 0,body:{provider:u,id_token:h,access_token:p,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Kn}),{data:w,error:S}=v;return S?{data:{user:null,session:null},error:S}:!w||!w.session||!w.user?{data:{user:null,session:null},error:new no}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("USER_UPDATED",w.session)),{data:w,error:S})}catch(i){if(Re(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:a,error:l}=n;if(l)throw l;return await Fe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await cT(async i=>(i>0&&await lT(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await Fe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Kn})),(i,a)=>{const l=200*Math.pow(2,i);return a&&nh(a)&&Date.now()+l-r<go})}catch(r){if(this._debug(n,"error",r),Re(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),_n()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await ii(this.storage,this.storageKey);if(i&&this.userStorage){let l=await ii(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:i.user},await yo(this.userStorage,this.storageKey+"-user",l)),i.user=(e=l?.user)!==null&&e!==void 0?e:sh()}else if(i&&!i.user&&!i.user){const l=await ii(this.storage,this.storageKey+"-user");l&&l?.user?(i.user=l.user,await ps(this.storage,this.storageKey+"-user"),await yo(this.storage,this.storageKey,i)):i.user=sh()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const a=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<th;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${th}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:l}=await this._callRefreshToken(i.refresh_token);l&&(console.error(l),nh(l)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(i.access_token);!u&&l?.user?(i.user=l.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(r,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new vs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Yb;const{data:a,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new vs;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const u={data:a.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(a){if(this._debug(i,"error",a),Re(a)){const l={data:null,error:a};return nh(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(l),l}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,n)}catch(h){a.push(h)}});if(await Promise.all(l),a.length>0){for(let u=0;u<a.length;u+=1)console.error(a[u]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await yo(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const a=iw(i);await yo(this.storage,this.storageKey,a)}else{const i=iw(n);await yo(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await ps(this.storage,this.storageKey),await ps(this.storage,this.storageKey+"-code-verifier"),await ps(this.storage,this.storageKey+"-user"),this.userStorage&&await ps(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&_n()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),go);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/go);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${go}ms, refresh threshold is ${tp} ticks`),i<=tp&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof e0)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!_n()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,l]=await ro(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});i.push(u.toString())}if(r?.queryParams){const a=new URLSearchParams(r.queryParams);i.push(a.toString())}return r?.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;return a?{data:null,error:a}:await Fe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:a,error:l}=n;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:h,error:p}=await Fe(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(r=a?.session)===null||r===void 0?void 0:r.access_token});return p?{data:null,error:p}:(e.factorType==="totp"&&h.type==="totp"&&(!((i=h?.totp)===null||i===void 0)&&i.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(n){if(Re(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return{data:null,error:a};const l=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?$T(e.webauthn.credential_response):BT(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:h}=await Fe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:l,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:h})})}catch(n){if(Re(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:a}=n;if(a)return{data:null,error:a};const l=await Fe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:UT(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:FT(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Re(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=n?.factors)!==null&&e!==void 0?e:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:i},error:a}=e;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=rh(i.access_token);let u=null;l.aal&&(u=l.aal);let h=u;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(v=>v.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(h="aal2");const g=l.amr||[];return{data:{currentLevel:u,nextLevel:h,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(u=>u.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(u=>u.kid===e),r&&this.jwks_cached_at+GN>i)return r;const{data:a,error:l}=await Fe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,r=a.keys.find(u=>u.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:S,error:E}=await this.getSession();if(E||!S.session)return{data:null,error:E};r=S.session.access_token}const{header:i,payload:a,signature:l,raw:{header:u,payload:h}}=rh(r);n?.allowExpired||gT(a.exp);const p=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!p){const{error:S}=await this.getUser(r);if(S)throw S;return{data:{claims:a,header:i,signature:l},error:null}}const g=yT(i.alg),v=await crypto.subtle.importKey("jwk",p,g,!0,["verify"]);if(!await crypto.subtle.verify(g,v,l,rT(`${u}.${h}`)))throw new sp("Invalid JWT signature");return{data:{claims:a,header:i,signature:l},error:null}}catch(r){if(Re(r))return{data:null,error:r};throw r}}}ol.nextInstanceID=0;const JT=ol;class ZT extends JT{constructor(e){super(e)}}var YT=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function u(g){try{p(r.next(g))}catch(v){l(v)}}function h(g){try{p(r.throw(g))}catch(v){l(v)}}function p(g){g.done?a(g.value):i(g.value).then(u,h)}p((r=r.apply(t,e||[])).next())})};class XT{constructor(e,n,r){var i,a,l;this.supabaseUrl=e,this.supabaseKey=n;const u=zN(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const h=`sb-${u.hostname.split(".")[0]}-auth-token`,p={db:AN,realtime:DN,auth:Object.assign(Object.assign({},ON),{storageKey:h}),global:RN},g=VN(r??{},p);this.storageKey=(i=g.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=g.global.headers)!==null&&a!==void 0?a:{},g.accessToken?(this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(v,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=g.auth)!==null&&l!==void 0?l:{},this.headers,g.global.fetch),this.fetch=FN(n,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.rest=new QC(new URL("rest/v1",u).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new jN(this.storageUrl.href,this.headers,this.fetch,r?.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new FC(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return YT(this,void 0,void 0,function*(){var e,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:a,storageKey:l,flowType:u,lock:h,debug:p},g,v){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ZT({url:this.authUrl.href,headers:Object.assign(Object.assign({},w),g),storageKey:l,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:a,flowType:u,lock:h,debug:p,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(S=>S.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new fN(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r?.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ej=(t,e,n)=>new XT(t,e,n);function tj(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}tj()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const nj="https://wsolfnlruttssuozalsz.supabase.co",rj="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Indzb2xmbmxydXR0c3N1b3phbHN6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA0MjY0NDcsImV4cCI6MjA3NjAwMjQ0N30.Z9uJZm0n51Ckmxq8XPhysucdXqxEC0sl3e6jkDlQk5s",er=ej(nj,rj),s0=b.createContext(null);function i0({children:t}){const[e,n]=b.useState(null),[r,i]=b.useState(!0);b.useEffect(()=>{let l=!1;const{data:u}=er.auth.onAuthStateChange(async(h,p)=>{if(h==="INITIAL_SESSION"){n(p??null),i(!1),l=!0;return}if((h==="SIGNED_IN"||h==="TOKEN_REFRESHED"||h==="USER_UPDATED")&&n(p??null),h==="SIGNED_OUT"){n(null),Gk.clear();try{localStorage.removeItem("ctp_watchlist"),localStorage.removeItem("ctp_filters")}catch{}window.location.replace("/#/account")}});return er.auth.getSession().then(({data:h})=>{l||(n(h.session??null),i(!1))}),()=>{u.subscription.unsubscribe()}},[]);const a=b.useMemo(()=>({session:e,user:e?.user??null,loading:r,signOut:async()=>{await er.auth.signOut()}}),[e,r]);return d.jsx(s0.Provider,{value:a,children:t})}function Hr(){const t=b.useContext(s0);if(!t)throw new Error("useAuth must be used within <AuthProvider>");return t}function sj(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,i,a,l=[],u="",h=t.split("/");for(h[0]||h.shift();i=h.shift();)n=i[0],n==="*"?(l.push(n),u+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=i.indexOf("?",1),a=i.indexOf(".",1),l.push(i.substring(1,~r?r:~a?a:i.length)),u+=~r&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(u+=(~r?"?":"")+"\\"+i.substring(a))):u+="/"+i;return{keys:l,pattern:new RegExp("^"+u+(e?"(?=$|/)":"/?$"),"i")}}var oh={exports:{}},ah={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fw;function ij(){if(fw)return ah;fw=1;var t=qu();function e(v,w){return v===w&&(v!==0||1/v===1/w)||v!==v&&w!==w}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,l=t.useDebugValue;function u(v,w){var S=w(),E=r({inst:{value:S,getSnapshot:w}}),x=E[0].inst,_=E[1];return a(function(){x.value=S,x.getSnapshot=w,h(x)&&_({inst:x})},[v,S,w]),i(function(){return h(x)&&_({inst:x}),v(function(){h(x)&&_({inst:x})})},[v]),l(S),S}function h(v){var w=v.getSnapshot;v=v.value;try{var S=w();return!n(v,S)}catch{return!0}}function p(v,w){return w()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:u;return ah.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:g,ah}var hw;function oj(){return hw||(hw=1,oh.exports=ij()),oh.exports}var o0=oj();const aj=$p.useInsertionEffect,lj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",a0=lj?b.useLayoutEffect:b.useEffect,cj=aj||a0,Qp=t=>{const e=b.useRef([t,(...n)=>e[0](...n)]).current;return cj(()=>{e[0]=t}),e[1]},uj="popstate",Jp="pushState",Zp="replaceState",dj="hashchange",pw=[uj,Jp,Zp,dj],fj=t=>{for(const e of pw)addEventListener(e,t);return()=>{for(const e of pw)removeEventListener(e,t)}},l0=(t,e)=>o0.useSyncExternalStore(fj,t,e),hj=()=>location.search,pj=({ssrSearch:t=""}={})=>l0(hj,()=>t),mw=()=>location.pathname,mj=({ssrPath:t}={})=>l0(mw,t?()=>t:mw),gj=(t,{replace:e=!1,state:n=null}={})=>history[e?Zp:Jp](n,"",t),yj=(t={})=>[mj(t),gj],gw=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[gw]>"u"){for(const t of[Jp,Zp]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,gw,{value:!0})}const vj=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",c0=(t="")=>t==="/"?"":t,wj=(t,e)=>t[0]==="~"?t.slice(1):c0(e)+t,xj=(t="",e)=>vj(yw(c0(t)),yw(e)),yw=t=>{try{return decodeURI(t)}catch{return t}},u0={hook:yj,searchHook:pj,parser:sj,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:t=>t},d0=b.createContext(u0),Ei=()=>b.useContext(d0),f0={},h0=b.createContext(f0),bj=()=>b.useContext(h0),vl=t=>{const[e,n]=t.hook(t);return[xj(t.base,e),Qp((r,i)=>n(wj(r,t.base),i))]},qr=()=>vl(Ei()),Yp=(t,e,n,r)=>{const{pattern:i,keys:a}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),l=i.exec(n)||[],[u,...h]=l;return u!==void 0?[!0,(()=>{const p=a!==!1?Object.fromEntries(a.map((v,w)=>[v,h[w]])):l.groups;let g={...h};return p&&Object.assign(g,p),g})(),...r?[u]:[]]:[!1,null]},_j=t=>Yp(Ei().parser,t,qr()[0]),p0=({children:t,...e})=>{const n=Ei(),r=e.hook?u0:n;let i=r;const[a,l]=e.ssrPath?.split("?")??[];l&&(e.ssrSearch=l,e.ssrPath=a),e.hrefs=e.hrefs??e.hook?.hrefs;let u=b.useRef({}),h=u.current,p=h;for(let g in r){const v=g==="base"?r[g]+(e[g]||""):e[g]||r[g];h===p&&v!==p[g]&&(u.current=p={...p}),p[g]=v,(v!==r[g]||v!==i[g])&&(i=p)}return b.createElement(d0.Provider,{value:i,children:t})},vw=({children:t,component:e},n)=>e?b.createElement(e,{params:n}):typeof t=="function"?t(n):t,Sj=t=>{let e=b.useRef(f0);const n=e.current;return e.current=Object.keys(t).length!==Object.keys(n).length||Object.entries(t).some(([r,i])=>i!==n[r])?t:n},gn=({path:t,nest:e,match:n,...r})=>{const i=Ei(),[a]=vl(i),[l,u,h]=n??Yp(i.parser,t,a,e),p=Sj({...bj(),...u});if(!l)return null;const g=h?b.createElement(p0,{base:h},vw(r,p)):vw(r,p);return b.createElement(h0.Provider,{value:p,children:g})},wt=b.forwardRef((t,e)=>{const n=Ei(),[r,i]=vl(n),{to:a="",href:l=a,onClick:u,asChild:h,children:p,className:g,replace:v,state:w,...S}=t,E=Qp(_=>{_.ctrlKey||_.metaKey||_.altKey||_.shiftKey||_.button!==0||(u?.(_),_.defaultPrevented||(_.preventDefault(),i(l,t)))}),x=n.hrefs(l[0]==="~"?l.slice(1):n.base+l,n);return h&&b.isValidElement(p)?b.cloneElement(p,{onClick:E,href:x}):b.createElement("a",{...S,onClick:E,href:x,className:g?.call?g(r===l):g,children:p,ref:e})}),m0=t=>Array.isArray(t)?t.flatMap(e=>m0(e&&e.type===b.Fragment?e.props.children:e)):[t],kj=({children:t,location:e})=>{const n=Ei(),[r]=vl(n);for(const i of m0(t)){let a=0;if(b.isValidElement(i)&&(a=Yp(n.parser,i.props.path,e||r,i.props.nest))[0])return b.cloneElement(i,{match:a})}return null},Va=t=>{const{to:e,href:n=e}=t,r=Ei(),[,i]=vl(r),a=Qp(()=>i(e||n,t)),{ssrContext:l}=r;return a0(()=>{a()},[]),l&&(l.redirectTo=e),null},za={v:[]},ww=()=>za.v.forEach(t=>t()),Ej=t=>(za.v.push(t)===1&&addEventListener("hashchange",ww),()=>{za.v=za.v.filter(e=>e!==t),za.v.length||removeEventListener("hashchange",ww)}),Cj=()=>"/"+location.hash.replace(/^#?\/?/,""),Nj=(t,{state:e=null,replace:n=!1}={})=>{const[r,i]=t.replace(/^#?\/?/,"").split("?"),a=location.pathname+(i?`?${i}`:location.search)+`#/${r}`,l=location.href,u=new URL(a,location.origin).href;n?history.replaceState(e,"",a):history.pushState(e,"",a);const h=typeof HashChangeEvent<"u"?new HashChangeEvent("hashchange",{oldURL:l,newURL:u}):new Event("hashchange",{detail:{oldURL:l,newURL:u}});dispatchEvent(h)},g0=({ssrPath:t="/"}={})=>[o0.useSyncExternalStore(Ej,Cj,()=>t),Nj];g0.hrefs=t=>"#"+t;class Tj extends b.Component{state={hasError:!1};static getDerivedStateFromError(){return{hasError:!0}}render(){return this.state.hasError?d.jsx("div",{className:"p-4 text-red-400",children:"Something went wrong."}):this.props.children}}const y0=b.createContext(null);function jj({children:t}){const[e,n]=b.useState([]),r=b.useRef(1),i=b.useCallback(u=>{n(h=>h.filter(p=>p.id!==u))},[]),a=b.useCallback((u,h)=>{const p=r.current++,g=h?.variant??"info",v=Math.max(1200,h?.duration??2200),w={id:p,message:u,variant:g,duration:v};return n(S=>[...S,w]),window.setTimeout(()=>i(p),v),p},[i]),l=b.useMemo(()=>({show:a,success:(u,h)=>a(u,{variant:"success",duration:h}),error:(u,h)=>a(u,{variant:"error",duration:h}),info:(u,h)=>a(u,{variant:"info",duration:h}),dismiss:i}),[a,i]);return d.jsxs(y0.Provider,{value:l,children:[t,d.jsx("div",{className:"fixed bottom-4 right-4 z-[2147483647] flex flex-col items-end gap-2 pointer-events-none",children:e.map(u=>d.jsx("div",{className:["pointer-events-auto select-none rounded-xl border px-3 py-2 text-sm shadow-2xl","transition-all duration-150 will-change-transform",u.variant==="success"?"bg-emerald-500 text-black border-emerald-400":"",u.variant==="error"?"bg-red-500 text-black border-red-400":"",u.variant==="info"?"bg-[#1a1a1a] text-white border-white/15":""].join(" "),role:"status","aria-live":"polite",children:u.message},u.id))})]})}function Pj(){const t=b.useContext(y0);if(!t)throw new Error("useToast must be used within <ToastProvider>");return t}function xw({children:t}){const{user:e,loading:n}=Hr(),[r]=qr();if(n)return d.jsx("div",{className:"p-6 text-muted-foreground",children:"Loading"});if(!e){const i=encodeURIComponent(r);return d.jsx(Va,{to:`/account?redirect=${i}`,replace:!0})}return d.jsx(d.Fragment,{children:t})}var Ci=Sb();const Ij=Fp(Ci);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),v0=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Aj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=b.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:l,...u},h)=>b.createElement("svg",{ref:h,...Aj,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:v0("lucide",i),...u},[...l.map(([p,g])=>b.createElement(p,g)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=(t,e)=>{const n=b.forwardRef(({className:r,...i},a)=>b.createElement(Oj,{ref:a,iconNode:e,className:v0(`lucide-${Rj(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xp=We("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=We("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const em=We("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=We("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=We("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=We("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tm=We("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=We("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=We("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=We("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=We("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=We("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lh=We("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ch=We("Clock3",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16.5 12",key:"1aq6pp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=We("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=We("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ip=We("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const op=We("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x0=We("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=We("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=We("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=We("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=We("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=We("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=We("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=We("RadioTower",[["path",{d:"M4.9 16.1C1 12.2 1 5.8 4.9 1.9",key:"s0qx1y"}],["path",{d:"M7.8 4.7a6.14 6.14 0 0 0-.8 7.5",key:"1idnkw"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}],["path",{d:"M16.2 4.8c2 2 2.26 5.11.8 7.47",key:"ojru2q"}],["path",{d:"M19.1 1.9a9.96 9.96 0 0 1 0 14.1",key:"rhi7fg"}],["path",{d:"M9.5 18h5",key:"mfy3pd"}],["path",{d:"m8 22 4-11 4 11",key:"25yftu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj=We("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=We("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=We("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=We("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=We("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=We("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ap=We("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=We("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lp=We("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=We("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yj=We("Volume",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=We("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eP=We("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=We("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function tP({anchor:t,label:e,show:n}){const[r,i]=b.useState({top:0,left:0}),a=b.useRef();return b.useEffect(()=>{if(!n||!t)return;const l=()=>{const u=t.getBoundingClientRect();i({top:u.top+u.height/2,left:u.right+8}),a.current=requestAnimationFrame(l)};return l(),()=>{a.current&&cancelAnimationFrame(a.current)}},[n,t]),!n||!t?null:Ci.createPortal(d.jsx("div",{className:"fixed -translate-y-1/2 z-[9999] px-2.5 py-1.5 rounded-lg bg-black text-white text-xs shadow-2xl pointer-events-none",style:{top:r.top,left:r.left},children:e}),document.body)}const nP=[{label:"Dashboard",to:"/dashboard",icon:d.jsx(zj,{size:20})},{label:"Portfolio",to:"/portfolio",icon:d.jsx(Lj,{size:20})},{label:"Gainers",to:"/gainers",icon:d.jsx(Xp,{size:20})},{label:"Analyse",to:"/analyse",icon:d.jsx(_w,{size:20})},{label:"Watchlist",to:"/watchlist",icon:d.jsx(Wj,{size:20}),visible:t=>!!t},{label:"Alerts",to:"/alerts",icon:d.jsx(em,{size:20}),visible:t=>!!t},{label:"AI Insights",to:"/ai-insights",icon:d.jsx(_w,{size:20})},{label:"News",to:"/news",icon:d.jsx(b0,{size:20})}];function rP({isOpen:t=!1,onClose:e}){const{user:n,loading:r}=Hr(),[i]=qr(),[a,l]=b.useState(!1),[u,h]=b.useState(!0),[p,g]=b.useState(null),[v,w]=b.useState(""),[S,E]=b.useState(!1),x=b.useRef(null),_=b.useRef(null),[T,C]=b.useState(null),N=a&&!u,I=a?u?"whitespace-nowrap transition-all opacity-0 w-0 group-hover:opacity-100 group-hover:w-auto":"whitespace-nowrap transition-all opacity-0 w-0":"whitespace-nowrap transition-all opacity-100 w-auto",D=typeof window<"u"&&window.innerWidth<768;function A(){const L=x.current,$=_.current;if(!L||!$)return;const ee=L.getBoundingClientRect(),z=$.offsetWidth||320,K=12,q=z/2,J=Math.min(Math.max(ee.left+ee.width/2,K+q),window.innerWidth-K-q),X=Math.max(ee.top-12,K+8);C({left:J,top:X})}return b.useEffect(()=>{if(!S)return;requestAnimationFrame(()=>{A(),requestAnimationFrame(A)});const L=()=>A(),$=z=>{x.current?.contains(z.target)||E(!1)},ee=z=>z.key==="Escape"&&E(!1);return window.addEventListener("resize",L),window.addEventListener("scroll",L,{passive:!0}),document.addEventListener("click",$),document.addEventListener("keydown",ee),()=>{window.removeEventListener("resize",L),window.removeEventListener("scroll",L),document.removeEventListener("click",$),document.removeEventListener("keydown",ee)}},[S]),d.jsxs(d.Fragment,{children:[D&&t&&d.jsx("div",{className:"fixed inset-0 bg-muted/50 z-30 md:hidden",onClick:e}),d.jsxs("aside",{className:["group relative h-screen bg-sidebar border-r border-sidebar-border transition-all duration-200 flex flex-col overflow-hidden",D&&!t?"hidden":"",D&&t?"fixed left-0 top-0 z-40 w-60":"",D?"":"block",!D&&a?"w-14":"",!D&&!a?"w-60":"",!D&&u&&a?"hover:w-60":""].join(" "),children:[d.jsxs("div",{className:"h-14 flex items-center justify-between px-3",children:[d.jsx(wt,{to:"/dashboard",className:"text-white/90 font-semibold tracking-wide whitespace-nowrap overflow-hidden",onClick:e,children:N?"":"CryptoTrader Pro"}),D&&t&&d.jsx("button",{onClick:e,className:"md:hidden text-white/60 hover:text-white","aria-label":"Close sidebar",children:""})]}),d.jsx("nav",{className:"mt-2 space-y-1 px-2 flex-1 overflow-y-auto",children:nP.filter(L=>r?!0:L.visible?L.visible(n):!0).map(L=>{const $=L.to==="/analyse"?i.startsWith("/analyse"):i===L.to,ee=()=>{D&&t&&e?.()};return d.jsxs(wt,{to:L.to,onClick:ee,className:["relative group/item flex items-center gap-3 rounded-xl px-3 py-2 text-[15px]","text-foreground hover:text-white hover:bg-white/5",$?"bg-white/[0.07] text-white":""].join(" "),onMouseEnter:z=>{N&&(w(L.label),g(z.currentTarget))},onMouseLeave:()=>{g(null)},children:[d.jsx("div",{className:"shrink-0",children:L.icon}),d.jsx("span",{className:I,children:L.label})]},L.to)})}),d.jsx("div",{className:"absolute bottom-3 left-2",children:d.jsx("button",{ref:x,type:"button",onClick:L=>{L.stopPropagation(),E($=>!$)},"aria-label":"Sidebar control",className:"w-10 h-10 rounded-2xl bg-white/[0.06] hover:bg-white/[0.1] border border-primary shadow-md flex items-center justify-center",children:d.jsx(qj,{size:18,className:"text-white/90"})})}),S&&Ci.createPortal(d.jsxs("div",{ref:_,className:"fixed z-[2147483647] w-80 rounded-2xl border border-primary/40 bg-background/95 backdrop-blur text-foreground shadow-2xl overflow-hidden",style:{left:T?.left??0,top:T?.top??-9999,transform:"translate(-50%, -100%)",visibility:T?"visible":"hidden"},onClick:L=>L.stopPropagation(),children:[d.jsx("div",{className:"px-4 py-3 border-b border-primary/20 text-[15px] font-semibold text-primary",children:"Sidebar control"}),d.jsxs("div",{className:"p-4 text-[15px] space-y-3",children:[d.jsxs("label",{className:"flex items-center gap-3 cursor-pointer hover:text-white transition-colors",children:[d.jsx("input",{type:"radio",name:"sb",className:"accent-primary",checked:!a&&!u,onChange:()=>{l(!1),h(!1),E(!1)}}),d.jsx("span",{children:"Expanded"})]}),d.jsxs("label",{className:"flex items-center gap-3 cursor-pointer hover:text-white transition-colors",children:[d.jsx("input",{type:"radio",name:"sb",className:"accent-primary",checked:a&&!u,onChange:()=>{l(!0),h(!1),E(!1)}}),d.jsx("span",{children:"Collapsed"})]}),d.jsxs("label",{className:"flex items-center gap-3 cursor-pointer hover:text-white transition-colors",children:[d.jsx("input",{type:"radio",name:"sb",className:"accent-primary",checked:a&&u,onChange:()=>{l(!0),h(!0),E(!1)}}),d.jsx("span",{children:"Expand on hover"})]})]})]}),document.body),d.jsx(tP,{anchor:p,label:v,show:!!p&&N})]})]})}const sP=b.lazy(()=>Si(()=>import("./AccountDropdown-CSCqxhWx.js"),[]));function iP({onMenuClick:t}){const[e]=qr(),n=r=>{const i={"/dashboard":"Dashboard","/portfolio":"Portfolio","/gainers":"Top Gainers","/analyse":"Analysis","/watchlist":"Watchlist","/alerts":"Alerts","/account":"Account","/ai-insights":"AI","/news":"News"};for(const[a,l]of Object.entries(i))if(e.startsWith(a))return l;return"Dashboard"};return d.jsx("header",{className:"sticky top-0 z-40 border-b border-border/50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 h-14 md:h-16",children:d.jsxs("div",{className:"flex h-full items-center justify-between px-3 sm:px-4 md:px-6 gap-2",children:[d.jsx("button",{onClick:t,className:"md:hidden p-2 hover:bg-foreground/10 rounded-lg transition-colors","aria-label":"Toggle sidebar",children:d.jsx(Hj,{size:20,className:"text-foreground"})}),d.jsx("h1",{className:"text-base font-semibold tracking-tight text-foreground truncate flex-1 md:flex-none md:text-lg",children:n()}),d.jsx(b.Suspense,{fallback:d.jsx("div",{className:"w-10 h-10"}),children:d.jsx(sP,{})})]})})}function vr(){const{user:t,loading:e,session:n,signOut:r}=Hr();return{user:t,session:n,signOut:r,isLoading:e,authReady:!e,isAuthenticated:!!t,idToken:n?.access_token??null,getIdToken:async()=>n?.access_token??null,signInWithGoogle:async()=>{}}}const oP=()=>{};var Sw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},aP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],l=t[n++],u=t[n++],h=((i&7)<<18|(a&63)<<12|(l&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const a=t[n++],l=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|l&63)}}return e.join("")},E0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],l=i+1<t.length,u=l?t[i+1]:0,h=i+2<t.length,p=h?t[i+2]:0,g=a>>2,v=(a&3)<<4|u>>4;let w=(u&15)<<2|p>>6,S=p&63;h||(S=64,l||(w=64)),r.push(n[g],n[v],n[w],n[S])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(k0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):aP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],u=i<t.length?n[t.charAt(i)]:0;++i;const p=i<t.length?n[t.charAt(i)]:64;++i;const v=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||u==null||p==null||v==null)throw new lP;const w=a<<2|u>>4;if(r.push(w),p!==64){const S=u<<4&240|p>>2;if(r.push(S),v!==64){const E=p<<6&192|v;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class lP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cP=function(t){const e=k0(t);return E0.encodeByteArray(e,!0)},C0=function(t){return cP(t).replace(/\./g,"")},N0=function(t){try{return E0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP=()=>uP().__FIREBASE_DEFAULTS__,fP=()=>{if(typeof process>"u"||typeof Sw>"u")return;const t=Sw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},hP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&N0(t[1]);return e&&JSON.parse(e)},nm=()=>{try{return oP()||dP()||fP()||hP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},pP=t=>nm()?.emulatorHosts?.[t],T0=()=>nm()?.config,j0=t=>nm()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function gP(t){return(await fetch(t,{credentials:"include"})).ok}const Ja={};function yP(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ja))Ja[e]?t.emulator.push(e):t.prod.push(e);return t}function vP(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let kw=!1;function wP(t,e){if(typeof window>"u"||typeof document>"u"||!Gu(window.location.host)||Ja[t]===e||Ja[t]||kw)return;Ja[t]=e;function n(w){return`__firebase__banner__${w}`}const r="__firebase__banner",a=yP().prod.length>0;function l(){const w=document.getElementById(r);w&&w.remove()}function u(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function h(w,S){w.setAttribute("width","24"),w.setAttribute("id",S),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function p(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{kw=!0,l()},w}function g(w,S){w.setAttribute("id",S),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function v(){const w=vP(r),S=n("text"),E=document.getElementById(S)||document.createElement("span"),x=n("learnmore"),_=document.getElementById(x)||document.createElement("a"),T=n("preprendIcon"),C=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const N=w.element;u(N),g(_,x);const I=p();h(C,T),N.append(C,E,_,I),document.body.appendChild(N)}a?(E.innerText="Preview backend disconnected.",C.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(C.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}function bP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _P(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function SP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kP(){const t=ln();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function EP(){try{return typeof indexedDB=="object"}catch{return!1}}function CP(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP="FirebaseError";class $s extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=NP,Object.setPrototypeOf(this,$s.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wl.prototype.create)}}class wl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],l=a?TP(a,r):"Error",u=`${this.serviceName}: ${l} (${i}).`;return new $s(i,u,r)}}function TP(t,e){return t.replace(jP,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const jP=/\{\$([^}]+)}/g;function PP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ao(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],l=e[i];if(Ew(a)&&Ew(l)){if(!Ao(a,l))return!1}else if(a!==l)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ew(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function IP(t,e){const n=new RP(t,e);return n.subscribe.bind(n)}class RP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");AP(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=uh),i.error===void 0&&(i.error=uh),i.complete===void 0&&(i.complete=uh);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function AP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function uh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(t){return t&&t._delegate?t._delegate:t}class Oo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new mP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(MP(e))try{this.getOrInitializeService({instanceIdentifier:li})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=li){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=li){return this.instances.has(e)}getOptions(e=li){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,l]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(a);r===u&&l.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:DP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=li){return this.component?this.component.multipleInstances?e:li:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function DP(t){return t===li?void 0:t}function MP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new OP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(lt||(lt={}));const UP={debug:lt.DEBUG,verbose:lt.VERBOSE,info:lt.INFO,warn:lt.WARN,error:lt.ERROR,silent:lt.SILENT},FP=lt.INFO,$P={[lt.DEBUG]:"log",[lt.VERBOSE]:"log",[lt.INFO]:"info",[lt.WARN]:"warn",[lt.ERROR]:"error"},BP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=$P[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class P0{constructor(e){this.name=e,this._logLevel=FP,this._logHandler=BP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,lt.DEBUG,...e),this._logHandler(this,lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,lt.VERBOSE,...e),this._logHandler(this,lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,lt.INFO,...e),this._logHandler(this,lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,lt.WARN,...e),this._logHandler(this,lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,lt.ERROR,...e),this._logHandler(this,lt.ERROR,...e)}}const VP=(t,e)=>e.some(n=>t instanceof n);let Cw,Nw;function zP(){return Cw||(Cw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WP(){return Nw||(Nw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const I0=new WeakMap,cp=new WeakMap,R0=new WeakMap,dh=new WeakMap,rm=new WeakMap;function HP(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{n(Ps(t.result)),i()},l=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&I0.set(n,t)}).catch(()=>{}),rm.set(e,t),e}function qP(t){if(cp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{n(),i()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});cp.set(t,e)}let up={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return cp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||R0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ps(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function KP(t){up=t(up)}function GP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(fh(this),e,...n);return R0.set(r,e.sort?e.sort():[e]),Ps(r)}:WP().includes(t)?function(...e){return t.apply(fh(this),e),Ps(I0.get(this))}:function(...e){return Ps(t.apply(fh(this),e))}}function QP(t){return typeof t=="function"?GP(t):(t instanceof IDBTransaction&&qP(t),VP(t,zP())?new Proxy(t,up):t)}function Ps(t){if(t instanceof IDBRequest)return HP(t);if(dh.has(t))return dh.get(t);const e=QP(t);return e!==t&&(dh.set(t,e),rm.set(e,t)),e}const fh=t=>rm.get(t);function JP(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(t,e),u=Ps(l);return r&&l.addEventListener("upgradeneeded",h=>{r(Ps(l.result),h.oldVersion,h.newVersion,Ps(l.transaction),h)}),n&&l.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{a&&h.addEventListener("close",()=>a()),i&&h.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),u}const ZP=["get","getKey","getAll","getAllKeys","count"],YP=["put","add","delete","clear"],hh=new Map;function Tw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(hh.get(e))return hh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=YP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ZP.includes(n)))return;const a=async function(l,...u){const h=this.transaction(l,i?"readwrite":"readonly");let p=h.store;return r&&(p=p.index(u.shift())),(await Promise.all([p[n](...u),i&&h.done]))[0]};return hh.set(e,a),a}KP(t=>({...t,get:(e,n,r)=>Tw(e,n)||t.get(e,n,r),has:(e,n)=>!!Tw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(eI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function eI(t){return t.getComponent()?.type==="VERSION"}const dp="@firebase/app",jw="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr=new P0("@firebase/app"),tI="@firebase/app-compat",nI="@firebase/analytics-compat",rI="@firebase/analytics",sI="@firebase/app-check-compat",iI="@firebase/app-check",oI="@firebase/auth",aI="@firebase/auth-compat",lI="@firebase/database",cI="@firebase/data-connect",uI="@firebase/database-compat",dI="@firebase/functions",fI="@firebase/functions-compat",hI="@firebase/installations",pI="@firebase/installations-compat",mI="@firebase/messaging",gI="@firebase/messaging-compat",yI="@firebase/performance",vI="@firebase/performance-compat",wI="@firebase/remote-config",xI="@firebase/remote-config-compat",bI="@firebase/storage",_I="@firebase/storage-compat",SI="@firebase/firestore",kI="@firebase/ai",EI="@firebase/firestore-compat",CI="firebase",NI="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp="[DEFAULT]",TI={[dp]:"fire-core",[tI]:"fire-core-compat",[rI]:"fire-analytics",[nI]:"fire-analytics-compat",[iI]:"fire-app-check",[sI]:"fire-app-check-compat",[oI]:"fire-auth",[aI]:"fire-auth-compat",[lI]:"fire-rtdb",[cI]:"fire-data-connect",[uI]:"fire-rtdb-compat",[dI]:"fire-fn",[fI]:"fire-fn-compat",[hI]:"fire-iid",[pI]:"fire-iid-compat",[mI]:"fire-fcm",[gI]:"fire-fcm-compat",[yI]:"fire-perf",[vI]:"fire-perf-compat",[wI]:"fire-rc",[xI]:"fire-rc-compat",[bI]:"fire-gcs",[_I]:"fire-gcs-compat",[SI]:"fire-fst",[EI]:"fire-fst-compat",[kI]:"fire-vertex","fire-js":"fire-js",[CI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bu=new Map,jI=new Map,hp=new Map;function Pw(t,e){try{t.container.addComponent(e)}catch(n){Fr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ll(t){const e=t.name;if(hp.has(e))return Fr.debug(`There were multiple attempts to register component ${e}.`),!1;hp.set(e,t);for(const n of bu.values())Pw(n,t);for(const n of jI.values())Pw(n,t);return!0}function A0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Dr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Is=new wl("app","Firebase",PI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Oo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Is.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl=NI;function O0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:fp,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Is.create("bad-app-name",{appName:String(i)});if(n||(n=T0()),!n)throw Is.create("no-options");const a=bu.get(i);if(a){if(Ao(n,a.options)&&Ao(r,a.config))return a;throw Is.create("duplicate-app",{appName:i})}const l=new LP(i);for(const h of hp.values())l.addComponent(h);const u=new II(n,r,l);return bu.set(i,u),u}function RI(t=fp){const e=bu.get(t);if(!e&&t===fp&&T0())return O0();if(!e)throw Is.create("no-app",{appName:t});return e}function ko(t,e,n){let r=TI[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${r}" with version "${e}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fr.warn(l.join(" "));return}ll(new Oo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI="firebase-heartbeat-database",OI=1,cl="firebase-heartbeat-store";let ph=null;function D0(){return ph||(ph=JP(AI,OI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(cl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Is.create("idb-open",{originalErrorMessage:t.message})})),ph}async function DI(t){try{const n=(await D0()).transaction(cl),r=await n.objectStore(cl).get(M0(t));return await n.done,r}catch(e){if(e instanceof $s)Fr.warn(e.message);else{const n=Is.create("idb-get",{originalErrorMessage:e?.message});Fr.warn(n.message)}}}async function Iw(t,e){try{const r=(await D0()).transaction(cl,"readwrite");await r.objectStore(cl).put(e,M0(t)),await r.done}catch(n){if(n instanceof $s)Fr.warn(n.message);else{const r=Is.create("idb-set",{originalErrorMessage:n?.message});Fr.warn(r.message)}}}function M0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI=1024,LI=30;class UI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new $I(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Rw();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>LI){const i=BI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Fr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Rw(),{heartbeatsToSend:n,unsentEntries:r}=FI(this._heartbeatsCache.heartbeats),i=C0(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Fr.warn(e),""}}}function Rw(){return new Date().toISOString().substring(0,10)}function FI(t,e=MI){const n=[];let r=t.slice();for(const i of t){const a=n.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),Aw(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Aw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class $I{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return EP()?CP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await DI(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Iw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Iw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Aw(t){return C0(JSON.stringify({version:2,heartbeats:t})).length}function BI(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(t){ll(new Oo("platform-logger",e=>new XP(e),"PRIVATE")),ll(new Oo("heartbeat",e=>new UI(e),"PRIVATE")),ko(dp,jw,t),ko(dp,jw,"esm2020"),ko("fire-js","")}VI("");var zI="firebase",WI="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ko(zI,WI,"app");function L0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const HI=L0,U0=new wl("auth","Firebase",L0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u=new P0("@firebase/auth");function qI(t,...e){_u.logLevel<=lt.WARN&&_u.warn(`Auth (${bl}): ${t}`,...e)}function su(t,...e){_u.logLevel<=lt.ERROR&&_u.error(`Auth (${bl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(t,...e){throw sm(t,...e)}function fr(t,...e){return sm(t,...e)}function F0(t,e,n){const r={...HI(),[e]:n};return new wl("auth","Firebase",r).create(e,{appName:t.name})}function mi(t){return F0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return U0.create(t,...e)}function Ue(t,e,...n){if(!t)throw sm(e,...n)}function Lr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw su(e),new Error(e)}function Br(t,e){t||Lr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(){return typeof self<"u"&&self.location?.href||""}function KI(){return Ow()==="http:"||Ow()==="https:"}function Ow(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(KI()||_P()||"connection"in navigator)?navigator.onLine:!0}function QI(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,n){this.shortDelay=e,this.longDelay=n,Br(n>e,"Short delay should be less than long delay!"),this.isMobile=xP()||SP()}get(){return GI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(t,e){Br(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Lr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Lr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Lr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],YI=new _l(3e4,6e4);function om(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Wo(t,e,n,r,i={}){return B0(t,i,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const u=xl({key:t.config.apiKey,...l}).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const p={method:e,headers:h,...a};return bP()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&Gu(t.emulatorConfig.host)&&(p.credentials="include"),$0.fetch()(await V0(t,t.config.apiHost,n,u),p)})}async function B0(t,e,n){t._canInitEmulator=!1;const r={...JI,...e};try{const i=new eR(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw qc(t,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const u=a.ok?l.errorMessage:l.error.message,[h,p]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw qc(t,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw qc(t,"email-already-in-use",l);if(h==="USER_DISABLED")throw qc(t,"user-disabled",l);const g=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw F0(t,g,p);$r(t,g)}}catch(i){if(i instanceof $s)throw i;$r(t,"network-request-failed",{message:String(i)})}}async function XI(t,e,n,r,i={}){const a=await Wo(t,e,n,r,i);return"mfaPendingCredential"in a&&$r(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function V0(t,e,n,r){const i=`${e}${n}?${r}`,a=t,l=a.config.emulator?im(t.config,i):`${t.config.apiScheme}://${i}`;return ZI.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}class eR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(fr(this.auth,"network-request-failed")),YI.get())})}}function qc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=fr(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tR(t,e){return Wo(t,"POST","/v1/accounts:delete",e)}async function Su(t,e){return Wo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function nR(t,e=!1){const n=zo(t),r=await n.getIdToken(e),i=am(r);Ue(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,l=a?.sign_in_provider;return{claims:i,token:r,authTime:Za(mh(i.auth_time)),issuedAtTime:Za(mh(i.iat)),expirationTime:Za(mh(i.exp)),signInProvider:l||null,signInSecondFactor:a?.sign_in_second_factor||null}}function mh(t){return Number(t)*1e3}function am(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return su("JWT malformed, contained fewer than 3 sections"),null;try{const i=N0(n);return i?JSON.parse(i):(su("Failed to decode base64 JWT payload"),null)}catch(i){return su("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Dw(t){const e=am(t);return Ue(e,"internal-error"),Ue(typeof e.exp<"u","internal-error"),Ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof $s&&rR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function rR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Za(this.lastLoginAt),this.creationTime=Za(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ku(t){const e=t.auth,n=await t.getIdToken(),r=await ul(t,Su(e,{idToken:n}));Ue(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=i.providerUserInfo?.length?z0(i.providerUserInfo):[],l=oR(t.providerData,a),u=t.isAnonymous,h=!(t.email&&i.passwordHash)&&!l?.length,p=u?h:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new mp(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,g)}async function iR(t){const e=zo(t);await ku(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oR(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function z0(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aR(t,e){const n=await B0(t,{},async()=>{const r=xl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,l=await V0(t,i,"/v1/token",`key=${a}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:r};return t.emulatorConfig&&Gu(t.emulatorConfig.host)&&(h.credentials="include"),$0.fetch()(l,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function lR(t,e){return Wo(t,"POST","/v2/accounts:revokeToken",om(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ue(e.idToken,"internal-error"),Ue(typeof e.idToken<"u","internal-error"),Ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Dw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ue(e.length!==0,"internal-error");const n=Dw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await aR(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,l=new Eo;return r&&(Ue(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(Ue(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),a&&(Ue(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Eo,this.toJSON())}_performRefresh(){return Lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(t,e){Ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Yn{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new sR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new mp(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ul(this,this.stsTokenManager.getToken(this.auth,e));return Ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return nR(this,e)}reload(){return iR(this)}_assign(e){this!==e&&(Ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Yn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ku(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dr(this.auth.app))return Promise.reject(mi(this.auth));const e=await this.getIdToken();return await ul(this,tR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,l=n.photoURL??void 0,u=n.tenantId??void 0,h=n._redirectEventId??void 0,p=n.createdAt??void 0,g=n.lastLoginAt??void 0,{uid:v,emailVerified:w,isAnonymous:S,providerData:E,stsTokenManager:x}=n;Ue(v&&x,e,"internal-error");const _=Eo.fromJSON(this.name,x);Ue(typeof v=="string",e,"internal-error"),ms(r,e.name),ms(i,e.name),Ue(typeof w=="boolean",e,"internal-error"),Ue(typeof S=="boolean",e,"internal-error"),ms(a,e.name),ms(l,e.name),ms(u,e.name),ms(h,e.name),ms(p,e.name),ms(g,e.name);const T=new Yn({uid:v,auth:e,email:i,emailVerified:w,displayName:r,isAnonymous:S,photoURL:l,phoneNumber:a,tenantId:u,stsTokenManager:_,createdAt:p,lastLoginAt:g});return E&&Array.isArray(E)&&(T.providerData=E.map(C=>({...C}))),h&&(T._redirectEventId=h),T}static async _fromIdTokenResponse(e,n,r=!1){const i=new Eo;i.updateFromServerResponse(n);const a=new Yn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ku(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Ue(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?z0(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!a?.length,u=new Eo;u.updateFromIdToken(r);const h=new Yn({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:l}),p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new mp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(h,p),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw=new Map;function Ur(t){Br(t instanceof Function,"Expected a class definition");let e=Mw.get(t);return e?(Br(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Mw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}W0.type="NONE";const Lw=W0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(t,e,n){return`firebase:${t}:${e}:${n}`}class Co{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=iu(this.userKey,i.apiKey,a),this.fullPersistenceKey=iu("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Su(this.auth,{idToken:e}).catch(()=>{});return n?Yn._fromGetAccountInfoResponse(this.auth,n,e):null}return Yn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Co(Ur(Lw),e,r);const i=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=i[0]||Ur(Lw);const l=iu(r,e.config.apiKey,e.name);let u=null;for(const p of n)try{const g=await p._get(l);if(g){let v;if(typeof g=="string"){const w=await Su(e,{idToken:g}).catch(()=>{});if(!w)break;v=await Yn._fromGetAccountInfoResponse(e,w,g)}else v=Yn._fromJSON(e,g);p!==a&&(u=v),a=p;break}}catch{}const h=i.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new Co(a,e,r):(a=h[0],u&&await a._set(l,u.toJSON()),await Promise.all(n.map(async p=>{if(p!==a)try{await p._remove(l)}catch{}})),new Co(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(G0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(H0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(J0(e))return"Blackberry";if(Z0(e))return"Webos";if(q0(e))return"Safari";if((e.includes("chrome/")||K0(e))&&!e.includes("edge/"))return"Chrome";if(Q0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function H0(t=ln()){return/firefox\//i.test(t)}function q0(t=ln()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function K0(t=ln()){return/crios\//i.test(t)}function G0(t=ln()){return/iemobile/i.test(t)}function Q0(t=ln()){return/android/i.test(t)}function J0(t=ln()){return/blackberry/i.test(t)}function Z0(t=ln()){return/webos/i.test(t)}function lm(t=ln()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function cR(t=ln()){return lm(t)&&!!window.navigator?.standalone}function uR(){return kP()&&document.documentMode===10}function Y0(t=ln()){return lm(t)||Q0(t)||Z0(t)||J0(t)||/windows phone/i.test(t)||G0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(t,e=[]){let n;switch(t){case"Browser":n=Uw(ln());break;case"Worker":n=`${Uw(ln())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${bl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((l,u)=>{try{const h=e(a);l(h)}catch(h){u(h)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fR(t,e={}){return Wo(t,"GET","/v2/passwordPolicy",om(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=6;class pR{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??hR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fw(this),this.idTokenSubscription=new Fw(this),this.beforeStateQueue=new dR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=U0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ur(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Co.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Su(this,{idToken:e}),r=await Yn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Dr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,l=r?._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&u?.user&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ku(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=QI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Dr(this.app))return Promise.reject(mi(this));const n=e?zo(e):null;return n&&Ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Dr(this.app)?Promise.reject(mi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Dr(this.app)?Promise.reject(mi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ur(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await fR(this),n=new pR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await lR(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ur(e)||this._popupRedirectResolver;Ue(n,this,"argument-error"),this.redirectPersistenceManager=await Co.create(this,[Ur(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let l=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ue(u,this,"internal-error"),u.then(()=>{l||a(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,r,i);return()=>{l=!0,h()}}else{const h=e.addObserver(n);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=X0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Dr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&qI(`Error while retrieving App Check token: ${e.error}`),e?.token}}function cm(t){return zo(t)}class Fw{constructor(e){this.auth=e,this.observer=null,this.addObserver=IP(n=>this.observer=n)}get next(){return Ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let um={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gR(t){um=t}function yR(t){return um.loadJS(t)}function vR(){return um.gapiScript}function wR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(t,e){const n=A0(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Ao(a,e??{}))return i;$r(i,"already-initialized")}return n.initialize({options:e})}function bR(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Ur);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function _R(t,e,n){const r=cm(t);Ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=e_(e),{host:l,port:u}=SR(e),h=u===null?"":`:${u}`,p={url:`${a}//${l}${h}/`},g=Object.freeze({host:l,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ue(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ue(Ao(p,r.config.emulator)&&Ao(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,Gu(l)?(gP(`${a}//${l}${h}`),wP("Auth",!0)):kR()}function e_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function SR(t){const e=e_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:$w(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:$w(l)}}}function $w(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function kR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Lr("not implemented")}_getIdTokenResponse(e){return Lr("not implemented")}_linkToIdToken(e,n){return Lr("not implemented")}_getReauthenticationResolver(e){return Lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(t,e){return XI(t,"POST","/v1/accounts:signInWithIdp",om(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER="http://localhost";class vi extends t_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new vi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):$r("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=n;if(!r||!i)return null;const l=new vi(r,i);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return No(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,No(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,No(e,n)}buildRequest(){const e={requestUri:ER,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=xl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl extends n_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss extends Sl{constructor(){super("facebook.com")}static credential(e){return vi._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ss.credential(e.oauthAccessToken)}catch{return null}}}Ss.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ss.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks extends Sl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return vi._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ks.credential(n,r)}catch{return null}}}ks.GOOGLE_SIGN_IN_METHOD="google.com";ks.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends Sl{constructor(){super("github.com")}static credential(e){return vi._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Es.credential(e.oauthAccessToken)}catch{return null}}}Es.GITHUB_SIGN_IN_METHOD="github.com";Es.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends Sl{constructor(){super("twitter.com")}static credential(e,n){return vi._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Cs.credentialFromTaggedObject(e)}static credentialFromError(e){return Cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Cs.credential(n,r)}catch{return null}}}Cs.TWITTER_SIGN_IN_METHOD="twitter.com";Cs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await Yn._fromIdTokenResponse(e,r,i),l=Bw(r);return new Do({user:a,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Bw(r);return new Do({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Bw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu extends $s{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Eu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Eu(e,n,r,i)}}function r_(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Eu._fromErrorAndOperation(t,a,e,r):a})}async function CR(t,e,n=!1){const r=await ul(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Do._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NR(t,e,n=!1){const{auth:r}=t;if(Dr(r.app))return Promise.reject(mi(r));const i="reauthenticate";try{const a=await ul(t,r_(r,i,e,t),n);Ue(a.idToken,r,"internal-error");const l=am(a.idToken);Ue(l,r,"internal-error");const{sub:u}=l;return Ue(t.uid===u,r,"user-mismatch"),Do._forOperation(t,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&$r(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TR(t,e,n=!1){if(Dr(t.app))return Promise.reject(mi(t));const r="signIn",i=await r_(t,r,e),a=await Do._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}function jR(t,e,n,r){return zo(t).onIdTokenChanged(e,n,r)}function PR(t,e,n){return zo(t).beforeAuthStateChanged(e,n)}const Cu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Cu,"1"),this.storage.removeItem(Cu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=1e3,RR=10;class i_ extends s_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Y0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,u,h)=>{this.notifyListeners(l,h)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);uR()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,RR):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},IR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}i_.type="LOCAL";const AR=i_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_ extends s_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}o_.type="SESSION";const a_=o_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Qu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,l=this.handlersMap[i];if(!l?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(l).map(async p=>p(n.origin,a)),h=await OR(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,l;return new Promise((u,h)=>{const p=dm("",20);i.port1.start();const g=setTimeout(()=>{h(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(v){const w=v;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),u(w.data.response);break;default:clearTimeout(g),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(){return window}function MR(t){hr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(){return typeof hr().WorkerGlobalScope<"u"&&typeof hr().importScripts=="function"}async function LR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function UR(){return navigator?.serviceWorker?.controller||null}function FR(){return l_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="firebaseLocalStorageDb",$R=1,Nu="firebaseLocalStorage",u_="fbase_key";class kl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ju(t,e){return t.transaction([Nu],e?"readwrite":"readonly").objectStore(Nu)}function BR(){const t=indexedDB.deleteDatabase(c_);return new kl(t).toPromise()}function gp(){const t=indexedDB.open(c_,$R);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Nu,{keyPath:u_})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Nu)?e(r):(r.close(),await BR(),e(await gp()))})})}async function Vw(t,e,n){const r=Ju(t,!0).put({[u_]:e,value:n});return new kl(r).toPromise()}async function VR(t,e){const n=Ju(t,!1).get(e),r=await new kl(n).toPromise();return r===void 0?null:r.value}function zw(t,e){const n=Ju(t,!0).delete(e);return new kl(n).toPromise()}const zR=800,WR=3;class d_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>WR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return l_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qu._getInstance(FR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await LR(),!this.activeServiceWorker)return;this.sender=new DR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||UR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gp();return await Vw(e,Cu,"1"),await zw(e,Cu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Vw(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>VR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>zw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Ju(i,!1).getAll();return new kl(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}d_.type="LOCAL";const HR=d_;new _l(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(t,e){return e?Ur(e):(Ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm extends t_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return No(e,this._buildIdpRequest())}_linkToIdToken(e,n){return No(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return No(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function KR(t){return TR(t.auth,new fm(t),t.bypassAuthState)}function GR(t){const{auth:e,user:n}=t;return Ue(n,e,"internal-error"),NR(n,new fm(t),t.bypassAuthState)}async function QR(t){const{auth:e,user:n}=t;return Ue(n,e,"internal-error"),CR(n,new fm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:l,type:u}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return KR;case"linkViaPopup":case"linkViaRedirect":return QR;case"reauthViaPopup":case"reauthViaRedirect":return GR;default:$r(this.auth,"internal-error")}}resolve(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Br(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=new _l(2e3,1e4);class xo extends f_{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,xo.currentPopupAction&&xo.currentPopupAction.cancel(),xo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ue(e,this.auth,"internal-error"),e}async onExecution(){Br(this.filter.length===1,"Popup operations only handle one event");const e=dm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,JR.get())};e()}}xo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR="pendingRedirect",ou=new Map;class YR extends f_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ou.get(this.auth._key());if(!e){try{const r=await XR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ou.set(this.auth._key(),e)}return this.bypassAuthState||ou.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function XR(t,e){const n=nA(e),r=tA(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function eA(t,e){ou.set(t._key(),e)}function tA(t){return Ur(t._redirectPersistence)}function nA(t){return iu(ZR,t.config.apiKey,t.name)}async function rA(t,e,n=!1){if(Dr(t.app))return Promise.reject(mi(t));const r=cm(t),i=qR(r,e),l=await new YR(r,i,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA=600*1e3;class iA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!oA(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!h_(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError(fr(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sA&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ww(e))}saveEventToCache(e){this.cachedEventUids.add(Ww(e)),this.lastProcessedEventTime=Date.now()}}function Ww(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function h_({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function oA(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return h_(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aA(t,e={}){return Wo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cA=/^https?/;async function uA(t){if(t.config.emulator)return;const{authorizedDomains:e}=await aA(t);for(const n of e)try{if(dA(n))return}catch{}$r(t,"unauthorized-domain")}function dA(t){const e=pp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!cA.test(n))return!1;if(lA.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA=new _l(3e4,6e4);function Hw(){const t=hr().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function hA(t){return new Promise((e,n)=>{function r(){Hw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Hw(),n(fr(t,"network-request-failed"))},timeout:fA.get()})}if(hr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(hr().gapi?.load)r();else{const i=wR("iframefcb");return hr()[i]=()=>{gapi.load?r():n(fr(t,"network-request-failed"))},yR(`${vR()}?onload=${i}`).catch(a=>n(a))}}).catch(e=>{throw au=null,e})}let au=null;function pA(t){return au=au||hA(t),au}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=new _l(5e3,15e3),gA="__/auth/iframe",yA="emulator/auth/iframe",vA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xA(t){const e=t.config;Ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?im(e,yA):`https://${t.config.authDomain}/${gA}`,r={apiKey:e.apiKey,appName:t.name,v:bl},i=wA.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${xl(r).slice(1)}`}async function bA(t){const e=await pA(t),n=hr().gapi;return Ue(n,t,"internal-error"),e.open({where:document.body,url:xA(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vA,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const l=fr(t,"network-request-failed"),u=hr().setTimeout(()=>{a(l)},mA.get());function h(){hr().clearTimeout(u),i(r)}r.ping(h).then(h,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},SA=500,kA=600,EA="_blank",CA="http://localhost";class qw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function NA(t,e,n,r=SA,i=kA){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const h={..._A,width:r.toString(),height:i.toString(),top:a,left:l},p=ln().toLowerCase();n&&(u=K0(p)?EA:n),H0(p)&&(e=e||CA,h.scrollbars="yes");const g=Object.entries(h).reduce((w,[S,E])=>`${w}${S}=${E},`,"");if(cR(p)&&u!=="_self")return TA(e||"",u),new qw(null);const v=window.open(e||"",u,g);Ue(v,t,"popup-blocked");try{v.focus()}catch{}return new qw(v)}function TA(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="__/auth/handler",PA="emulator/auth/handler",IA=encodeURIComponent("fac");async function Kw(t,e,n,r,i,a){Ue(t.config.authDomain,t,"auth-domain-config-required"),Ue(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:bl,eventId:i};if(e instanceof n_){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",PP(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,v]of Object.entries({}))l[g]=v}if(e instanceof Sl){const g=e.getScopes().filter(v=>v!=="");g.length>0&&(l.scopes=g.join(","))}t.tenantId&&(l.tid=t.tenantId);const u=l;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const h=await t._getAppCheckToken(),p=h?`#${IA}=${encodeURIComponent(h)}`:"";return`${RA(t)}?${xl(u).slice(1)}${p}`}function RA({config:t}){return t.emulator?im(t,PA):`https://${t.authDomain}/${jA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh="webStorageSupport";class AA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=a_,this._completeRedirectFn=rA,this._overrideRedirectResult=eA}async _openPopup(e,n,r,i){Br(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await Kw(e,n,r,pp(),i);return NA(e,a,dm())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await Kw(e,n,r,pp(),i);return MR(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(Br(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await bA(e),r=new iA(e);return n.register("authEvent",i=>(Ue(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(gh,{type:gh},i=>{const a=i?.[0]?.[gh];a!==void 0&&n(!!a),$r(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=uA(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Y0()||q0()||lm()}}const OA=AA;var Gw="@firebase/auth",Qw="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LA(t){ll(new Oo("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:u}=r.options;Ue(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:l,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:X0(t)},p=new mR(r,i,a,h);return bR(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ll(new Oo("auth-internal",e=>{const n=cm(e.getProvider("auth").getImmediate());return(r=>new DA(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ko(Gw,Qw,MA(t)),ko(Gw,Qw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=300,FA=j0("authIdTokenMaxAge")||UA;let Jw=null;const $A=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>FA)return;const i=n?.token;Jw!==i&&(Jw=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function BA(t=RI()){const e=A0(t,"auth");if(e.isInitialized())return e.getImmediate();const n=xR(t,{popupRedirectResolver:OA,persistence:[HR,AR,a_]}),r=j0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=$A(a.toString());PR(n,l,()=>l(n.currentUser)),jR(n,u=>l(u))}}const i=pP("auth");return i&&_R(n,`http://${i}`),n}function VA(){return document.getElementsByTagName("head")?.[0]??document}gR({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=fr("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",VA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LA("Browser");function zA(){const t={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0};return Object.entries(t).filter(([,n])=>!n).map(([n])=>n).length>0?(console.warn("[Firebase] Missing Firebase configuration. Using Supabase for authentication instead."),null):t}const Zw=zA();let Yw=null,Tu=null;Zw&&(Yw=O0(Zw),Tu=BA(Yw));async function p_(t=!1){if(!Tu)return null;const e=Tu.currentUser;if(!e)return null;try{return await e.getIdToken(t)}catch(n){return console.error("Failed to retrieve Firebase ID token",n),null}}const WA="demo.userId";function HA(t){if(typeof t!="string")return null;const e=t.trim();return e.length>0?e:null}function Zu(){if(typeof window>"u")return null;try{return HA(window.localStorage.getItem(WA))}catch{return null}}const qA={};var KA={};const Xw=typeof import.meta<"u"&&qA?.VITE_API_BASE||typeof process<"u"&&KA?.NEXT_PUBLIC_API_BASE||"",ex=typeof Xw=="string"?Xw.trim().replace(/\/+$/,""):"";function GA(t){if(/^https?:/i.test(t))return t;const e=t.startsWith("/")?t:`/${t}`;return ex?`${ex}${e}`:e}async function QA(){try{const n=await Tu?.currentUser?.getIdToken?.();if(typeof n=="string"&&n.trim())return{Authorization:`Bearer ${n}`}}catch(e){console.warn("Failed to resolve Firebase ID token",e)}const t=Zu();return t?{"x-demo-user-id":t}:{}}function JA(t){if(!t)return{};if(t instanceof Headers){const e={};return t.forEach((n,r)=>{e[r]=n}),e}return Array.isArray(t)?t.reduce((e,[n,r])=>(e[String(n)]=String(r),e),{}):{...t}}function Bs(t,e={}){const n=GA(t);return fetch(n,{mode:"cors",credentials:"include",...e})}async function El(t,e={}){const n=JA(e.headers);Object.keys(n).some(u=>u.toLowerCase()==="content-type")||(n["Content-Type"]="application/json");const i=await QA(),a={...n,...i},l=await Bs(t,{...e,headers:a});if(!l.ok){const u=await l.text().catch(()=>"");throw new Error(`API ${l.status}: ${u||l.statusText}`)}if(l.status===204)return null;try{return await l.json()}catch{return null}}async function m_(t,e){const n=await Bs(t,e);try{return await n.json()}catch{return}}const ZA=Object.freeze(Object.defineProperty({__proto__:null,api:Bs,apiFetch:El,apiJSON:m_},Symbol.toStringTag,{value:"Module"}));function YA(t){if(!t||typeof t!="object")return!1;const e=t;if(e.ok!==!0)return!1;const{ts:n}=e;if(typeof n=="number")return Number.isFinite(n);if(typeof n=="string"){if(!n.trim())return!1;const r=Date.parse(n);return Number.isFinite(r)}return!1}let hi,Kc=null;async function XA(){const t=new AbortController,e=setTimeout(()=>t.abort(),4e3);try{const n=await m_("/api/health",{signal:t.signal});return YA(n)}catch{return!1}finally{clearTimeout(e)}}function eO(){return hi!==void 0?Promise.resolve(hi):(Kc||(Kc=XA().then(t=>(hi=t,t)).finally(()=>{Kc=null})),Kc)}function hm(){const[t,e]=b.useState(()=>hi===void 0?null:hi);return b.useEffect(()=>{let n=!0;return hi!==void 0?(e(hi),()=>{n=!1}):(eO().then(r=>{n&&e(r)}),()=>{n=!1})},[]),t}const tO=1,nO=1e4;let yh=0;function rO(){return yh=(yh+1)%Number.MAX_SAFE_INTEGER,yh.toString()}const Ya=new Map,tx=t=>{if(Ya.has(t))return;const e=setTimeout(()=>{Ya.delete(t),Xa({type:"REMOVE_TOAST",toastId:t})},nO);Ya.set(t,e)},sO=t=>{const e=Ya.get(t);e&&(clearTimeout(e),Ya.delete(t))},iO=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts.filter(n=>n.id!==e.toast.id)].slice(0,tO)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?tx(n):t.toasts.forEach(r=>{tx(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},lu=[];let cu={toasts:[]};function Xa(t){cu=iO(cu,t),lu.forEach(e=>{e(cu)})}const Gc=(t={})=>{const{id:e,onOpenChange:n,...r}=t,i=e??rO();sO(i);const a=u=>Xa({type:"UPDATE_TOAST",toast:{...u,id:i}}),l=()=>Xa({type:"DISMISS_TOAST",toastId:i});return Xa({type:"ADD_TOAST",toast:{...r,id:i,open:!0,onOpenChange:u=>{u||l(),n?.(u)}}}),{id:i,dismiss:l,update:a}},yp=Object.assign(Gc,{dismiss:t=>Xa({type:"DISMISS_TOAST",toastId:t}),success:(t,e)=>Gc({...e,title:t,variant:e?.variant??"default"}),error:(t,e)=>Gc({...e,title:t,variant:e?.variant??"destructive"}),loading:(t,e)=>Gc({...e,title:t,duration:e?.duration??15e3,variant:e?.variant??"default"})});function g_(){const[t,e]=b.useState(cu);return b.useEffect(()=>(lu.push(e),()=>{const n=lu.indexOf(e);n>-1&&lu.splice(n,1)}),[t]),{...t,toast:yp,dismiss:n=>yp.dismiss(n)}}function y_(){if(typeof window>"u")return null;try{return window.localStorage??null}catch{return null}}function oO(t,e){const n=y_();if(!n)return null;try{const r=n.getItem(t);if(!r)return null;const i=JSON.parse(r);return e?e(i):i}catch(r){return console.warn("storage:readJSON",r),null}}function aO(t,e){const n=y_();if(n)try{if(e==null){n.removeItem(t);return}n.setItem(t,JSON.stringify(e))}catch(r){console.warn("storage:writeJSON",r)}}const lO="portfolio.positions";function v_(t){return`${lO}.${t}`}function w_(t){if(!t||typeof t!="object")throw new Error("Invalid position payload");const e=typeof t.id=="string"&&t.id.trim()?t.id.trim():"";if(!e)throw new Error("Position is missing an id");const n=typeof t.symbol=="string"?t.symbol.trim().toUpperCase():"",r=Number(t.quantity??t.qty??0),i=Number(t.entryPrice??t.avgPrice??0);if(!Number.isFinite(r)||!Number.isFinite(i))throw new Error("Invalid position data");const a=typeof t.notes=="string"&&t.notes.trim().length>0?t.notes.trim():null,l=typeof t.createdAt=="string"?t.createdAt:new Date().toISOString(),u=typeof t.updatedAt=="string"?t.updatedAt:l;return{id:e,symbol:n,quantity:r,entryPrice:i,notes:a,createdAt:l,updatedAt:u}}function vh(t){return oO(v_(t))}function cO(t,e){aO(v_(t),e)}async function uO(t){const e=await El("/api/portfolio/positions",{method:"GET"}),r=(Array.isArray(e?.data)?e.data:[]).map(a=>w_(a)),i=typeof e?.userId=="string"&&e.userId.trim()?e.userId.trim():null;return{data:r,userId:i}}async function dO(t,e){const r={symbol:typeof e.symbol=="string"?e.symbol.toUpperCase().trim():"",quantity:Number(e.quantity),entryPrice:Number(e.entryPrice),notes:e.notes??null};if(!r.symbol||Number.isNaN(r.quantity)||Number.isNaN(r.entryPrice))throw new Error("Invalid form values.");const i=await El("/api/portfolio/positions",{method:"POST",body:JSON.stringify(r)});return w_(i?.data)}async function fO(t,e){if(!(typeof t=="string"?t.trim():""))throw new Error("Missing position id");await El(`/api/portfolio/positions/${encodeURIComponent(t)}`,{method:"DELETE"})}const hO="__no_user__";function Yu(t){return["portfolio","positions",t??hO]}async function x_(){const{data:t,error:e}=await er.from("positions").select("*").order("created_at",{ascending:!1});if(e)throw new Error(e.message);return t??[]}async function pO(t,e,n,r,i){const{error:a}=await er.from("positions").upsert([{user_id:t,symbol:e,qty:n,entry_price:r,note:null}],{onConflict:"user_id,symbol"});if(a)throw new Error(a.message)}async function mO(t){const{error:e}=await er.from("positions").delete().eq("id",t);if(e)throw new Error(e.message)}function gO(t,e){if(!Array.isArray(t))return!1;const n=Array.isArray(e)?e:[];if(n.length!==t.length)return!0;if(t.length===0)return!1;for(let r=0;r<t.length;r+=1){const i=t[r],a=n[r];if(!a||i.id!==a.id||i.updatedAt!==a.updatedAt)return!0}return!1}function yO(t,e){const n=Array.isArray(e)?e.length:0;return Array.isArray(t)?t.length>0||n===0?!0:gO(t,e):!1}function vO(t){const e=Number(t.qty),n=Number(t.entry_price);return{id:t.id,symbol:t.symbol?.toUpperCase?.()??"",quantity:Number.isFinite(e)?e:0,entryPrice:Number.isFinite(n)?n:0,notes:t.note??null,createdAt:t.created_at,updatedAt:t.updated_at??t.created_at}}function pm(t={}){const{enabled:e=!0}=t,{user:n}=vr(),{user:r}=Hr(),i=n?.uid??null,a=r?.id??null,l=Zu(),u=a??i??l,h=a?null:u,p=yr(),g=b.useMemo(()=>Yu(u),[u]),v=b.useMemo(()=>u?vh(u):null,[u]),w=v??void 0,S=En({queryKey:g,queryFn:async()=>{if(a)return(await x_()).map(vO);if(!h)return[];const x=await uO(),_=Array.isArray(x?.data)?x.data:[],T=typeof x?.userId=="string"&&x.userId.trim()?x.userId.trim():null;if(T&&T!==h){const C=p.getQueryData(g);if(Array.isArray(C)&&C.length>0)return C;const N=vh(h);if(Array.isArray(N)&&N.length>0)return N}return _},initialData:w,placeholderData:x=>x??w??[],staleTime:300*1e3,gcTime:1440*60*1e3,enabled:e&&(!!a||!!u),refetchOnWindowFocus:!1,keepPreviousData:!0,retry:(x,_)=>(_ instanceof Error?_.message:String(_)).includes("API 401")?!1:x<2,onError:x=>{(x instanceof Error?x.message:String(x)).includes("API 401")&&yp.error("Authentication required",{id:"portfolio-auth-error",description:"Sign in to manage your portfolio positions."})},onSuccess:x=>{if(!u)return;const _=vh(u);yO(x,_)&&cO(u,x)}});b.useEffect(()=>{if(typeof window>"u")return;const x=_=>{_.key==="portfolio.refresh"&&p.invalidateQueries({queryKey:g})};return window.addEventListener("storage",x),()=>window.removeEventListener("storage",x)},[p,g]);const E=S.data??(u?v??[]:[]);return{...S,data:E}}const nx=t=>{let e;const n=new Set,r=(p,g)=>{const v=typeof p=="function"?p(e):p;if(!Object.is(v,e)){const w=e;e=g??(typeof v!="object"||v===null)?v:Object.assign({},e,v),n.forEach(S=>S(e,w))}},i=()=>e,u={setState:r,getState:i,getInitialState:()=>h,subscribe:p=>(n.add(p),()=>n.delete(p))},h=e=t(r,i,u);return u},wO=(t=>t?nx(t):nx),xO=t=>t;function bO(t,e=xO){const n=ct.useSyncExternalStore(t.subscribe,ct.useCallback(()=>e(t.getState()),[t,e]),ct.useCallback(()=>e(t.getInitialState()),[t,e]));return ct.useDebugValue(n),n}const rx=t=>{const e=wO(t),n=r=>bO(e,r);return Object.assign(n,e),n},_O=(t=>t?rx(t):rx),sx=t=>Symbol.iterator in t,ix=t=>"entries"in t,ox=(t,e)=>{const n=t instanceof Map?t:new Map(t.entries()),r=e instanceof Map?e:new Map(e.entries());if(n.size!==r.size)return!1;for(const[i,a]of n)if(!r.has(i)||!Object.is(a,r.get(i)))return!1;return!0},SO=(t,e)=>{const n=t[Symbol.iterator](),r=e[Symbol.iterator]();let i=n.next(),a=r.next();for(;!i.done&&!a.done;){if(!Object.is(i.value,a.value))return!1;i=n.next(),a=r.next()}return!!i.done&&!!a.done};function kO(t,e){return Object.is(t,e)?!0:typeof t!="object"||t===null||typeof e!="object"||e===null||Object.getPrototypeOf(t)!==Object.getPrototypeOf(e)?!1:sx(t)&&sx(e)?ix(t)&&ix(e)?ox(t,e):SO(t,e):ox({entries:()=>Object.entries(t)},{entries:()=>Object.entries(e)})}function EO(t){const e=ct.useRef(void 0);return n=>{const r=t(n);return kO(e.current,r)?e.current:e.current=r}}function wh(t){if(!t)return null;const e=t.trim();return e?e.toUpperCase():null}const ax=_O((t,e)=>({prices:{},setPrice:(n,r)=>{const i=wh(n),a=Number(r);!i||!Number.isFinite(a)||t(l=>l.prices[i]===a?l:{prices:{...l.prices,[i]:a}})},setPrices:n=>{const r=Object.entries(n);r.length!==0&&t(i=>{let a=!1;const l={...i.prices};for(const[u,h]of r){const p=wh(u),g=Number(h);!p||!Number.isFinite(g)||l[p]!==g&&(l[p]=g,a=!0)}return a?{prices:l}:i})},getPrice:n=>{const r=wh(n);if(r)return e().prices[r]},reset:()=>{t({prices:{}})}}));function ju(){const t=ax(EO(n=>({prices:n.prices,setPrice:n.setPrice,setPrices:n.setPrices,reset:n.reset}))),e=b.useCallback(n=>ax.getState().getPrice(n),[]);return{...t,getPrice:e}}function CO(t){return Array.from(new Set(t.map(e=>e.trim().toUpperCase()).filter(Boolean)))}async function NO(t){if(t.length===0)return{};const e="https://api.binance.com/api/v3/ticker/price?symbols="+encodeURIComponent(JSON.stringify(t));try{const n=await fetch(e);if(!n.ok)return{};const r=await n.json(),i={};for(const a of r){const l=a?.symbol?.toUpperCase?.(),u=Number(a?.price);l&&Number.isFinite(u)&&(i[l]=u)}return i}catch{return{}}}function b_(){const{data:t=[]}=pm(),{prices:e,setPrices:n,getPrice:r}=ju();return b.useEffect(()=>{if(typeof window>"u"||!t.length)return;const i=CO(t.map(h=>h.symbol));if(i.length===0)return;let a=!1;async function l(){const h=await NO(i);!a&&Object.keys(h).length>0&&n(h)}l();const u=window.setInterval(l,5e3);return()=>{a=!0,window.clearInterval(u)}},[t,n]),b.useMemo(()=>{let i=t.length,a=0,l=0;for(const p of t){const g=Number(p.quantity)||0,v=Number(p.entryPrice)||0,w=p.symbol.toUpperCase(),S=e[w],E=Number.isFinite(S)?S:r(p.symbol),x=typeof E=="number"&&Number.isFinite(E)?E:v;a+=g*v,l+=g*x}const u=l-a,h=a>0?u/a*100:0;return{count:i,cost:a,market:l,pnl:u,pnlPct:h}},[t,e,r])}function lx(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function __(...t){return e=>{let n=!1;const r=t.map(i=>{const a=lx(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():lx(t[i],null)}}}}function Bt(...t){return b.useCallback(__(...t),t)}function dl(t){const e=jO(t),n=b.forwardRef((r,i)=>{const{children:a,...l}=r,u=b.Children.toArray(a),h=u.find(IO);if(h){const p=h.props.children,g=u.map(v=>v===h?b.Children.count(p)>1?b.Children.only(null):b.isValidElement(p)?p.props.children:null:v);return d.jsx(e,{...l,ref:i,children:b.isValidElement(p)?b.cloneElement(p,void 0,g):null})}return d.jsx(e,{...l,ref:i,children:a})});return n.displayName=`${t}.Slot`,n}var TO=dl("Slot");function jO(t){const e=b.forwardRef((n,r)=>{const{children:i,...a}=n;if(b.isValidElement(i)){const l=AO(i),u=RO(a,i.props);return i.type!==b.Fragment&&(u.ref=r?__(r,l):l),b.cloneElement(i,u)}return b.Children.count(i)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var PO=Symbol("radix.slottable");function IO(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===PO}function RO(t,e){const n={...e};for(const r in e){const i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?n[r]=(...u)=>{const h=a(...u);return i(...u),h}:i&&(n[r]=i):r==="style"?n[r]={...i,...a}:r==="className"&&(n[r]=[i,a].filter(Boolean).join(" "))}return{...t,...n}}function AO(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function S_(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=S_(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function k_(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=S_(t))&&(r&&(r+=" "),r+=e);return r}const cx=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,ux=k_,E_=(t,e)=>n=>{var r;if(e?.variants==null)return ux(t,n?.class,n?.className);const{variants:i,defaultVariants:a}=e,l=Object.keys(i).map(p=>{const g=n?.[p],v=a?.[p];if(g===null)return null;const w=cx(g)||cx(v);return i[p][w]}),u=n&&Object.entries(n).reduce((p,g)=>{let[v,w]=g;return w===void 0||(p[v]=w),p},{}),h=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((p,g)=>{let{class:v,className:w,...S}=g;return Object.entries(S).every(E=>{let[x,_]=E;return Array.isArray(_)?_.includes({...a,...u}[x]):{...a,...u}[x]===_})?[...p,v,w]:p},[]);return ux(t,l,h,n?.class,n?.className)},mm="-",OO=t=>{const e=MO(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:l=>{const u=l.split(mm);return u[0]===""&&u.length!==1&&u.shift(),C_(u,e)||DO(l)},getConflictingClassGroupIds:(l,u)=>{const h=n[l]||[];return u&&r[l]?[...h,...r[l]]:h}}},C_=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?C_(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const a=t.join(mm);return e.validators.find(({validator:l})=>l(a))?.classGroupId},dx=/^\[(.+)\]$/,DO=t=>{if(dx.test(t)){const e=dx.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},MO=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return UO(Object.entries(t.classGroups),n).forEach(([a,l])=>{vp(l,r,a,e)}),r},vp=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const a=i===""?e:fx(e,i);a.classGroupId=n;return}if(typeof i=="function"){if(LO(i)){vp(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([a,l])=>{vp(l,fx(e,a),n,r)})})},fx=(t,e)=>{let n=t;return e.split(mm).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},LO=t=>t.isThemeGetter,UO=(t,e)=>e?t.map(([n,r])=>{const i=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([l,u])=>[e+l,u])):a);return[n,i]}):t,FO=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(a,l)=>{n.set(a,l),e++,e>t&&(e=0,r=n,n=new Map)};return{get(a){let l=n.get(a);if(l!==void 0)return l;if((l=r.get(a))!==void 0)return i(a,l),l},set(a,l){n.has(a)?n.set(a,l):i(a,l)}}},N_="!",$O=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],a=e.length,l=u=>{const h=[];let p=0,g=0,v;for(let _=0;_<u.length;_++){let T=u[_];if(p===0){if(T===i&&(r||u.slice(_,_+a)===e)){h.push(u.slice(g,_)),g=_+a;continue}if(T==="/"){v=_;continue}}T==="["?p++:T==="]"&&p--}const w=h.length===0?u:u.substring(g),S=w.startsWith(N_),E=S?w.substring(1):w,x=v&&v>g?v-g:void 0;return{modifiers:h,hasImportantModifier:S,baseClassName:E,maybePostfixModifierPosition:x}};return n?u=>n({className:u,parseClassName:l}):l},BO=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},VO=t=>({cache:FO(t.cacheSize),parseClassName:$O(t),...OO(t)}),zO=/\s+/,WO=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,a=[],l=t.trim().split(zO);let u="";for(let h=l.length-1;h>=0;h-=1){const p=l[h],{modifiers:g,hasImportantModifier:v,baseClassName:w,maybePostfixModifierPosition:S}=n(p);let E=!!S,x=r(E?w.substring(0,S):w);if(!x){if(!E){u=p+(u.length>0?" "+u:u);continue}if(x=r(w),!x){u=p+(u.length>0?" "+u:u);continue}E=!1}const _=BO(g).join(":"),T=v?_+N_:_,C=T+x;if(a.includes(C))continue;a.push(C);const N=i(x,E);for(let I=0;I<N.length;++I){const D=N[I];a.push(T+D)}u=p+(u.length>0?" "+u:u)}return u};function HO(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=T_(e))&&(r&&(r+=" "),r+=n);return r}const T_=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=T_(t[r]))&&(n&&(n+=" "),n+=e);return n};function qO(t,...e){let n,r,i,a=l;function l(h){const p=e.reduce((g,v)=>v(g),t());return n=VO(p),r=n.cache.get,i=n.cache.set,a=u,u(h)}function u(h){const p=r(h);if(p)return p;const g=WO(h,n);return i(h,g),g}return function(){return a(HO.apply(null,arguments))}}const vt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},j_=/^\[(?:([a-z-]+):)?(.+)\]$/i,KO=/^\d+\/\d+$/,GO=new Set(["px","full","screen"]),QO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,JO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ZO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,YO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,XO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,jr=t=>To(t)||GO.has(t)||KO.test(t),gs=t=>Ho(t,"length",a2),To=t=>!!t&&!Number.isNaN(Number(t)),xh=t=>Ho(t,"number",To),Ra=t=>!!t&&Number.isInteger(Number(t)),e2=t=>t.endsWith("%")&&To(t.slice(0,-1)),Ve=t=>j_.test(t),ys=t=>QO.test(t),t2=new Set(["length","size","percentage"]),n2=t=>Ho(t,t2,P_),r2=t=>Ho(t,"position",P_),s2=new Set(["image","url"]),i2=t=>Ho(t,s2,c2),o2=t=>Ho(t,"",l2),Aa=()=>!0,Ho=(t,e,n)=>{const r=j_.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},a2=t=>JO.test(t)&&!ZO.test(t),P_=()=>!1,l2=t=>YO.test(t),c2=t=>XO.test(t),u2=()=>{const t=vt("colors"),e=vt("spacing"),n=vt("blur"),r=vt("brightness"),i=vt("borderColor"),a=vt("borderRadius"),l=vt("borderSpacing"),u=vt("borderWidth"),h=vt("contrast"),p=vt("grayscale"),g=vt("hueRotate"),v=vt("invert"),w=vt("gap"),S=vt("gradientColorStops"),E=vt("gradientColorStopPositions"),x=vt("inset"),_=vt("margin"),T=vt("opacity"),C=vt("padding"),N=vt("saturate"),I=vt("scale"),D=vt("sepia"),A=vt("skew"),L=vt("space"),$=vt("translate"),ee=()=>["auto","contain","none"],z=()=>["auto","hidden","clip","visible","scroll"],K=()=>["auto",Ve,e],q=()=>[Ve,e],J=()=>["",jr,gs],X=()=>["auto",To,Ve],fe=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Q=()=>["solid","dashed","dotted","double","none"],ce=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],H=()=>["start","end","center","between","around","evenly","stretch"],te=()=>["","0",Ve],ne=()=>["auto","avoid","all","avoid-page","page","left","right","column"],O=()=>[To,Ve];return{cacheSize:500,separator:":",theme:{colors:[Aa],spacing:[jr,gs],blur:["none","",ys,Ve],brightness:O(),borderColor:[t],borderRadius:["none","","full",ys,Ve],borderSpacing:q(),borderWidth:J(),contrast:O(),grayscale:te(),hueRotate:O(),invert:te(),gap:q(),gradientColorStops:[t],gradientColorStopPositions:[e2,gs],inset:K(),margin:K(),opacity:O(),padding:q(),saturate:O(),scale:O(),sepia:te(),skew:O(),space:q(),translate:q()},classGroups:{aspect:[{aspect:["auto","square","video",Ve]}],container:["container"],columns:[{columns:[ys]}],"break-after":[{"break-after":ne()}],"break-before":[{"break-before":ne()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...fe(),Ve]}],overflow:[{overflow:z()}],"overflow-x":[{"overflow-x":z()}],"overflow-y":[{"overflow-y":z()}],overscroll:[{overscroll:ee()}],"overscroll-x":[{"overscroll-x":ee()}],"overscroll-y":[{"overscroll-y":ee()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ra,Ve]}],basis:[{basis:K()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ve]}],grow:[{grow:te()}],shrink:[{shrink:te()}],order:[{order:["first","last","none",Ra,Ve]}],"grid-cols":[{"grid-cols":[Aa]}],"col-start-end":[{col:["auto",{span:["full",Ra,Ve]},Ve]}],"col-start":[{"col-start":X()}],"col-end":[{"col-end":X()}],"grid-rows":[{"grid-rows":[Aa]}],"row-start-end":[{row:["auto",{span:[Ra,Ve]},Ve]}],"row-start":[{"row-start":X()}],"row-end":[{"row-end":X()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ve]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ve]}],gap:[{gap:[w]}],"gap-x":[{"gap-x":[w]}],"gap-y":[{"gap-y":[w]}],"justify-content":[{justify:["normal",...H()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...H(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...H(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[C]}],px:[{px:[C]}],py:[{py:[C]}],ps:[{ps:[C]}],pe:[{pe:[C]}],pt:[{pt:[C]}],pr:[{pr:[C]}],pb:[{pb:[C]}],pl:[{pl:[C]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[L]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[L]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Ve,e]}],"min-w":[{"min-w":[Ve,e,"min","max","fit"]}],"max-w":[{"max-w":[Ve,e,"none","full","min","max","fit","prose",{screen:[ys]},ys]}],h:[{h:[Ve,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Ve,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Ve,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Ve,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ys,gs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",xh]}],"font-family":[{font:[Aa]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ve]}],"line-clamp":[{"line-clamp":["none",To,xh]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",jr,Ve]}],"list-image":[{"list-image":["none",Ve]}],"list-style-type":[{list:["none","disc","decimal",Ve]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[T]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[T]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",jr,gs]}],"underline-offset":[{"underline-offset":["auto",jr,Ve]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:q()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ve]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ve]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[T]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...fe(),r2]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",n2]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},i2]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[E]}],"gradient-via-pos":[{via:[E]}],"gradient-to-pos":[{to:[E]}],"gradient-from":[{from:[S]}],"gradient-via":[{via:[S]}],"gradient-to":[{to:[S]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[T]}],"border-style":[{border:[...Q(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[T]}],"divide-style":[{divide:Q()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...Q()]}],"outline-offset":[{"outline-offset":[jr,Ve]}],"outline-w":[{outline:[jr,gs]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:J()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[T]}],"ring-offset-w":[{"ring-offset":[jr,gs]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ys,o2]}],"shadow-color":[{shadow:[Aa]}],opacity:[{opacity:[T]}],"mix-blend":[{"mix-blend":[...ce(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ce()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[h]}],"drop-shadow":[{"drop-shadow":["","none",ys,Ve]}],grayscale:[{grayscale:[p]}],"hue-rotate":[{"hue-rotate":[g]}],invert:[{invert:[v]}],saturate:[{saturate:[N]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[h]}],"backdrop-grayscale":[{"backdrop-grayscale":[p]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[g]}],"backdrop-invert":[{"backdrop-invert":[v]}],"backdrop-opacity":[{"backdrop-opacity":[T]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[l]}],"border-spacing-x":[{"border-spacing-x":[l]}],"border-spacing-y":[{"border-spacing-y":[l]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ve]}],duration:[{duration:O()}],ease:[{ease:["linear","in","out","in-out",Ve]}],delay:[{delay:O()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ve]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[Ra,Ve]}],"translate-x":[{"translate-x":[$]}],"translate-y":[{"translate-y":[$]}],"skew-x":[{"skew-x":[A]}],"skew-y":[{"skew-y":[A]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ve]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ve]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":q()}],"scroll-mx":[{"scroll-mx":q()}],"scroll-my":[{"scroll-my":q()}],"scroll-ms":[{"scroll-ms":q()}],"scroll-me":[{"scroll-me":q()}],"scroll-mt":[{"scroll-mt":q()}],"scroll-mr":[{"scroll-mr":q()}],"scroll-mb":[{"scroll-mb":q()}],"scroll-ml":[{"scroll-ml":q()}],"scroll-p":[{"scroll-p":q()}],"scroll-px":[{"scroll-px":q()}],"scroll-py":[{"scroll-py":q()}],"scroll-ps":[{"scroll-ps":q()}],"scroll-pe":[{"scroll-pe":q()}],"scroll-pt":[{"scroll-pt":q()}],"scroll-pr":[{"scroll-pr":q()}],"scroll-pb":[{"scroll-pb":q()}],"scroll-pl":[{"scroll-pl":q()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ve]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[jr,gs,xh]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},d2=qO(u2);function st(...t){return d2(k_(t))}const Rs=t=>{if(Array.isArray(t))return t;if(t&&typeof t=="object"){const e=t.data;if(Array.isArray(e))return e}return[]},ao=t=>(t??"").toString(),hx=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2});function f2(t){const e=typeof t=="number"?t:typeof t=="string"?Number(t):0;return Number.isFinite(e)?hx.format(e):hx.format(0)}const h2=E_("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-lg hover:shadow-xl hover:bg-primary/95 active:bg-primary/85",destructive:"bg-destructive text-destructive-foreground shadow-lg hover:shadow-xl hover:bg-destructive/95 active:bg-destructive/85",outline:"border-2 border-primary text-primary bg-transparent hover:bg-primary/10 active:bg-primary/20",secondary:"bg-secondary/20 text-secondary border border-secondary hover:bg-secondary/30 active:bg-secondary/40",ghost:"text-foreground hover:bg-muted/40 active:bg-muted/60",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2 text-sm",sm:"h-9 rounded-lg px-3 text-xs",lg:"h-11 rounded-lg px-8 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ke=b.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},a)=>{const l=r?TO:"button";return d.jsx(l,{className:st(h2({variant:e,size:n,className:t})),ref:a,...i})});Ke.displayName="Button";const tt=b.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:st("min-w-0 rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));tt.displayName="Card";const Cn=b.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:st("flex min-w-0 flex-col space-y-1.5 p-6",t),...e}));Cn.displayName="CardHeader";const Nn=b.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:st("min-w-0 break-keep whitespace-normal text-2xl font-semibold leading-none tracking-tight",t),...e}));Nn.displayName="CardTitle";const p2=b.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:st("text-sm text-muted-foreground",t),...e}));p2.displayName="CardDescription";const nt=b.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:st("min-w-0 p-6 pt-0",t),...e}));nt.displayName="CardContent";const I_=b.forwardRef(({className:t,...e},n)=>d.jsx("div",{ref:n,className:st("flex min-w-0 items-center p-6 pt-0",t),...e}));I_.displayName="CardFooter";async function m2(){const t=await fetch("https://api.coingecko.com/api/v3/global",{method:"GET"});if(!t.ok)throw new Error(`CG ${t.status}`);const n=(await t.json())?.data?.market_cap_percentage?.btc;if(typeof n!="number")throw new Error("CG bad payload");return n}function g2(){return En({queryKey:["btcDominance"],queryFn:m2,staleTime:300*1e3,gcTime:1440*60*1e3,refetchOnWindowFocus:!1})}const y2=t=>Number.isFinite(t)?`${t.toFixed(2)}%`:"",v2={"--neon-glow":"hsl(45, 92%, 60%)"};function w2(){const{data:t,isLoading:e,isError:n}=g2(),r=yr();b.useEffect(()=>{if(typeof window>"u")return;const u=()=>{r.invalidateQueries({queryKey:["btcDominance"]})};return window.addEventListener("dashboard:refresh",u),()=>{window.removeEventListener("dashboard:refresh",u)}},[r]);const i=typeof t=="number"&&Number.isFinite(t),a=n||!i?"":y2(t),l=n?"Unavailable":"Share of total crypto market cap";return d.jsxs(tt,{className:"dashboard-card neon-hover bg-gradient-to-br from-amber-400/5 to-amber-500/10 flex flex-col",style:v2,children:[d.jsx(nt,{className:"p-6 flex-1 flex flex-col justify-between gap-3",children:d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-foreground",children:"BTC Dominance"}),d.jsx("p",{className:"text-3xl font-bold text-foreground mt-2",children:e?"":a}),d.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:l})]})}),d.jsx(I_,{className:"pt-0 px-6 pb-6",children:d.jsx("span",{className:"text-xs opacity-70",children:"Source: CoinGecko"})})]})}const x2="gainers_data_cache",b2="gainers_data_timestamp",_2=t=>t.endsWith("USDT")?t.slice(0,-4):t;function S2(){const[t,e]=b.useState([]),[n,r]=b.useState(null),i=()=>{try{const h=localStorage.getItem(x2),p=localStorage.getItem(b2);if(h&&p){const v=JSON.parse(h).slice(0,3).map(S=>({symbol:S.symbol,change24h:typeof S.change24h=="number"?S.change24h:parseFloat(S.change24h||"0")}));e(v);const w=new Date(p);return r(w),!0}}catch(h){console.error("Error loading gainers from cache:",h)}return!1},a=async()=>{try{const h=await fetch("/api/market/gainers");if(!h.ok)return;const p=await h.json(),g=Array.isArray(p)?p:p?.rows;if(!Array.isArray(g))return;const v=S=>{if(typeof S=="number")return Number.isFinite(S)?S:null;if(typeof S=="string"){const E=Number(S);return Number.isFinite(E)?E:null}return null},w=g.slice(0,3).map(S=>({symbol:S.symbol||S.pair||S.ticker||"",change24h:v(S.changePct)??v(S.change24h)??v(S.priceChangePercent)??0})).filter(S=>S.symbol);w.length>0&&(e(w),r(new Date))}catch(h){console.error("Error fetching gainers fallback:",h)}};b.useEffect(()=>{i()||a();const p=()=>{i()};window.addEventListener("storage",p);const g=setInterval(i,5e3);return()=>{window.removeEventListener("storage",p),clearInterval(g)}},[]);const l=h=>h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),u=h=>`${h>=0?"+":""}${h.toFixed(2)}%`;return d.jsx(wt,{to:"/gainers",className:"block h-full",children:d.jsx(tt,{className:"dashboard-card neon-hover bg-gradient-to-br from-green-500/5 to-green-500/10 h-auto sm:h-full cursor-pointer",style:{"--neon-glow":"hsl(142, 70%, 50%)"},children:d.jsxs(nt,{className:"p-2 sm:p-3 md:p-4 lg:p-6 flex flex-col justify-start h-full",children:[d.jsxs("div",{className:"flex items-start justify-between gap-2 mb-3",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("h3",{className:"font-semibold text-foreground text-xs sm:text-sm mb-0.5",children:"Top Gainers"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Market Leaders"})]}),d.jsx(Dj,{className:"w-5 h-5 text-accent flex-shrink-0 mt-0.5"})]}),d.jsx("div",{className:"space-y-1.5 flex-1 mb-2",children:t.length>0?t.map(h=>d.jsxs("div",{className:"flex items-center justify-between text-xs sm:text-sm",children:[d.jsx("span",{className:"font-medium text-foreground",children:_2(h.symbol)}),d.jsx("span",{className:`font-semibold ${h.change24h>=0?"text-accent":"text-destructive"}`,children:u(h.change24h)})]},h.symbol)):d.jsx("p",{className:"text-xs text-muted-foreground",children:"Loading gainers..."})}),d.jsx("div",{className:"text-xs text-primary font-medium mb-2 hover:underline",children:"view more "}),n&&d.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["last updated ",l(n)]})]})})})}async function R_(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}const k2=new Set(["/api/health","/api/scanner/history","/api/market/ticker/BTCUSDT","/api/market/ticker/ETHUSDT","/api/market/gainers"]);function E2(t){if(!t)return t;try{return new URL(t).pathname}catch{const[e]=t.split("?");return e&&(e.startsWith("/")?e:`/${e}`)}return t}function A_(t){const e=E2(t);return e?k2.has(e):!1}async function C2(t,e){const n={};if(e!==void 0&&(n["Content-Type"]="application/json"),!A_(t)){const r=await p_();r&&(n.Authorization=`Bearer ${r}`)}return n}async function el(t,e,n){const r=await Bs(e,{method:t,headers:await C2(e,n),body:n?JSON.stringify(n):void 0});return await R_(r),r}const Wa=({on401:t})=>async({queryKey:e})=>{const[n]=e;let r;if(!A_(n)){const a=await p_();r=a?{Authorization:`Bearer ${a}`}:void 0}const i=await Bs(n,{headers:r});return t==="returnNull"&&i.status===401?null:(await R_(i),await i.json())};new Ab({defaultOptions:{queries:{queryFn:Wa({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}});const oi=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),px=new Intl.NumberFormat("en-US",{maximumFractionDigits:0});function mx(t){if(typeof t=="number")return Number.isFinite(t)?t:null;if(typeof t=="string"&&t.trim()!==""){const e=Number(t);return Number.isFinite(e)?e:null}return null}function N2(){const{user:t}=vr(),n=hm()!==!1,r=t?.user_metadata?.full_name?.trim()||t?.email?.split("@")[0]||"Trader",i=r.split(" ")[0]||r,[a,l]=b.useState({}),[u,h]=b.useState({}),{prices:p,setPrices:g}=ju();b.useEffect(()=>{let K=!1;async function q(){try{const[X,fe]=await Promise.all([fetch("/api/market/ticker/BTCUSDT"),fetch("/api/market/ticker/ETHUSDT")]);if(!K){if(X.ok){const Q=await X.json();Q?.price&&g({BTCUSDT:Number(Q.price)}),Q?.priceChangePercent!=null&&l({priceChangePercent:Q.priceChangePercent})}if(fe.ok){const Q=await fe.json();Q?.price&&g({ETHUSDT:Number(Q.price)}),Q?.priceChangePercent!=null&&h({priceChangePercent:Q.priceChangePercent})}}}catch{}}q();const J=setInterval(q,3e4);return()=>{K=!0,clearInterval(J)}},[g]);const{data:v=[]}=pm({enabled:n&&!!t});ju();const{market:w,pnlPct:S}=b_();b.useMemo(()=>Array.isArray(v)?Array.from(new Set(v.map(K=>K.symbol.trim().toUpperCase()).filter(Boolean))):[],[v]).join("|");const x=Number.isFinite(w)?w:0,_=Number.isFinite(S)?S:0,{data:T}=En({queryKey:["/api/market/gainers"],queryFn:Wa({on401:"returnNull"}),select:K=>{if(!Array.isArray(K))return{top:null,ts:Date.now()};const q=K.map(J=>{const X=(J.symbol||J.pair||J.ticker||"").toString().toUpperCase(),fe=mx(J.change24h)??mx(J.priceChangePercent);return!X||fe===null?null:{symbol:X,pct:fe}}).filter(Boolean);return q.sort((J,X)=>X.pct-J.pct),{top:q.slice(0,3),ts:Date.now()}},refetchInterval:3e5,enabled:n}),{data:C}=En({queryKey:["/api/watchlist",!!t],queryFn:Wa({on401:"returnNull"}),select:K=>Array.isArray(K)?K.length:null,refetchInterval:3e5,enabled:n&&!!t}),{data:N}=En({queryKey:["/api/ai/market-overview"],queryFn:Wa({on401:"returnNull"}),select:K=>{if(!K)return null;const q=Array.isArray(K.keyInsights)?K.keyInsights.filter(X=>typeof X=="string"&&X.trim()!==""):null;if(q&&q.length>0)return q.length;const J=Array.isArray(K.tradingRecommendations)?K.tradingRecommendations.filter(X=>typeof X=="string"&&X.trim()!==""):null;return J&&J.length>0?J.length:null},refetchInterval:12e4,enabled:n}),{data:I}=En({queryKey:["/api/market/fear-greed"],queryFn:Wa({on401:"returnNull"}),refetchInterval:36e5,enabled:n}),D=`$${oi.format(x)}`,A=`${_>=0?"+":""}${oi.format(_)}%`,L=_>=0?"text-accent":"text-destructive",$=T?.top??null;!$||$.length===0||$.map(K=>`${K.symbol} ${K.pct>=0?"+":""}${oi.format(K.pct)}%`).join("  "),T?.ts&&new Date(T.ts).toLocaleTimeString();const ee=C==null||Number.isNaN(C)?"":px.format(C),z=N==null||Number.isNaN(N)?"":px.format(N);return d.jsx("div",{className:"flex-1 overflow-hidden",children:d.jsxs("div",{className:"p-3 sm:p-4 md:p-6",children:[d.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4 mb-4 sm:mb-6 md:mb-8",children:d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-foreground break-words",children:["Welcome back, ",d.jsx("span",{className:"text-primary",children:i}),"!"]}),d.jsx("p",{className:"text-xs sm:text-sm md:text-base text-muted-foreground mt-1",children:"Your trading dashboard is ready. Let's make some profitable trades today."})]})}),d.jsxs("div",{className:"grid items-stretch grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-2 sm:gap-3 md:gap-4 mb-4 sm:mb-6 md:mb-8",children:[d.jsx(wt,{to:"/portfolio",className:"block h-full",children:d.jsx(tt,{className:"dashboard-card neon-hover bg-gradient-to-br from-primary/5 to-primary/10 h-auto sm:h-full",style:{"--neon-glow":"hsl(195, 100%, 60%)"},children:d.jsx(nt,{className:"p-2 sm:p-3 md:p-4 lg:p-6 flex flex-col justify-start",children:d.jsxs("div",{className:"flex items-center justify-between gap-2",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("h3",{className:"font-semibold text-foreground text-xs sm:text-sm mb-0.5",children:"Portfolio"}),d.jsx("p",{className:"text-base sm:text-lg md:text-2xl font-bold text-foreground truncate","data-testid":"text-portfolio-value",children:D}),d.jsxs("div",{className:"flex items-center space-x-1 mt-0.5",children:[d.jsx(Mr,{className:`w-3 h-3 ${L}`}),d.jsx("span",{className:`text-xs ${L}`,"data-testid":"text-portfolio-change",children:A})]})]}),d.jsx(tm,{className:"w-6 sm:w-8 h-6 sm:h-8 text-primary flex-shrink-0"})]})})})}),d.jsx(wt,{to:"/analyse/BTCUSDT",className:"block h-full",children:d.jsx(tt,{className:"dashboard-card neon-hover bg-gradient-to-br from-accent/5 to-accent/10 h-auto sm:h-full",style:{"--neon-glow":"hsl(158, 100%, 50%)"},children:d.jsx(nt,{className:"p-2 sm:p-3 md:p-4 lg:p-6 flex flex-col justify-start",children:d.jsxs("div",{className:"flex items-center justify-between gap-2",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("h3",{className:"font-semibold text-foreground text-xs sm:text-sm mb-0.5",children:"Scanner"}),d.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"Technical analysis"}),d.jsx("p",{className:"text-sm sm:text-lg font-bold text-foreground mt-0.5",children:"15+"}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Indicators"})]}),d.jsx(al,{className:"w-6 sm:w-8 h-6 sm:h-8 text-accent flex-shrink-0"})]})})})}),d.jsx(S2,{}),d.jsx(wt,{to:"/portfolio",className:"block h-full",children:d.jsx(tt,{className:"dashboard-card neon-hover bg-gradient-to-br from-emerald-500/5 to-emerald-500/10 h-auto sm:h-full",style:{"--neon-glow":"hsl(158, 100%, 50%)"},children:d.jsx(nt,{className:"p-2 sm:p-3 md:p-4 lg:p-6 flex flex-col justify-start",children:d.jsxs("div",{className:"flex items-center justify-between gap-2",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("h3",{className:"font-semibold text-foreground text-xs sm:text-sm mb-0.5",children:"Total P&L"}),d.jsx("p",{className:`text-base sm:text-lg md:text-2xl font-bold ${L} truncate`,"data-testid":"text-total-pnl-percent",children:A}),d.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:"Overall performance"})]}),d.jsx(Xp,{className:"w-6 sm:w-8 h-6 sm:h-8 text-emerald-600 flex-shrink-0"})]})})})}),d.jsx(wt,{to:"/watchlist",className:"block h-full",children:d.jsx(tt,{className:"dashboard-card neon-hover bg-gradient-to-br from-blue-500/5 to-blue-500/10 h-auto sm:h-full","data-testid":"card-watchlist",style:{"--neon-glow":"hsl(220, 100%, 60%)"},children:d.jsx(nt,{className:"p-2 sm:p-3 md:p-4 lg:p-6 flex flex-col justify-start",children:d.jsxs("div",{className:"flex items-center justify-between gap-2",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("h3",{className:"font-semibold text-foreground text-xs sm:text-sm mb-0.5",children:"Watchlist"}),d.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"Track favorites"}),d.jsx("p",{className:"text-sm sm:text-lg font-bold text-foreground mt-0.5",children:ee}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Coins tracked"})]}),d.jsx(x0,{className:"w-6 sm:w-8 h-6 sm:h-8 text-blue-500 flex-shrink-0"})]})})})}),d.jsx(wt,{to:"/alerts",className:"block h-full",children:d.jsx(tt,{className:"dashboard-card neon-hover bg-gradient-to-br from-orange-500/5 to-orange-500/10 h-auto sm:h-full","data-testid":"card-alerts",style:{"--neon-glow":"hsl(25, 100%, 55%)"},children:d.jsx(nt,{className:"p-2 sm:p-3 md:p-4 lg:p-6 flex flex-col justify-start",children:d.jsxs("div",{className:"flex items-center justify-between gap-2",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("h3",{className:"font-semibold text-foreground text-xs sm:text-sm mb-0.5",children:"Smart Alerts"}),d.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"Price notifications"}),d.jsx("p",{className:"text-sm sm:text-lg font-bold text-foreground mt-0.5",children:C?Math.min(C,3):0}),d.jsx("p",{className:"text-xs text-muted-foreground",children:"Active alerts"})]}),d.jsx(em,{className:"w-6 sm:w-8 h-6 sm:h-8 text-orange-500 flex-shrink-0"})]})})})}),d.jsx(wt,{to:"/ai-insights",className:"block h-full",children:d.jsx(tt,{className:"dashboard-card neon-hover bg-gradient-to-br from-indigo-500/5 to-indigo-500/10 h-auto sm:h-full",style:{"--neon-glow":"hsl(240, 100%, 70%)"},children:d.jsx(nt,{className:"p-2 sm:p-3 md:p-4 lg:p-6 flex flex-col justify-start",children:d.jsxs("div",{className:"flex items-center justify-between gap-2",children:[d.jsxs("div",{className:"min-w-0 flex-1",children:[d.jsx("h3",{className:"font-semibold text-foreground text-xs sm:text-sm mb-0.5",children:"AI Signals"}),d.jsx("p",{className:"text-xs text-muted-foreground truncate",children:"Market analysis"}),d.jsx("p",{className:"text-sm sm:text-lg font-bold text-foreground mt-0.5","data-testid":"text-ai-signals",children:z}),d.jsx("p",{className:"text-xs text-accent",children:"Active insights"})]}),d.jsx(So,{className:"w-6 sm:w-8 h-6 sm:h-8 text-indigo-500 flex-shrink-0"})]})})})}),d.jsx(w2,{}),d.jsx(wt,{to:"/news",className:"block h-full xl:col-span-2",children:d.jsx(tt,{className:"dashboard-card neon-hover h-auto sm:h-full",style:{"--neon-glow":"hsl(195, 100%, 60%)"},children:d.jsxs(nt,{className:"p-2 sm:p-3 md:p-4 lg:p-6 flex flex-col justify-start space-y-1 sm:space-y-2 md:space-y-4",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-foreground mb-1",children:"News & Insights"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"Curated market headlines and analyst takes to keep you ahead of the next move."})]}),d.jsx(b0,{className:"w-8 h-8 text-primary"})]}),d.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[d.jsxs("p",{className:"flex items-center justify-between text-foreground",children:[d.jsx("span",{className:"font-medium",children:"Morning Brief"}),d.jsx("span",{className:"text-xs text-muted-foreground",children:"Updated 10 min ago"})]}),d.jsx("p",{children:"US equities rally as inflation cools; crypto follows with strong altcoin bids."}),d.jsx("p",{className:"text-xs text-primary mt-2 font-medium",children:"Click to read latest "})]})]})})})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-3 md:gap-4 lg:gap-6",children:[d.jsxs(tt,{className:"border-border",children:[d.jsx(Cn,{children:d.jsxs(Nn,{className:"flex min-w-0 items-center space-x-2",children:[d.jsx(Mr,{className:"w-5 h-5 text-primary"}),d.jsx("span",{className:"min-w-0 overflow-hidden text-ellipsis whitespace-nowrap",children:"Market Overview"})]})}),d.jsxs(nt,{className:"space-y-4",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-sm text-muted-foreground",children:"BTC/USDT"}),d.jsxs("div",{className:"text-right",children:[d.jsxs("p",{className:"font-semibold","data-testid":"text-btc-price",children:["$",oi.format(p.BTCUSDT||0)]}),d.jsxs("p",{className:`text-sm ${parseFloat(String(a?.priceChangePercent||"0"))>=0?"text-accent":"text-destructive"}`,"data-testid":"text-btc-change",children:[parseFloat(String(a?.priceChangePercent||"0"))>=0?"+":"",oi.format(parseFloat(String(a?.priceChangePercent||"0"))),"%"]})]})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-sm text-muted-foreground",children:"ETH/USDT"}),d.jsxs("div",{className:"text-right",children:[d.jsxs("p",{className:"font-semibold","data-testid":"text-eth-price",children:["$",oi.format(p.ETHUSDT||0)]}),d.jsxs("p",{className:`text-sm ${parseFloat(String(u?.priceChangePercent||"0"))>=0?"text-accent":"text-destructive"}`,"data-testid":"text-eth-change",children:[parseFloat(String(u?.priceChangePercent||"0"))>=0?"+":"",oi.format(parseFloat(String(u?.priceChangePercent||"0"))),"%"]})]})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-sm text-muted-foreground",children:"Market Fear & Greed"}),d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"font-semibold","data-testid":"text-fear-greed",children:I?`${I.value.toFixed(1)}`:"--"}),d.jsx("p",{className:`text-sm ${I?I.classification.includes("Greed")?"text-accent":I.classification.includes("Fear")?"text-destructive":"text-muted-foreground":"text-muted-foreground"}`,children:I?I.classification:"Index"})]})]}),d.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row gap-2",children:[d.jsx(Ke,{asChild:!0,size:"sm",className:"min-h-[44px]","data-testid":"button-view-portfolio",children:d.jsx(wt,{to:"/portfolio",children:"View Portfolio"})}),d.jsx(Ke,{asChild:!0,size:"sm",variant:"outline",className:"min-h-[44px]","data-testid":"button-start-scanning",children:d.jsx(wt,{to:"/analyse/BTCUSDT",children:"Start Scanning"})})]})]})]}),d.jsxs(tt,{className:"border-border",children:[d.jsx(Cn,{children:d.jsxs(Nn,{className:"flex min-w-0 items-center space-x-2",children:[d.jsx(So,{className:"w-5 h-5 text-purple-500"}),d.jsx("span",{className:"min-w-0 overflow-hidden text-ellipsis whitespace-nowrap",children:"AI Trading Assistant"})]})}),d.jsxs(nt,{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"w-2 h-2 text-accent rounded-full"}),d.jsx("span",{className:"text-sm text-foreground",children:"Market sentiment: Bullish"})]}),d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),d.jsx("span",{className:"text-sm text-foreground",children:"Technical signals detected"})]}),d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),d.jsx("span",{className:"text-sm text-foreground",children:"Risk level: Moderate"})]}),d.jsxs("div",{className:"bg-muted/50 rounded-lg p-3 mt-4",children:[d.jsx("p",{className:"text-sm text-muted-foreground italic",children:'"Bitcoin showing strong support at $40k level. Consider DCA strategy for next 24h."'}),d.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"AI Insight  2 min ago"})]})]})]}),d.jsxs(tt,{className:"border-border",children:[d.jsx(Cn,{children:d.jsx(Nn,{children:"Trading Features"})}),d.jsxs(nt,{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"w-2 h-2 bg-accent rounded-full"}),d.jsx("span",{className:"text-sm text-foreground",children:"Real-time market data from Binance"})]}),d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"}),d.jsx("span",{className:"text-sm text-foreground",children:"15+ Technical indicators"})]}),d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),d.jsx("span",{className:"text-sm text-foreground",children:"AI-powered analysis"})]}),d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"w-2 h-2 text-accent rounded-full"}),d.jsx("span",{className:"text-sm text-foreground",children:"Smart alert system"})]}),d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),d.jsx("span",{className:"text-sm text-foreground",children:"Portfolio P&L tracking"})]})]})]})]})]})})}const T2=E_("inline-flex max-w-full items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 min-w-0 overflow-hidden text-ellipsis",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Xn({className:t,variant:e,...n}){return d.jsx("div",{className:st(T2({variant:e}),t),...n})}function bh(t){const e=parseFloat(t||"0");return Number.isNaN(e)?"$0.00":e>=1e3?`$${e.toLocaleString(void 0,{maximumFractionDigits:2})}`:e>=1?`$${e.toFixed(4)}`:`$${e.toFixed(8)}`}function j2(t){const e=parseFloat(t||"0");return Number.isNaN(e)?"$0.00":e>=1e9?`$${(e/1e9).toFixed(2)}B`:e>=1e6?`$${(e/1e6).toFixed(2)}M`:e>=1e3?`$${(e/1e3).toFixed(2)}K`:`$${e.toFixed(2)}`}function P2(t){try{const e=`ticker_${t}`,n=localStorage.getItem(e);if(!n)return null;const{data:r,timestamp:i}=JSON.parse(n);if(Date.now()-i<3e4)return r}catch{}return null}function I2(t,e){try{const n=`ticker_${t}`;localStorage.setItem(n,JSON.stringify({data:e,timestamp:Date.now()}))}catch{}}async function R2(t){try{const e=await fetch(`https://api.binance.com/api/v3/ticker/24hr?symbol=${encodeURIComponent(t)}`);if(!e.ok)return null;const n=await e.json(),r={symbol:n.symbol,lastPrice:n.lastPrice,priceChange:n.priceChange,priceChangePercent:n.priceChangePercent,highPrice:n.highPrice,lowPrice:n.lowPrice,volume:n.volume,quoteVolume:n.quoteVolume};return I2(t,r),r}catch{return null}}function A2({symbols:t=["BTCUSDT","ETHUSDT"]}){const[e,n]=b.useState({});b.useEffect(()=>{let i=!1;const a={};for(const h of t){const p=P2(h);p&&(a[h]=p)}Object.keys(a).length>0&&n(a);async function l(){const h={};for(const p of t){const g=await R2(p);g&&!i&&(h[p]=g)}!i&&Object.keys(h).length>0&&n(h)}l();const u=setInterval(l,15e3);return()=>{i=!0,clearInterval(u)}},[t.join("|")]);const r=b.useMemo(()=>t.map(i=>{const a=e[i],l=parseFloat(a?.priceChangePercent??"0"),u=l>0;return d.jsx(tt,{children:d.jsxs(nt,{className:"p-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-1",children:[d.jsx("div",{className:"text-sm text-muted-foreground",children:i.replace("USDT","/USDT")}),d.jsx(Xn,{className:u?"bg-green-600 text-white":"bg-red-600 text-white",children:u?"BULLISH":"BEARISH"})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-muted-foreground",children:"Current Price"}),d.jsx("p",{className:"text-lg font-bold text-foreground",children:bh(a?.lastPrice)})]}),d.jsx(ip,{className:"w-5 h-5 text-primary"})]}),d.jsx("div",{className:"flex items-center justify-between mt-2",children:d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-muted-foreground",children:"24h Change"}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:`text-lg font-bold ${u?"text-accent":"text-destructive"}`,children:`${l>0?"+":""}${l.toFixed(2)}%`}),u?d.jsx(Mr,{className:"w-5 h-5 text-accent"}):d.jsx(lp,{className:"w-5 h-5 text-destructive"})]})]})}),d.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm text-muted-foreground",children:"24h Volume"}),d.jsx("span",{className:"text-sm font-medium text-foreground",children:j2(a?.quoteVolume)}),d.jsx(Yj,{className:"w-4 h-4 text-secondary ml-2"})]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("span",{className:"text-sm text-muted-foreground",children:"High / Low"}),d.jsxs("span",{className:"text-xs font-medium text-foreground",children:[bh(a?.highPrice)," / ",bh(a?.lowPrice)]}),d.jsx(ap,{className:"w-4 h-4 text-accent ml-2"})]})]})]})},i)}),[t,e]);return d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r})}function O_(){if(!(typeof window>"u"))try{window.dispatchEvent(new StorageEvent("storage",{key:"portfolio.refresh"}))}catch{}}function O2(){const{user:t}=vr(),e=t?.uid??null,n=Zu(),r=e??n,i=yr(),a=Yu(r);return gu({mutationFn:async l=>{if(!r)throw new Error("You need to be signed in to manage portfolio positions.");return await dO(r,l)},onSuccess:()=>{i.invalidateQueries({queryKey:a}),O_()}})}function D2(){const{user:t}=vr(),e=t?.uid??null,n=Zu(),r=e??n,i=yr(),a=Yu(r);return gu({mutationFn:async l=>{if(!r)throw new Error("You need to be signed in to manage portfolio positions.");await fO(l)},onSuccess:()=>{i.invalidateQueries({queryKey:a}),O_()}})}function gm(){const{user:t}=Hr(),[e,n]=qr(),r=Pj();function i(a){if(!t){r.error("Sign in to unlock this feature",2200);const l=a||e,u=l?`?redirect=${encodeURIComponent(l)}`:"";return n(`/account${u}`),!0}return!1}return{requireLogin:i,user:t}}function M2(){const{user:t}=vr(),{user:e,loading:n}=Hr(),{requireLogin:r}=gm(),[,i]=qr(),l=hm()===!0,u=yr(),h=t?.uid??null,p=e?.id??null,g=p??h,v=b.useMemo(()=>Yu(g??null),[g]),{data:w=[],isLoading:S,isFetching:E,isError:x,error:_}=pm({enabled:l&&(!!e||!!t)}),{prices:T,getPrice:C,reset:N}=ju(),{market:I,pnl:D,pnlPct:A,cost:L}=b_(),$=b.useMemo(()=>w.map(Ee=>({id:Ee.id,symbol:Ee.symbol,qty:Number(Ee.quantity),avgPrice:Number(Ee.entryPrice),livePrice:Number(Ee.entryPrice),pnl:0})),[w]),ee=(S||E)&&$.length===0,z=x&&$.length===0,K=_ instanceof Error?_.message:"Failed to load portfolio positions";b.useEffect(()=>{x&&_&&console.error("Failed to load portfolio positions",_)},[x,_]);const q=b.useCallback(async()=>{await u.invalidateQueries({queryKey:v})},[v,u]),J=b.useCallback(Ee=>{const Je=Number(Ee.qty),P=Number(Ee.entry_price);return{id:Ee.id,symbol:Ee.symbol?.toUpperCase?.()??"",quantity:Number.isFinite(Je)?Je:0,entryPrice:Number.isFinite(P)?P:0,notes:Ee.note??null,createdAt:Ee.created_at,updatedAt:Ee.updated_at??Ee.created_at}},[]),X=b.useCallback(async()=>{if(p)try{const Je=(await x_()).map(J);u.setQueryData(v,Je)}catch(Ee){console.error("Failed to reload Supabase positions",Ee),await q()}},[J,p,u,v,q]),fe=b.useCallback(async()=>{N(),await Promise.all([q(),u.invalidateQueries({queryKey:["prices"]})])},[u,q,N]);b.useMemo(()=>Array.from(new Set($.map(Ee=>Ee.symbol.trim().toUpperCase()).filter(Boolean))),[$]).join("|");const ce=b.useCallback((Ee,Je)=>{const P=Ee.toUpperCase(),U=T[P];if(Number.isFinite(U))return U;const V=C(Ee);return typeof V=="number"&&Number.isFinite(V)?V:Je},[C,T]),{data:H}=En({queryKey:["/api/ai/market-overview"],refetchInterval:12e4,queryFn:async()=>{const Ee=await Bs("/api/ai/market-overview");if(!Ee.ok)throw new Error(await Ee.text().catch(()=>"Failed to load AI overview"));return Ee.json()},enabled:l}),[te,ne]=b.useState(!1),[O,G]=b.useState({symbol:"",qty:"",avgPrice:""}),[Te,ke]=b.useState(null),Oe=b.useMemo(()=>{const Ee=O.symbol.trim().toUpperCase(),Je=Number(O.qty),P=Number(O.avgPrice);return Ee.length>=2&&Number.isFinite(Je)&&Je>0&&Number.isFinite(P)&&P>0},[O]),Me=O2(),ue=D2(),[me,Ae]=b.useState(!1),be=()=>{r("/portfolio")||(G({symbol:"",qty:"",avgPrice:""}),ke(null),ne(!0))},De=()=>{me||(ne(!1),ke(null))};b.useEffect(()=>{if(!te)return;const Ee=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=Ee}},[te]);async function Qe(){if(!Oe||me)return;if(!e){ke("Please sign in to add a position.");return}ke(null);const Ee=O.symbol.trim().toUpperCase(),Je=Number(O.qty),P=Number(O.avgPrice);Ae(!0);let U=null,V=null;try{await pO(e.id,Ee,Je,P),await X(),U="supabase"}catch(de){V=de,console.error("Add position via Supabase failed:",de);try{await Me.mutateAsync({symbol:Ee,quantity:Je,entryPrice:P}),U="fallback"}catch(oe){V=oe,console.error("Fallback add position failed:",oe)}}if(U)await q(),ne(!1),G({symbol:"",qty:"",avgPrice:""}),ke(null);else{const de=V instanceof Error?V.message:"Failed to add position";ke(de)}Ae(!1)}async function pt(Ee){if(!e)return;let Je=null;try{await mO(Ee.id),await X();return}catch(P){Je=P,console.error("Delete via Supabase failed:",P)}try{await ue.mutateAsync(Ee.id)}catch(P){console.error("Fallback delete failed:",P);const U=P instanceof Error?P.message:Je instanceof Error?Je.message:"Failed to delete position";alert(U)}}function dt(Ee){i(`/analyse/${encodeURIComponent(Ee)}`)}const Vt="dashboard-card neon-hover !min-h-[64px]",kt={minHeight:64},Gt="!p-2 h-[64px] min-h-0 flex items-center justify-between";return d.jsxs("div",{className:"flex-1 overflow-hidden",children:[d.jsxs("div",{className:"p-4 sm:p-6",children:[d.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6",children:[d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground break-words",children:"Your Portfolio"}),d.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mt-1",children:"Positions, P&L, and live performance."})]}),d.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[d.jsxs(Ke,{variant:"outline",size:"sm",onClick:fe,className:"min-h-[44px]",children:[d.jsx(Ku,{className:`w-4 h-4 sm:mr-2 ${E?"animate-spin":""}`}),d.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),d.jsxs(Ke,{size:"sm",onClick:be,className:"min-h-[44px]",children:[d.jsx(lh,{className:"w-4 h-4 sm:mr-2"}),d.jsx("span",{className:"hidden sm:inline",children:"Add Position"})]})]})]}),!n&&!e&&d.jsx("div",{className:"mb-4 text-sm text-muted-foreground",children:"Please sign in at /account"}),d.jsx("div",{className:"mb-6 hidden sm:block",children:d.jsx(A2,{symbols:["BTCUSDT","ETHUSDT"]})}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-3 sm:gap-4 mb-6",children:[d.jsx(tt,{className:`${Vt} bg-gradient-to-br from-primary/5 to-primary/10`,style:kt,children:d.jsx(nt,{className:Gt,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Mr,{className:"w-5 h-5 text-primary"}),d.jsxs("div",{className:"leading-tight",children:[d.jsx("div",{className:"text-sm font-semibold text-foreground",children:"Current Value"}),d.jsxs("div",{className:"text-base font-bold text-foreground",children:["$",I.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})})}),d.jsx(tt,{className:`${Vt} bg-gradient-to-br from-blue-500/5 to-blue-500/10`,style:kt,children:d.jsx(nt,{className:Gt,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx($j,{className:"w-5 h-5 text-blue-500"}),d.jsxs("div",{className:"leading-tight",children:[d.jsx("div",{className:"text-sm font-semibold text-foreground",children:"Position Value"}),d.jsxs("div",{className:"text-base font-bold text-foreground",children:["$",L.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})})}),d.jsx(tt,{className:`${Vt} bg-gradient-to-br from-emerald-500/5 to-emerald-500/10`,style:kt,children:d.jsx(nt,{className:Gt,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Xp,{className:"w-5 h-5 text-emerald-600"}),d.jsxs("div",{className:"leading-tight",children:[d.jsx("div",{className:"text-sm font-semibold text-foreground",children:"Total P&L"}),d.jsxs("div",{className:`text-base font-bold ${D>=0?"text-accent":"text-destructive"}`,children:[D>=0?"+":"","$",D.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),d.jsxs("div",{className:`text-[11px] ${A>=0?"text-accent":"text-destructive"}`,children:[A>=0?"+":"",A.toFixed(2),"%"]})]})]})})}),d.jsx(tt,{className:`${Vt} bg-gradient-to-br from-purple-500/5 to-purple-500/10`,style:kt,children:d.jsx(nt,{className:Gt,children:d.jsxs("div",{className:"leading-tight",children:[d.jsx("div",{className:"text-sm font-semibold text-foreground",children:"Positions"}),d.jsx("div",{className:"text-base font-bold text-foreground",children:$.length})]})})}),d.jsx(wt,{href:"/ai-insights",className:"block",children:d.jsx(tt,{className:`${Vt} bg-gradient-to-br from-indigo-500/5 to-indigo-500/10 cursor-pointer`,style:kt,children:d.jsx(nt,{className:Gt,children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(So,{className:"w-5 h-5 text-indigo-500"}),d.jsxs("div",{className:"leading-tight",children:[d.jsx("div",{className:"text-sm font-semibold text-foreground",children:"AI Insights"}),d.jsx("div",{className:"text-base font-bold text-foreground",children:H?.signals?.length??0})]})]})})})})]}),d.jsxs(tt,{className:"border-border",children:[d.jsxs(Cn,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 p-4 sm:p-6",children:[d.jsx(Nn,{children:"Holdings"}),d.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[d.jsx(wt,{href:"/analyse/BTCUSDT",children:d.jsxs(Ke,{variant:"outline",size:"sm",className:"min-h-[44px]",children:[d.jsx(x0,{className:"w-4 h-4 sm:mr-2"}),d.jsx("span",{className:"hidden sm:inline",children:"Scan Market"})]})}),d.jsxs(Ke,{size:"sm",onClick:be,className:"min-h-[44px]",children:[d.jsx(lh,{className:"w-4 h-4 sm:mr-2"}),d.jsx("span",{className:"hidden sm:inline",children:"Add Position"})]})]})]}),d.jsx(nt,{className:"p-0 sm:p-6",children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-sm min-w-full sm:min-w-[800px]",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"text-muted-foreground border-b border-border",children:[d.jsx("th",{className:"text-left py-3 px-2 sm:px-4 whitespace-nowrap",children:"COIN"}),d.jsx("th",{className:"text-right py-3 px-2 sm:px-4 whitespace-nowrap",children:"QTY"}),d.jsx("th",{className:"text-right py-3 px-2 sm:px-4 whitespace-nowrap",children:"ENTRY"}),d.jsx("th",{className:"text-right py-3 px-2 sm:px-4 whitespace-nowrap",children:"CURRENT"}),d.jsx("th",{className:"text-right py-3 px-2 sm:px-4 whitespace-nowrap",children:"ORDER"}),d.jsx("th",{className:"text-right py-3 px-2 sm:px-4 whitespace-nowrap",children:"P&L"}),d.jsx("th",{className:"text-right py-3 px-2 sm:px-4 whitespace-nowrap",children:"%"}),d.jsx("th",{className:"text-right py-3 px-2 sm:px-4 whitespace-nowrap",children:"ACTIONS"})]})}),ee?d.jsx("tbody",{children:d.jsx("tr",{children:d.jsx("td",{colSpan:8,className:"py-6 text-center text-muted-foreground",children:"Loading your portfolio"})})}):z?d.jsx("tbody",{children:d.jsx("tr",{children:d.jsx("td",{colSpan:8,className:"py-6 text-center text-red-400",children:K})})}):$.length===0?d.jsx("tbody",{children:d.jsx("tr",{children:d.jsx("td",{colSpan:8,className:"py-6 text-center",children:d.jsxs("div",{className:"inline-flex flex-col items-center",children:[d.jsx("p",{className:"text-foreground font-medium",children:"No positions yet"}),d.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Add your first position to start tracking P&L."}),d.jsxs(Ke,{size:"sm",className:"mt-3",onClick:be,children:[d.jsx(lh,{className:"w-4 h-4 mr-2"}),"Add Position"]})]})})})}):d.jsx("tbody",{children:$.map(Ee=>{const Je=Ee.symbol.toUpperCase(),P=ce(Je,Ee.livePrice??Ee.avgPrice),U=Number(Ee.qty)||0,V=Number(Ee.avgPrice)||0,de=Number.isFinite(P)?P:V,oe=U*V,xe=U*de-oe,He=V>0?(de-V)/V*100:0,ie=xe>=0?"text-accent":"text-destructive";return d.jsxs("tr",{className:"border-b border-border/50",children:[d.jsx("td",{className:"py-3 px-2 sm:px-4 font-medium text-foreground whitespace-nowrap",children:Je}),d.jsx("td",{className:"py-3 px-2 sm:px-4 text-right whitespace-nowrap text-xs sm:text-sm",children:Ee.qty}),d.jsxs("td",{className:"py-3 px-2 sm:px-4 text-right whitespace-nowrap text-xs sm:text-sm",children:["$",Ee.avgPrice.toLocaleString("en-US",{maximumFractionDigits:6})]}),d.jsxs("td",{className:"py-3 px-2 sm:px-4 text-right whitespace-nowrap text-xs sm:text-sm",children:["$",P.toLocaleString("en-US",{maximumFractionDigits:6})]}),d.jsx("td",{className:"py-3 px-2 sm:px-4 text-right whitespace-nowrap text-xs sm:text-sm",children:f2(oe)}),d.jsxs("td",{className:`py-3 px-2 sm:px-4 text-right whitespace-nowrap text-xs sm:text-sm ${ie}`,children:[xe>=0?"+":"-","$",Math.abs(xe).toLocaleString("en-US",{maximumFractionDigits:2})]}),d.jsxs("td",{className:`py-3 px-2 sm:px-4 text-right whitespace-nowrap text-xs sm:text-sm ${ie}`,children:[He>=0?"+":"-",Math.abs(He).toFixed(2),"%"]}),d.jsx("td",{className:"py-3 px-2 sm:px-4 text-right whitespace-nowrap",children:d.jsxs("div",{className:"inline-flex items-center gap-1 sm:gap-2",children:[d.jsxs(Ke,{size:"sm",variant:"outline",onClick:()=>dt(Je),title:"Scan",className:"hidden sm:inline-flex",children:[d.jsx(al,{className:"w-4 h-4 mr-1"})," Scan"]}),d.jsx(Ke,{size:"sm",variant:"outline",onClick:()=>dt(Je),title:"Scan",className:"inline-flex sm:hidden min-h-[36px]",children:d.jsx(al,{className:"w-4 h-4"})}),e&&d.jsx(Ke,{size:"sm",variant:"destructive",onClick:()=>pt(Ee),title:"Delete",className:"min-h-[36px]",children:d.jsx(Zj,{className:"w-4 h-4"})})]})})]},Ee.id)})})]})})})]})]}),te&&d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",children:[d.jsx("div",{className:"absolute inset-0 bg-black/80",onClick:De}),d.jsxs("div",{className:"relative z-10 w-full max-w-md rounded-2xl border border-white/10 bg-[#0f1526] shadow-2xl max-h-[90vh] overflow-y-auto",children:[d.jsxs("div",{className:"p-5 border-b border-white/10 flex items-center justify-between",children:[d.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Add Position"}),d.jsx("button",{className:"p-1 rounded-md hover:bg-white/5",onClick:De,"aria-label":"Close",children:d.jsx(eP,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"p-5",children:[d.jsx("label",{className:"text-sm text-muted-foreground",children:"Symbol (e.g., BTCUSDT)"}),d.jsx("input",{className:"mt-1 w-full rounded-md bg-[#12182a] border border-white/10 px-3 py-2 text-foreground outline-none",placeholder:"BTCUSDT",value:O.symbol,onChange:Ee=>G(Je=>({...Je,symbol:Ee.target.value})),autoComplete:"off"}),d.jsx("label",{className:"text-sm text-muted-foreground mt-4 block",children:"Quantity"}),d.jsx("input",{type:"number",min:"0",step:"any",className:"mt-1 w-full rounded-md bg-[#12182a] border border-white/10 px-3 py-2 text-foreground outline-none",placeholder:"e.g., 0.5",value:O.qty,onChange:Ee=>G(Je=>({...Je,qty:Ee.target.value})),autoComplete:"off"}),d.jsx("label",{className:"text-sm text-muted-foreground mt-4 block",children:"Average Entry Price (USDT)"}),d.jsx("input",{type:"number",min:"0",step:"any",className:"mt-1 w-full rounded-md bg-[#12182a] border border-white/10 px-3 py-2 text-foreground outline-none",placeholder:"e.g., 42000",value:O.avgPrice,onChange:Ee=>G(Je=>({...Je,avgPrice:Ee.target.value})),autoComplete:"off"}),Te&&d.jsx("div",{className:"mt-4 rounded-md border border-red-500/40 bg-red-500/10 px-3 py-2 text-sm text-red-300",children:Te}),d.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[d.jsx(Ke,{variant:"outline",onClick:De,disabled:me,children:"Cancel"}),d.jsx(Ke,{onClick:Qe,disabled:!Oe||me,children:me?"Saving":"Add Position"})]}),d.jsxs("p",{className:"text-xs text-muted-foreground mt-3",children:["Tip: Use Binance spot symbols like ",d.jsx("span",{className:"font-mono",children:"BTCUSDT"}),","," ",d.jsx("span",{className:"font-mono",children:"ETHUSDT"}),"."]})]})]})]})]})}function ym({className:t,...e}){return d.jsx("div",{className:st("animate-pulse rounded-md bg-muted",t),...e})}function vm(t){t.startsWith("#/")?window.location.hash=t.slice(1):window.location.assign(t)}const D_=new Intl.NumberFormat("en-US",{notation:"compact"}),_h="gainers_data_cache",Sh="gainers_data_timestamp",Pu=t=>t.endsWith("USDT")?t.slice(0,-4):t,Pr=t=>{const e=Number(t);return Number.isFinite(e)?e:0};function M_(t){return t===null?"":t===0?"$0":`$${(t>=1?t.toFixed(2):t.toFixed(6)).replace(/\.0+$/,"").replace(/(\.\d*?)0+$/,"$1")}`}function L2(){return d.jsxs("main",{className:"p-4 text-foreground",children:[d.jsx("h1",{className:"mb-4 text-xl font-semibold",children:"All Top Gainers"}),d.jsx("div",{className:"rounded-xl border border-border bg-card",children:d.jsx("div",{className:"space-y-2 p-6",children:Array.from({length:8}).map((t,e)=>d.jsx(ym,{className:"h-12 w-full rounded-lg bg-muted"},e))})})]})}function U2({index:t,symbol:e,name:n,change24h:r,price:i,volume:a,onAnalyse:l}){const u=Number.isFinite(r)?r:0,h=u>=0,p=a===null?"":`$${D_.format(a)}`;return d.jsxs("tr",{className:"hidden border-t border-border md:table-row hover:bg-muted/30 transition-colors",children:[d.jsx("td",{className:"whitespace-nowrap px-4 py-3 text-muted-foreground",children:t+1}),d.jsx("td",{className:"whitespace-nowrap px-4 py-3",children:d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"font-medium",children:Pu(e)}),n&&n!==e?d.jsx("span",{className:"text-xs text-muted-foreground",children:Pu(n)}):null]})}),d.jsx("td",{className:"whitespace-nowrap px-4 py-3 text-right font-semibold",children:M_(i)}),d.jsxs("td",{className:`whitespace-nowrap px-4 py-3 text-right font-semibold ${h?"text-accent":"text-destructive"}`,children:[h?"+":"",u.toFixed(2),"%"]}),d.jsx("td",{className:"whitespace-nowrap px-4 py-3 text-right text-muted-foreground",children:p}),d.jsx("td",{className:"whitespace-nowrap px-4 py-3 text-right",children:d.jsx("button",{type:"button",onClick:()=>l(e),className:"inline-block rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 active:bg-primary/80 px-3 py-2 font-medium transition-all",children:"Analyse"})})]})}function F2({index:t,symbol:e,name:n,change24h:r,price:i,volume:a,onAnalyse:l}){const u=Number.isFinite(r)?r:0,h=u>=0,p=a===null?"":`$${D_.format(a)}`;return d.jsxs("div",{className:"md:hidden flex flex-col gap-3 rounded-lg border border-border bg-card p-4 hover:bg-card/80 transition-colors",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"font-semibold text-foreground",children:Pu(e)}),n&&n!==e?d.jsx("span",{className:"text-xs text-muted-foreground",children:Pu(n)}):null]}),d.jsxs("span",{className:"text-xs text-muted-foreground",children:["#",t+1]})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-muted-foreground",children:"Price"}),d.jsx("p",{className:"font-semibold text-foreground",children:M_(i)})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-xs text-muted-foreground",children:"24h Change"}),d.jsxs("p",{className:`font-semibold ${h?"text-accent":"text-destructive"}`,children:[h?"+":"",u.toFixed(2),"%"]})]}),d.jsxs("div",{className:"col-span-2",children:[d.jsx("p",{className:"text-xs text-muted-foreground",children:"Volume"}),d.jsx("p",{className:"font-semibold text-muted-foreground",children:p})]})]}),d.jsx("button",{type:"button",onClick:()=>l(e),className:"w-full rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 active:bg-primary/80 px-4 py-3 font-medium transition-all",children:"Analyse"})]})}function $2(){const[t,e]=b.useState(null),[n,r]=b.useState(!0),[i,a]=b.useState(null),[l,u]=b.useState(null),[h,p]=b.useState(!1),{requireLogin:g}=gm(),v=x=>{g("/gainers")||vm(`#/analyse/${x}`)},w=x=>x.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),S=async(x=!1)=>{x?p(!0):r(!0),a(null);try{const _=await fetch("/api/market/gainers");if(!_.ok)throw new Error(`Backend HTTP ${_.status}`);const T=await _.json(),C=Array.isArray(T)?T:T?.rows;if(!Array.isArray(C))throw new Error("Invalid response format");const N=C.map(D=>({symbol:D.symbol||"",name:D.symbol||"",price:Pr(D.price),change24h:Pr(D.changePct),volumeUSDT:Pr(D.volume)})).filter(D=>D.symbol).slice(0,20);N.length===0&&a("No gainers data available.");const I=new Date;e(N),u(I),localStorage.setItem(_h,JSON.stringify(N)),localStorage.setItem(Sh,I.toISOString())}catch(_){console.error("[Gainers] Fetch error:",_?.message),a(_?.message||"Failed to load gainers.")}finally{r(!1),p(!1)}};b.useEffect(()=>{const x=localStorage.getItem(_h),_=localStorage.getItem(Sh);if(x&&_)try{e(JSON.parse(x)),u(new Date(_)),r(!1),fetch("/api/market/gainers").then(T=>T.json()).then(T=>{const C=Array.isArray(T)?T:T?.rows;if(Array.isArray(C)){const N=C.map(D=>({symbol:D.symbol||"",name:D.symbol||"",price:Pr(D.price),change24h:Pr(D.changePct),volumeUSDT:Pr(D.volume)})).filter(D=>D.symbol).slice(0,20),I=new Date;e(N),u(I),localStorage.setItem(_h,JSON.stringify(N)),localStorage.setItem(Sh,I.toISOString())}}).catch(()=>{});return}catch{}S(!1)},[]),b.useEffect(()=>{const x=10+Math.random()*5,_=x*60*1e3;console.log(`[Gainers] Auto-refresh configured for ${x.toFixed(1)} minutes`);const T=setInterval(()=>{console.log("[Gainers]  Auto-refreshing data now..."),S(!0)},_);return()=>{console.log("[Gainers] Auto-refresh cleared on unmount"),clearInterval(T)}},[]);const E=b.useMemo(()=>Array.isArray(t)?t.map(x=>{const _=String(x?.symbol??"");if(!_)return null;const T=x?.price,C=x?.volumeUSDT??x?.volume;return{symbol:_,name:x?.name??_,price:T==null?null:Pr(T),change24h:Pr(x?.change24h),volume:C==null?null:Pr(C)}}).filter(x=>!!x):[],[t]);return n?d.jsx(L2,{}):i&&!E.length?d.jsx("div",{className:"text-sm text-destructive p-4",children:i}):E.length?d.jsxs("main",{className:"w-full max-w-full overflow-x-hidden text-foreground px-3 sm:px-4 md:px-6 py-4",children:[d.jsxs("div",{className:"mb-6 flex items-center justify-between gap-3",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-base font-semibold md:text-lg",children:"Top Gainers"}),l&&d.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Last updated: ",w(l)]})]}),d.jsxs("button",{onClick:()=>S(!0),disabled:h,className:"flex items-center gap-2 border-2 border-primary text-primary bg-transparent hover:bg-primary/10 active:bg-primary/20 rounded-lg px-3 py-1.5 text-sm font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed min-h-[44px]",children:[d.jsx(Ku,{size:16,className:h?"animate-spin":""}),d.jsx("span",{className:"hidden sm:inline",children:h?"Refreshing":"Refresh"})]})]}),d.jsx("div",{className:"hidden md:block overflow-hidden rounded-xl border border-border bg-card",children:d.jsx("div",{className:"h-[78vh] overflow-auto",children:d.jsxs("table",{className:"w-full text-sm",children:[d.jsx("thead",{className:"sticky top-0 z-10 bg-muted/50 text-muted-foreground backdrop-blur",children:d.jsxs("tr",{className:"border-b border-border",children:[d.jsx("th",{className:"whitespace-nowrap px-4 py-3 text-left font-semibold",children:"Rank"}),d.jsx("th",{className:"whitespace-nowrap px-4 py-3 text-left font-semibold",children:"Symbol"}),d.jsx("th",{className:"whitespace-nowrap px-4 py-3 text-right font-semibold",children:"Price"}),d.jsx("th",{className:"whitespace-nowrap px-4 py-3 text-right font-semibold",children:"24h Change"}),d.jsx("th",{className:"whitespace-nowrap px-4 py-3 text-right font-semibold",children:"Volume"}),d.jsx("th",{className:"whitespace-nowrap px-4 py-3 text-right font-semibold",children:"Quick Analysis"})]})}),d.jsx("tbody",{children:E.map((x,_)=>d.jsx(U2,{index:_,symbol:x.symbol,name:x.name,change24h:x.change24h,price:x.price,volume:x.volume,onAnalyse:v},`${x.symbol}-${_}`))})]})})}),d.jsx("div",{className:"md:hidden space-y-3",children:E.map((x,_)=>d.jsx(F2,{index:_,symbol:x.symbol,name:x.name,change24h:x.change24h,price:x.price,volume:x.volume,onAnalyse:v},`${x.symbol}-${_}`))})]}):d.jsx("div",{children:"No gainers data available"})}const gx="https://s3.tradingview.com/tv.js";let Oa=null;const B2=()=>typeof window>"u"?Promise.reject(new Error("TradingView requires a browser environment")):window.TradingView?Promise.resolve(window.TradingView):(Oa||(Oa=new Promise((t,e)=>{const n=(p,g,v)=>{p.removeEventListener("load",g),p.removeEventListener("error",v)},r=()=>{window.TradingView?t(window.TradingView):(Oa=null,e(new Error("TradingView script loaded but API is unavailable")))},i=p=>{Oa=null,e(p)},a=document.querySelector(`script[src="${gx}"]`);if(a){a.addEventListener("load",r,{once:!0}),a.addEventListener("error",i,{once:!0});return}const l=document.createElement("script");l.src=gx,l.async=!0;const u=()=>{n(l,u,h),r()},h=p=>{n(l,u,h),i(p)};l.addEventListener("load",u),l.addEventListener("error",h),document.head.appendChild(l)})),Oa),lo=t=>(t||"").toString().trim().toUpperCase().split(":").pop().replace(/\s+/g,""),yx=t=>{const e=(t||"").toLowerCase(),n={"15m":"15","30m":"30","45m":"45","1h":"60","2h":"120","3h":"180","4h":"240","6h":"360","8h":"480","12h":"720","1d":"D","1day":"D","1w":"W","1m":"M"};return e==="1day"?"D":e==="1w"?"W":e==="1m"?"M":n[e]??"240"};function V2({symbol:t="BTCUSDT",timeframe:e="4h"}){const n=b.useRef(null),r=b.useRef(null),i=b.useRef(null),a=b.useRef(!1),l=b.useRef(null),u=b.useRef(null),h=b.useRef(null),p=b.useRef(lo(t)),g=b.useRef(e),v=b.useRef(`tv-chart-${Math.random().toString(36).slice(2)}`),[w,S]=b.useState(!1),E=b.useCallback((T,C)=>{const N=i.current;if(!N||typeof N.activeChart!="function")return!1;try{return N.activeChart().setSymbol(`BINANCE:${T}`,yx(C),()=>{}),!0}catch(I){return console.error("[TVChart] failed to set symbol",I),!1}},[]),x=b.useRef(E);b.useEffect(()=>{x.current=E},[E]);const _=b.useCallback((T,C)=>{const N=lo(T||p.current||t||"BTCUSDT");if(!N)return;const A=`${C??g.current??e??"4h"}`.trim()||"4h";if(p.current=N,g.current=A,!a.current){l.current={symbol:N,timeframe:A};return}E(N,A)?l.current=null:l.current={symbol:N,timeframe:A}},[E,t,e]);return b.useEffect(()=>{p.current=lo(t),g.current=e,_(t,e)},[t,e,_]),b.useEffect(()=>{if(typeof window>"u")return;let T=!1;return B2().then(()=>{if(T||!r.current||!window.TradingView)return;const C=r.current;C.innerHTML="",a.current=!1;const N=lo(p.current||t||"BTCUSDT")||"BTCUSDT",I=g.current||e||"4h";p.current=N,g.current=I;try{i.current?.remove?.()}catch{}const D=new window.TradingView.widget({container_id:v.current,symbol:`BINANCE:${N}`,interval:yx(I),theme:"dark",autosize:!0,timezone:"Etc/UTC",hide_side_toolbar:!1,hide_top_toolbar:!1,withdateranges:!0,details:!1,allow_symbol_change:!0,studies:["RSI@tv-basicstudies"]});if(i.current=D,D.onChartReady?.(()=>{if(T)return;a.current=!0,S(!0);const A=l.current,L=A?.symbol??p.current,$=A?.timeframe??g.current;L&&$&&x.current(L,$)&&(l.current=null)}),typeof ResizeObserver<"u"){try{u.current?.disconnect()}catch{}const A=new ResizeObserver(()=>{try{i.current?.resize?.()}catch{}});u.current=A;const L=n.current??r.current;L&&A.observe(L)}}).catch(C=>console.error("[TVChart] load error",C)),()=>{T=!0;try{u.current?.disconnect()}catch{}u.current=null;try{i.current?.remove?.()}catch{}i.current=null,a.current=!1,l.current=null,r.current&&(r.current.innerHTML="")}},[]),b.useEffect(()=>{if(typeof window>"u")return;const T=(C,N)=>{try{const I=lo(C);if(!I)return;const D=N&&`${N}`.trim()?N:g.current||e||"4h";_(I,D)}catch{}};return window.__tvSet=T,()=>{window.__tvSet===T&&(window.__tvSet=void 0)}},[_,e]),b.useEffect(()=>{const T=C=>{const{symbol:N,timeframe:I}=C.detail||{};N&&I&&_(N,I)};return window.addEventListener("tv:update",T),()=>{window.removeEventListener("tv:update",T)}},[_]),b.useEffect(()=>{if(typeof window>"u"||typeof window.fetch!="function"||h.current)return;let T=!1;const C=window.fetch.bind(window),N=async D=>{try{const[A,L]=D;let $,ee=L?.method,z=null,K=L?.body??null;if(A instanceof Request)$=A.url,ee=A.method||ee,z=A.clone(),K=K??null;else if(typeof A=="string"||A instanceof URL)$=A.toString();else if(A&&typeof A=="object"&&"url"in A){const Q=A.url;typeof Q=="string"&&($=Q)}if(!$||!$.includes("/api/scan"))return{matched:!1};let q,J;try{const Q=new URL($,window.location.origin);q=Q.searchParams.get("symbol")??Q.searchParams.get("pair")??void 0,J=Q.searchParams.get("tf")??Q.searchParams.get("timeframe")??void 0}catch{}const X=(ee||(K?"POST":"GET")).toUpperCase(),fe=async Q=>{if(Q){try{const ce=JSON.parse(Q);if(ce&&typeof ce=="object"){const H=ce;q=H.symbol??H.pair??q,J=H.tf??H.timeframe??H.interval??J}return}catch{}try{const ce=new URLSearchParams(Q);q=q??ce.get("symbol")??ce.get("pair")??void 0,J=J??ce.get("tf")??ce.get("timeframe")??void 0}catch{}}};if(X!=="GET"){if(z)try{const Q=await z.text();await fe(Q)}catch{}else if(K){if(typeof K=="string")await fe(K);else if(typeof URLSearchParams<"u"&&K instanceof URLSearchParams)await fe(K.toString());else if(typeof FormData<"u"&&K instanceof FormData){const Q=[];K.forEach((ce,H)=>{typeof ce=="string"&&Q.push(`${encodeURIComponent(H)}=${encodeURIComponent(ce)}`)}),Q.length>0&&await fe(Q.join("&"))}}}return{matched:!0,symbol:q,timeframe:J}}catch{return{matched:!1}}},I=(...D)=>(N(D).then(({matched:L,symbol:$,timeframe:ee})=>{if(!L||T||!$)return;const z=lo($);if(!z)return;const K=ee!=null?`${ee}`:void 0,q=K&&K.trim()?K.trim():void 0;_(z,q),window.dispatchEvent(new CustomEvent("tv:update",{detail:{symbol:z,timeframe:q}}))}).catch(()=>{}),C(...D));return window.fetch=I,h.current=()=>{window.fetch=C},()=>{T=!0;try{h.current?.()}catch{}h.current=null}},[_]),d.jsxs("div",{ref:n,className:"h-[560px] w-full md:h-[620px] relative",children:[!w&&d.jsx("div",{className:"absolute inset-0 bg-slate-900/40 animate-pulse flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"w-12 h-12 bg-slate-700/60 rounded-lg mx-auto mb-2 animate-pulse"}),d.jsx("p",{className:"text-xs text-slate-400",children:"Loading chart..."})]})}),d.jsx("div",{id:v.current,ref:r,className:"h-full w-full"})]})}const wm=b.forwardRef(({className:t,type:e,...n},r)=>d.jsx("input",{type:e,className:st("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));wm.displayName="Input";function vx(t,[e,n]){return Math.min(n,Math.max(e,t))}function ot(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t?.(i),n===!1||!i.defaultPrevented)return e?.(i)}}function Cl(t,e=[]){let n=[];function r(a,l){const u=b.createContext(l),h=n.length;n=[...n,l];const p=v=>{const{scope:w,children:S,...E}=v,x=w?.[t]?.[h]||u,_=b.useMemo(()=>E,Object.values(E));return d.jsx(x.Provider,{value:_,children:S})};p.displayName=a+"Provider";function g(v,w){const S=w?.[t]?.[h]||u,E=b.useContext(S);if(E)return E;if(l!==void 0)return l;throw new Error(`\`${v}\` must be used within \`${a}\``)}return[p,g]}const i=()=>{const a=n.map(l=>b.createContext(l));return function(u){const h=u?.[t]||a;return b.useMemo(()=>({[`__scope${t}`]:{...u,[t]:h}}),[u,h])}};return i.scopeName=t,[r,z2(i,...e)]}function z2(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const l=r.reduce((u,{useScope:h,scopeName:p})=>{const v=h(a)[`__scope${p}`];return{...u,...v}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return n.scopeName=e.scopeName,n}function L_(t){const e=t+"CollectionProvider",[n,r]=Cl(e),[i,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),l=x=>{const{scope:_,children:T}=x,C=ct.useRef(null),N=ct.useRef(new Map).current;return d.jsx(i,{scope:_,itemMap:N,collectionRef:C,children:T})};l.displayName=e;const u=t+"CollectionSlot",h=dl(u),p=ct.forwardRef((x,_)=>{const{scope:T,children:C}=x,N=a(u,T),I=Bt(_,N.collectionRef);return d.jsx(h,{ref:I,children:C})});p.displayName=u;const g=t+"CollectionItemSlot",v="data-radix-collection-item",w=dl(g),S=ct.forwardRef((x,_)=>{const{scope:T,children:C,...N}=x,I=ct.useRef(null),D=Bt(_,I),A=a(g,T);return ct.useEffect(()=>(A.itemMap.set(I,{ref:I,...N}),()=>void A.itemMap.delete(I))),d.jsx(w,{[v]:"",ref:D,children:C})});S.displayName=g;function E(x){const _=a(t+"CollectionConsumer",x);return ct.useCallback(()=>{const C=_.collectionRef.current;if(!C)return[];const N=Array.from(C.querySelectorAll(`[${v}]`));return Array.from(_.itemMap.values()).sort((A,L)=>N.indexOf(A.ref.current)-N.indexOf(L.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:l,Slot:p,ItemSlot:S},E,r]}var W2=b.createContext(void 0);function xm(t){const e=b.useContext(W2);return t||e||"ltr"}var H2=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ut=H2.reduce((t,e)=>{const n=dl(`Primitive.${e}`),r=b.forwardRef((i,a)=>{const{asChild:l,...u}=i,h=l?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(h,{...u,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function q2(t,e){t&&Ci.flushSync(()=>t.dispatchEvent(e))}function Os(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...n)=>e.current?.(...n),[])}function K2(t,e=globalThis?.document){const n=Os(t);b.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var G2="DismissableLayer",wp="dismissableLayer.update",Q2="dismissableLayer.pointerDownOutside",J2="dismissableLayer.focusOutside",wx,U_=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),F_=b.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:l,onDismiss:u,...h}=t,p=b.useContext(U_),[g,v]=b.useState(null),w=g?.ownerDocument??globalThis?.document,[,S]=b.useState({}),E=Bt(e,L=>v(L)),x=Array.from(p.layers),[_]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),T=x.indexOf(_),C=g?x.indexOf(g):-1,N=p.layersWithOutsidePointerEventsDisabled.size>0,I=C>=T,D=X2(L=>{const $=L.target,ee=[...p.branches].some(z=>z.contains($));!I||ee||(i?.(L),l?.(L),L.defaultPrevented||u?.())},w),A=eD(L=>{const $=L.target;[...p.branches].some(z=>z.contains($))||(a?.(L),l?.(L),L.defaultPrevented||u?.())},w);return K2(L=>{C===p.layers.size-1&&(r?.(L),!L.defaultPrevented&&u&&(L.preventDefault(),u()))},w),b.useEffect(()=>{if(g)return n&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(wx=w.body.style.pointerEvents,w.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(g)),p.layers.add(g),xx(),()=>{n&&p.layersWithOutsidePointerEventsDisabled.size===1&&(w.body.style.pointerEvents=wx)}},[g,w,n,p]),b.useEffect(()=>()=>{g&&(p.layers.delete(g),p.layersWithOutsidePointerEventsDisabled.delete(g),xx())},[g,p]),b.useEffect(()=>{const L=()=>S({});return document.addEventListener(wp,L),()=>document.removeEventListener(wp,L)},[]),d.jsx(ut.div,{...h,ref:E,style:{pointerEvents:N?I?"auto":"none":void 0,...t.style},onFocusCapture:ot(t.onFocusCapture,A.onFocusCapture),onBlurCapture:ot(t.onBlurCapture,A.onBlurCapture),onPointerDownCapture:ot(t.onPointerDownCapture,D.onPointerDownCapture)})});F_.displayName=G2;var Z2="DismissableLayerBranch",Y2=b.forwardRef((t,e)=>{const n=b.useContext(U_),r=b.useRef(null),i=Bt(e,r);return b.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),d.jsx(ut.div,{...t,ref:i})});Y2.displayName=Z2;function X2(t,e=globalThis?.document){const n=Os(t),r=b.useRef(!1),i=b.useRef(()=>{});return b.useEffect(()=>{const a=u=>{if(u.target&&!r.current){let h=function(){$_(Q2,n,p,{discrete:!0})};const p={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=h,e.addEventListener("click",i.current,{once:!0})):h()}else e.removeEventListener("click",i.current);r.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",a),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function eD(t,e=globalThis?.document){const n=Os(t),r=b.useRef(!1);return b.useEffect(()=>{const i=a=>{a.target&&!r.current&&$_(J2,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function xx(){const t=new CustomEvent(wp);document.dispatchEvent(t)}function $_(t,e,n,{discrete:r}){const i=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?q2(i,a):i.dispatchEvent(a)}var kh=0;function tD(){b.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??bx()),document.body.insertAdjacentElement("beforeend",t[1]??bx()),kh++,()=>{kh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),kh--}},[])}function bx(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Eh="focusScope.autoFocusOnMount",Ch="focusScope.autoFocusOnUnmount",_x={bubbles:!1,cancelable:!0},nD="FocusScope",B_=b.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...l}=t,[u,h]=b.useState(null),p=Os(i),g=Os(a),v=b.useRef(null),w=Bt(e,x=>h(x)),S=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(r){let x=function(N){if(S.paused||!u)return;const I=N.target;u.contains(I)?v.current=I:ws(v.current,{select:!0})},_=function(N){if(S.paused||!u)return;const I=N.relatedTarget;I!==null&&(u.contains(I)||ws(v.current,{select:!0}))},T=function(N){if(document.activeElement===document.body)for(const D of N)D.removedNodes.length>0&&ws(u)};document.addEventListener("focusin",x),document.addEventListener("focusout",_);const C=new MutationObserver(T);return u&&C.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",_),C.disconnect()}}},[r,u,S.paused]),b.useEffect(()=>{if(u){kx.add(S);const x=document.activeElement;if(!u.contains(x)){const T=new CustomEvent(Eh,_x);u.addEventListener(Eh,p),u.dispatchEvent(T),T.defaultPrevented||(rD(lD(V_(u)),{select:!0}),document.activeElement===x&&ws(u))}return()=>{u.removeEventListener(Eh,p),setTimeout(()=>{const T=new CustomEvent(Ch,_x);u.addEventListener(Ch,g),u.dispatchEvent(T),T.defaultPrevented||ws(x??document.body,{select:!0}),u.removeEventListener(Ch,g),kx.remove(S)},0)}}},[u,p,g,S]);const E=b.useCallback(x=>{if(!n&&!r||S.paused)return;const _=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,T=document.activeElement;if(_&&T){const C=x.currentTarget,[N,I]=sD(C);N&&I?!x.shiftKey&&T===I?(x.preventDefault(),n&&ws(N,{select:!0})):x.shiftKey&&T===N&&(x.preventDefault(),n&&ws(I,{select:!0})):T===C&&x.preventDefault()}},[n,r,S.paused]);return d.jsx(ut.div,{tabIndex:-1,...l,ref:w,onKeyDown:E})});B_.displayName=nD;function rD(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(ws(r,{select:e}),document.activeElement!==n)return}function sD(t){const e=V_(t),n=Sx(e,t),r=Sx(e.reverse(),t);return[n,r]}function V_(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Sx(t,e){for(const n of t)if(!iD(n,{upTo:e}))return n}function iD(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function oD(t){return t instanceof HTMLInputElement&&"select"in t}function ws(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&oD(t)&&e&&t.select()}}var kx=aD();function aD(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=Ex(t,e),t.unshift(e)},remove(e){t=Ex(t,e),t[0]?.resume()}}}function Ex(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function lD(t){return t.filter(e=>e.tagName!=="A")}var nn=globalThis?.document?b.useLayoutEffect:()=>{},cD=$p[" useId ".trim().toString()]||(()=>{}),uD=0;function Nl(t){const[e,n]=b.useState(cD());return nn(()=>{n(r=>r??String(uD++))},[t]),t||(e?`radix-${e}`:"")}const dD=["top","right","bottom","left"],Ds=Math.min,Sn=Math.max,Iu=Math.round,Qc=Math.floor,pr=t=>({x:t,y:t}),fD={left:"right",right:"left",bottom:"top",top:"bottom"},hD={start:"end",end:"start"};function xp(t,e,n){return Sn(t,Ds(e,n))}function Vr(t,e){return typeof t=="function"?t(e):t}function zr(t){return t.split("-")[0]}function qo(t){return t.split("-")[1]}function bm(t){return t==="x"?"y":"x"}function _m(t){return t==="y"?"height":"width"}const pD=new Set(["top","bottom"]);function dr(t){return pD.has(zr(t))?"y":"x"}function Sm(t){return bm(dr(t))}function mD(t,e,n){n===void 0&&(n=!1);const r=qo(t),i=Sm(t),a=_m(i);let l=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(l=Ru(l)),[l,Ru(l)]}function gD(t){const e=Ru(t);return[bp(t),e,bp(e)]}function bp(t){return t.replace(/start|end/g,e=>hD[e])}const Cx=["left","right"],Nx=["right","left"],yD=["top","bottom"],vD=["bottom","top"];function wD(t,e,n){switch(t){case"top":case"bottom":return n?e?Nx:Cx:e?Cx:Nx;case"left":case"right":return e?yD:vD;default:return[]}}function xD(t,e,n,r){const i=qo(t);let a=wD(zr(t),n==="start",r);return i&&(a=a.map(l=>l+"-"+i),e&&(a=a.concat(a.map(bp)))),a}function Ru(t){return t.replace(/left|right|bottom|top/g,e=>fD[e])}function bD(t){return{top:0,right:0,bottom:0,left:0,...t}}function z_(t){return typeof t!="number"?bD(t):{top:t,right:t,bottom:t,left:t}}function Au(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function Tx(t,e,n){let{reference:r,floating:i}=t;const a=dr(e),l=Sm(e),u=_m(l),h=zr(e),p=a==="y",g=r.x+r.width/2-i.width/2,v=r.y+r.height/2-i.height/2,w=r[u]/2-i[u]/2;let S;switch(h){case"top":S={x:g,y:r.y-i.height};break;case"bottom":S={x:g,y:r.y+r.height};break;case"right":S={x:r.x+r.width,y:v};break;case"left":S={x:r.x-i.width,y:v};break;default:S={x:r.x,y:r.y}}switch(qo(e)){case"start":S[l]-=w*(n&&p?-1:1);break;case"end":S[l]+=w*(n&&p?-1:1);break}return S}const _D=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:l}=n,u=a.filter(Boolean),h=await(l.isRTL==null?void 0:l.isRTL(e));let p=await l.getElementRects({reference:t,floating:e,strategy:i}),{x:g,y:v}=Tx(p,r,h),w=r,S={},E=0;for(let x=0;x<u.length;x++){const{name:_,fn:T}=u[x],{x:C,y:N,data:I,reset:D}=await T({x:g,y:v,initialPlacement:r,placement:w,strategy:i,middlewareData:S,rects:p,platform:l,elements:{reference:t,floating:e}});g=C??g,v=N??v,S={...S,[_]:{...S[_],...I}},D&&E<=50&&(E++,typeof D=="object"&&(D.placement&&(w=D.placement),D.rects&&(p=D.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:i}):D.rects),{x:g,y:v}=Tx(p,w,h)),x=-1)}return{x:g,y:v,placement:w,strategy:i,middlewareData:S}};async function fl(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:a,rects:l,elements:u,strategy:h}=t,{boundary:p="clippingAncestors",rootBoundary:g="viewport",elementContext:v="floating",altBoundary:w=!1,padding:S=0}=Vr(e,t),E=z_(S),_=u[w?v==="floating"?"reference":"floating":v],T=Au(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(_)))==null||n?_:_.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(u.floating)),boundary:p,rootBoundary:g,strategy:h})),C=v==="floating"?{x:r,y:i,width:l.floating.width,height:l.floating.height}:l.reference,N=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u.floating)),I=await(a.isElement==null?void 0:a.isElement(N))?await(a.getScale==null?void 0:a.getScale(N))||{x:1,y:1}:{x:1,y:1},D=Au(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:C,offsetParent:N,strategy:h}):C);return{top:(T.top-D.top+E.top)/I.y,bottom:(D.bottom-T.bottom+E.bottom)/I.y,left:(T.left-D.left+E.left)/I.x,right:(D.right-T.right+E.right)/I.x}}const SD=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:a,platform:l,elements:u,middlewareData:h}=e,{element:p,padding:g=0}=Vr(t,e)||{};if(p==null)return{};const v=z_(g),w={x:n,y:r},S=Sm(i),E=_m(S),x=await l.getDimensions(p),_=S==="y",T=_?"top":"left",C=_?"bottom":"right",N=_?"clientHeight":"clientWidth",I=a.reference[E]+a.reference[S]-w[S]-a.floating[E],D=w[S]-a.reference[S],A=await(l.getOffsetParent==null?void 0:l.getOffsetParent(p));let L=A?A[N]:0;(!L||!await(l.isElement==null?void 0:l.isElement(A)))&&(L=u.floating[N]||a.floating[E]);const $=I/2-D/2,ee=L/2-x[E]/2-1,z=Ds(v[T],ee),K=Ds(v[C],ee),q=z,J=L-x[E]-K,X=L/2-x[E]/2+$,fe=xp(q,X,J),Q=!h.arrow&&qo(i)!=null&&X!==fe&&a.reference[E]/2-(X<q?z:K)-x[E]/2<0,ce=Q?X<q?X-q:X-J:0;return{[S]:w[S]+ce,data:{[S]:fe,centerOffset:X-fe-ce,...Q&&{alignmentOffset:ce}},reset:Q}}}),kD=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:a,rects:l,initialPlacement:u,platform:h,elements:p}=e,{mainAxis:g=!0,crossAxis:v=!0,fallbackPlacements:w,fallbackStrategy:S="bestFit",fallbackAxisSideDirection:E="none",flipAlignment:x=!0,..._}=Vr(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const T=zr(i),C=dr(u),N=zr(u)===u,I=await(h.isRTL==null?void 0:h.isRTL(p.floating)),D=w||(N||!x?[Ru(u)]:gD(u)),A=E!=="none";!w&&A&&D.push(...xD(u,x,E,I));const L=[u,...D],$=await fl(e,_),ee=[];let z=((r=a.flip)==null?void 0:r.overflows)||[];if(g&&ee.push($[T]),v){const X=mD(i,l,I);ee.push($[X[0]],$[X[1]])}if(z=[...z,{placement:i,overflows:ee}],!ee.every(X=>X<=0)){var K,q;const X=(((K=a.flip)==null?void 0:K.index)||0)+1,fe=L[X];if(fe&&(!(v==="alignment"?C!==dr(fe):!1)||z.every(H=>dr(H.placement)===C?H.overflows[0]>0:!0)))return{data:{index:X,overflows:z},reset:{placement:fe}};let Q=(q=z.filter(ce=>ce.overflows[0]<=0).sort((ce,H)=>ce.overflows[1]-H.overflows[1])[0])==null?void 0:q.placement;if(!Q)switch(S){case"bestFit":{var J;const ce=(J=z.filter(H=>{if(A){const te=dr(H.placement);return te===C||te==="y"}return!0}).map(H=>[H.placement,H.overflows.filter(te=>te>0).reduce((te,ne)=>te+ne,0)]).sort((H,te)=>H[1]-te[1])[0])==null?void 0:J[0];ce&&(Q=ce);break}case"initialPlacement":Q=u;break}if(i!==Q)return{reset:{placement:Q}}}return{}}}};function jx(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Px(t){return dD.some(e=>t[e]>=0)}const ED=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=Vr(t,e);switch(r){case"referenceHidden":{const a=await fl(e,{...i,elementContext:"reference"}),l=jx(a,n.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:Px(l)}}}case"escaped":{const a=await fl(e,{...i,altBoundary:!0}),l=jx(a,n.floating);return{data:{escapedOffsets:l,escaped:Px(l)}}}default:return{}}}}},W_=new Set(["left","top"]);async function CD(t,e){const{placement:n,platform:r,elements:i}=t,a=await(r.isRTL==null?void 0:r.isRTL(i.floating)),l=zr(n),u=qo(n),h=dr(n)==="y",p=W_.has(l)?-1:1,g=a&&h?-1:1,v=Vr(e,t);let{mainAxis:w,crossAxis:S,alignmentAxis:E}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:v.mainAxis||0,crossAxis:v.crossAxis||0,alignmentAxis:v.alignmentAxis};return u&&typeof E=="number"&&(S=u==="end"?E*-1:E),h?{x:S*g,y:w*p}:{x:w*p,y:S*g}}const ND=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:a,placement:l,middlewareData:u}=e,h=await CD(e,t);return l===((n=u.offset)==null?void 0:n.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:i+h.x,y:a+h.y,data:{...h,placement:l}}}}},TD=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:a=!0,crossAxis:l=!1,limiter:u={fn:_=>{let{x:T,y:C}=_;return{x:T,y:C}}},...h}=Vr(t,e),p={x:n,y:r},g=await fl(e,h),v=dr(zr(i)),w=bm(v);let S=p[w],E=p[v];if(a){const _=w==="y"?"top":"left",T=w==="y"?"bottom":"right",C=S+g[_],N=S-g[T];S=xp(C,S,N)}if(l){const _=v==="y"?"top":"left",T=v==="y"?"bottom":"right",C=E+g[_],N=E-g[T];E=xp(C,E,N)}const x=u.fn({...e,[w]:S,[v]:E});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[w]:a,[v]:l}}}}}},jD=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:a,middlewareData:l}=e,{offset:u=0,mainAxis:h=!0,crossAxis:p=!0}=Vr(t,e),g={x:n,y:r},v=dr(i),w=bm(v);let S=g[w],E=g[v];const x=Vr(u,e),_=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(h){const N=w==="y"?"height":"width",I=a.reference[w]-a.floating[N]+_.mainAxis,D=a.reference[w]+a.reference[N]-_.mainAxis;S<I?S=I:S>D&&(S=D)}if(p){var T,C;const N=w==="y"?"width":"height",I=W_.has(zr(i)),D=a.reference[v]-a.floating[N]+(I&&((T=l.offset)==null?void 0:T[v])||0)+(I?0:_.crossAxis),A=a.reference[v]+a.reference[N]+(I?0:((C=l.offset)==null?void 0:C[v])||0)-(I?_.crossAxis:0);E<D?E=D:E>A&&(E=A)}return{[w]:S,[v]:E}}}},PD=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:a,platform:l,elements:u}=e,{apply:h=()=>{},...p}=Vr(t,e),g=await fl(e,p),v=zr(i),w=qo(i),S=dr(i)==="y",{width:E,height:x}=a.floating;let _,T;v==="top"||v==="bottom"?(_=v,T=w===(await(l.isRTL==null?void 0:l.isRTL(u.floating))?"start":"end")?"left":"right"):(T=v,_=w==="end"?"top":"bottom");const C=x-g.top-g.bottom,N=E-g.left-g.right,I=Ds(x-g[_],C),D=Ds(E-g[T],N),A=!e.middlewareData.shift;let L=I,$=D;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&($=N),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(L=C),A&&!w){const z=Sn(g.left,0),K=Sn(g.right,0),q=Sn(g.top,0),J=Sn(g.bottom,0);S?$=E-2*(z!==0||K!==0?z+K:Sn(g.left,g.right)):L=x-2*(q!==0||J!==0?q+J:Sn(g.top,g.bottom))}await h({...e,availableWidth:$,availableHeight:L});const ee=await l.getDimensions(u.floating);return E!==ee.width||x!==ee.height?{reset:{rects:!0}}:{}}}};function Xu(){return typeof window<"u"}function Ko(t){return H_(t)?(t.nodeName||"").toLowerCase():"#document"}function Tn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function wr(t){var e;return(e=(H_(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function H_(t){return Xu()?t instanceof Node||t instanceof Tn(t).Node:!1}function tr(t){return Xu()?t instanceof Element||t instanceof Tn(t).Element:!1}function gr(t){return Xu()?t instanceof HTMLElement||t instanceof Tn(t).HTMLElement:!1}function Ix(t){return!Xu()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Tn(t).ShadowRoot}const ID=new Set(["inline","contents"]);function Tl(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=nr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!ID.has(i)}const RD=new Set(["table","td","th"]);function AD(t){return RD.has(Ko(t))}const OD=[":popover-open",":modal"];function ed(t){return OD.some(e=>{try{return t.matches(e)}catch{return!1}})}const DD=["transform","translate","scale","rotate","perspective"],MD=["transform","translate","scale","rotate","perspective","filter"],LD=["paint","layout","strict","content"];function km(t){const e=Em(),n=tr(t)?nr(t):t;return DD.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||MD.some(r=>(n.willChange||"").includes(r))||LD.some(r=>(n.contain||"").includes(r))}function UD(t){let e=Ms(t);for(;gr(e)&&!Mo(e);){if(km(e))return e;if(ed(e))return null;e=Ms(e)}return null}function Em(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const FD=new Set(["html","body","#document"]);function Mo(t){return FD.has(Ko(t))}function nr(t){return Tn(t).getComputedStyle(t)}function td(t){return tr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Ms(t){if(Ko(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Ix(t)&&t.host||wr(t);return Ix(e)?e.host:e}function q_(t){const e=Ms(t);return Mo(e)?t.ownerDocument?t.ownerDocument.body:t.body:gr(e)&&Tl(e)?e:q_(e)}function hl(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=q_(t),a=i===((r=t.ownerDocument)==null?void 0:r.body),l=Tn(i);if(a){const u=_p(l);return e.concat(l,l.visualViewport||[],Tl(i)?i:[],u&&n?hl(u):[])}return e.concat(i,hl(i,[],n))}function _p(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function K_(t){const e=nr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=gr(t),a=i?t.offsetWidth:n,l=i?t.offsetHeight:r,u=Iu(n)!==a||Iu(r)!==l;return u&&(n=a,r=l),{width:n,height:r,$:u}}function Cm(t){return tr(t)?t:t.contextElement}function jo(t){const e=Cm(t);if(!gr(e))return pr(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:a}=K_(e);let l=(a?Iu(n.width):n.width)/r,u=(a?Iu(n.height):n.height)/i;return(!l||!Number.isFinite(l))&&(l=1),(!u||!Number.isFinite(u))&&(u=1),{x:l,y:u}}const $D=pr(0);function G_(t){const e=Tn(t);return!Em()||!e.visualViewport?$D:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function BD(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Tn(t)?!1:e}function wi(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),a=Cm(t);let l=pr(1);e&&(r?tr(r)&&(l=jo(r)):l=jo(t));const u=BD(a,n,r)?G_(a):pr(0);let h=(i.left+u.x)/l.x,p=(i.top+u.y)/l.y,g=i.width/l.x,v=i.height/l.y;if(a){const w=Tn(a),S=r&&tr(r)?Tn(r):r;let E=w,x=_p(E);for(;x&&r&&S!==E;){const _=jo(x),T=x.getBoundingClientRect(),C=nr(x),N=T.left+(x.clientLeft+parseFloat(C.paddingLeft))*_.x,I=T.top+(x.clientTop+parseFloat(C.paddingTop))*_.y;h*=_.x,p*=_.y,g*=_.x,v*=_.y,h+=N,p+=I,E=Tn(x),x=_p(E)}}return Au({width:g,height:v,x:h,y:p})}function nd(t,e){const n=td(t).scrollLeft;return e?e.left+n:wi(wr(t)).left+n}function Q_(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-nd(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function VD(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const a=i==="fixed",l=wr(r),u=e?ed(e.floating):!1;if(r===l||u&&a)return n;let h={scrollLeft:0,scrollTop:0},p=pr(1);const g=pr(0),v=gr(r);if((v||!v&&!a)&&((Ko(r)!=="body"||Tl(l))&&(h=td(r)),gr(r))){const S=wi(r);p=jo(r),g.x=S.x+r.clientLeft,g.y=S.y+r.clientTop}const w=l&&!v&&!a?Q_(l,h):pr(0);return{width:n.width*p.x,height:n.height*p.y,x:n.x*p.x-h.scrollLeft*p.x+g.x+w.x,y:n.y*p.y-h.scrollTop*p.y+g.y+w.y}}function zD(t){return Array.from(t.getClientRects())}function WD(t){const e=wr(t),n=td(t),r=t.ownerDocument.body,i=Sn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=Sn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let l=-n.scrollLeft+nd(t);const u=-n.scrollTop;return nr(r).direction==="rtl"&&(l+=Sn(e.clientWidth,r.clientWidth)-i),{width:i,height:a,x:l,y:u}}const Rx=25;function HD(t,e){const n=Tn(t),r=wr(t),i=n.visualViewport;let a=r.clientWidth,l=r.clientHeight,u=0,h=0;if(i){a=i.width,l=i.height;const g=Em();(!g||g&&e==="fixed")&&(u=i.offsetLeft,h=i.offsetTop)}const p=nd(r);if(p<=0){const g=r.ownerDocument,v=g.body,w=getComputedStyle(v),S=g.compatMode==="CSS1Compat"&&parseFloat(w.marginLeft)+parseFloat(w.marginRight)||0,E=Math.abs(r.clientWidth-v.clientWidth-S);E<=Rx&&(a-=E)}else p<=Rx&&(a+=p);return{width:a,height:l,x:u,y:h}}const qD=new Set(["absolute","fixed"]);function KD(t,e){const n=wi(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,a=gr(t)?jo(t):pr(1),l=t.clientWidth*a.x,u=t.clientHeight*a.y,h=i*a.x,p=r*a.y;return{width:l,height:u,x:h,y:p}}function Ax(t,e,n){let r;if(e==="viewport")r=HD(t,n);else if(e==="document")r=WD(wr(t));else if(tr(e))r=KD(e,n);else{const i=G_(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Au(r)}function J_(t,e){const n=Ms(t);return n===e||!tr(n)||Mo(n)?!1:nr(n).position==="fixed"||J_(n,e)}function GD(t,e){const n=e.get(t);if(n)return n;let r=hl(t,[],!1).filter(u=>tr(u)&&Ko(u)!=="body"),i=null;const a=nr(t).position==="fixed";let l=a?Ms(t):t;for(;tr(l)&&!Mo(l);){const u=nr(l),h=km(l);!h&&u.position==="fixed"&&(i=null),(a?!h&&!i:!h&&u.position==="static"&&!!i&&qD.has(i.position)||Tl(l)&&!h&&J_(t,l))?r=r.filter(g=>g!==l):i=u,l=Ms(l)}return e.set(t,r),r}function QD(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const l=[...n==="clippingAncestors"?ed(e)?[]:GD(e,this._c):[].concat(n),r],u=l[0],h=l.reduce((p,g)=>{const v=Ax(e,g,i);return p.top=Sn(v.top,p.top),p.right=Ds(v.right,p.right),p.bottom=Ds(v.bottom,p.bottom),p.left=Sn(v.left,p.left),p},Ax(e,u,i));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function JD(t){const{width:e,height:n}=K_(t);return{width:e,height:n}}function ZD(t,e,n){const r=gr(e),i=wr(e),a=n==="fixed",l=wi(t,!0,a,e);let u={scrollLeft:0,scrollTop:0};const h=pr(0);function p(){h.x=nd(i)}if(r||!r&&!a)if((Ko(e)!=="body"||Tl(i))&&(u=td(e)),r){const S=wi(e,!0,a,e);h.x=S.x+e.clientLeft,h.y=S.y+e.clientTop}else i&&p();a&&!r&&i&&p();const g=i&&!r&&!a?Q_(i,u):pr(0),v=l.left+u.scrollLeft-h.x-g.x,w=l.top+u.scrollTop-h.y-g.y;return{x:v,y:w,width:l.width,height:l.height}}function Nh(t){return nr(t).position==="static"}function Ox(t,e){if(!gr(t)||nr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return wr(t)===n&&(n=n.ownerDocument.body),n}function Z_(t,e){const n=Tn(t);if(ed(t))return n;if(!gr(t)){let i=Ms(t);for(;i&&!Mo(i);){if(tr(i)&&!Nh(i))return i;i=Ms(i)}return n}let r=Ox(t,e);for(;r&&AD(r)&&Nh(r);)r=Ox(r,e);return r&&Mo(r)&&Nh(r)&&!km(r)?n:r||UD(t)||n}const YD=async function(t){const e=this.getOffsetParent||Z_,n=this.getDimensions,r=await n(t.floating);return{reference:ZD(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function XD(t){return nr(t).direction==="rtl"}const eM={convertOffsetParentRelativeRectToViewportRelativeRect:VD,getDocumentElement:wr,getClippingRect:QD,getOffsetParent:Z_,getElementRects:YD,getClientRects:zD,getDimensions:JD,getScale:jo,isElement:tr,isRTL:XD};function Y_(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function tM(t,e){let n=null,r;const i=wr(t);function a(){var u;clearTimeout(r),(u=n)==null||u.disconnect(),n=null}function l(u,h){u===void 0&&(u=!1),h===void 0&&(h=1),a();const p=t.getBoundingClientRect(),{left:g,top:v,width:w,height:S}=p;if(u||e(),!w||!S)return;const E=Qc(v),x=Qc(i.clientWidth-(g+w)),_=Qc(i.clientHeight-(v+S)),T=Qc(g),N={rootMargin:-E+"px "+-x+"px "+-_+"px "+-T+"px",threshold:Sn(0,Ds(1,h))||1};let I=!0;function D(A){const L=A[0].intersectionRatio;if(L!==h){if(!I)return l();L?l(!1,L):r=setTimeout(()=>{l(!1,1e-7)},1e3)}L===1&&!Y_(p,t.getBoundingClientRect())&&l(),I=!1}try{n=new IntersectionObserver(D,{...N,root:i.ownerDocument})}catch{n=new IntersectionObserver(D,N)}n.observe(t)}return l(!0),a}function nM(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:h=!1}=r,p=Cm(t),g=i||a?[...p?hl(p):[],...hl(e)]:[];g.forEach(T=>{i&&T.addEventListener("scroll",n,{passive:!0}),a&&T.addEventListener("resize",n)});const v=p&&u?tM(p,n):null;let w=-1,S=null;l&&(S=new ResizeObserver(T=>{let[C]=T;C&&C.target===p&&S&&(S.unobserve(e),cancelAnimationFrame(w),w=requestAnimationFrame(()=>{var N;(N=S)==null||N.observe(e)})),n()}),p&&!h&&S.observe(p),S.observe(e));let E,x=h?wi(t):null;h&&_();function _(){const T=wi(t);x&&!Y_(x,T)&&n(),x=T,E=requestAnimationFrame(_)}return n(),()=>{var T;g.forEach(C=>{i&&C.removeEventListener("scroll",n),a&&C.removeEventListener("resize",n)}),v?.(),(T=S)==null||T.disconnect(),S=null,h&&cancelAnimationFrame(E)}}const rM=ND,sM=TD,iM=kD,oM=PD,aM=ED,Dx=SD,lM=jD,cM=(t,e,n)=>{const r=new Map,i={platform:eM,...n},a={...i.platform,_c:r};return _D(t,e,{...i,platform:a})};var uM=typeof document<"u",dM=function(){},uu=uM?b.useLayoutEffect:dM;function Ou(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Ou(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const a=i[r];if(!(a==="_owner"&&t.$$typeof)&&!Ou(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function X_(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Mx(t,e){const n=X_(t);return Math.round(e*n)/n}function Th(t){const e=b.useRef(t);return uu(()=>{e.current=t}),e}function fM(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:a,floating:l}={},transform:u=!0,whileElementsMounted:h,open:p}=t,[g,v]=b.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[w,S]=b.useState(r);Ou(w,r)||S(r);const[E,x]=b.useState(null),[_,T]=b.useState(null),C=b.useCallback(H=>{H!==A.current&&(A.current=H,x(H))},[]),N=b.useCallback(H=>{H!==L.current&&(L.current=H,T(H))},[]),I=a||E,D=l||_,A=b.useRef(null),L=b.useRef(null),$=b.useRef(g),ee=h!=null,z=Th(h),K=Th(i),q=Th(p),J=b.useCallback(()=>{if(!A.current||!L.current)return;const H={placement:e,strategy:n,middleware:w};K.current&&(H.platform=K.current),cM(A.current,L.current,H).then(te=>{const ne={...te,isPositioned:q.current!==!1};X.current&&!Ou($.current,ne)&&($.current=ne,Ci.flushSync(()=>{v(ne)}))})},[w,e,n,K,q]);uu(()=>{p===!1&&$.current.isPositioned&&($.current.isPositioned=!1,v(H=>({...H,isPositioned:!1})))},[p]);const X=b.useRef(!1);uu(()=>(X.current=!0,()=>{X.current=!1}),[]),uu(()=>{if(I&&(A.current=I),D&&(L.current=D),I&&D){if(z.current)return z.current(I,D,J);J()}},[I,D,J,z,ee]);const fe=b.useMemo(()=>({reference:A,floating:L,setReference:C,setFloating:N}),[C,N]),Q=b.useMemo(()=>({reference:I,floating:D}),[I,D]),ce=b.useMemo(()=>{const H={position:n,left:0,top:0};if(!Q.floating)return H;const te=Mx(Q.floating,g.x),ne=Mx(Q.floating,g.y);return u?{...H,transform:"translate("+te+"px, "+ne+"px)",...X_(Q.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:te,top:ne}},[n,u,Q.floating,g.x,g.y]);return b.useMemo(()=>({...g,update:J,refs:fe,elements:Q,floatingStyles:ce}),[g,J,fe,Q,ce])}const hM=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Dx({element:r.current,padding:i}).fn(n):{}:r?Dx({element:r,padding:i}).fn(n):{}}}},pM=(t,e)=>({...rM(t),options:[t,e]}),mM=(t,e)=>({...sM(t),options:[t,e]}),gM=(t,e)=>({...lM(t),options:[t,e]}),yM=(t,e)=>({...iM(t),options:[t,e]}),vM=(t,e)=>({...oM(t),options:[t,e]}),wM=(t,e)=>({...aM(t),options:[t,e]}),xM=(t,e)=>({...hM(t),options:[t,e]});var bM="Arrow",eS=b.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...a}=t;return d.jsx(ut.svg,{...a,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:d.jsx("polygon",{points:"0,0 30,0 15,10"})})});eS.displayName=bM;var _M=eS;function SM(t){const[e,n]=b.useState(void 0);return nn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let l,u;if("borderBoxSize"in a){const h=a.borderBoxSize,p=Array.isArray(h)?h[0]:h;l=p.inlineSize,u=p.blockSize}else l=t.offsetWidth,u=t.offsetHeight;n({width:l,height:u})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Nm="Popper",[tS,nS]=Cl(Nm),[kM,rS]=tS(Nm),sS=t=>{const{__scopePopper:e,children:n}=t,[r,i]=b.useState(null);return d.jsx(kM,{scope:e,anchor:r,onAnchorChange:i,children:n})};sS.displayName=Nm;var iS="PopperAnchor",oS=b.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,a=rS(iS,n),l=b.useRef(null),u=Bt(e,l),h=b.useRef(null);return b.useEffect(()=>{const p=h.current;h.current=r?.current||l.current,p!==h.current&&a.onAnchorChange(h.current)}),r?null:d.jsx(ut.div,{...i,ref:u})});oS.displayName=iS;var Tm="PopperContent",[EM,CM]=tS(Tm),aS=b.forwardRef((t,e)=>{const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:a="center",alignOffset:l=0,arrowPadding:u=0,avoidCollisions:h=!0,collisionBoundary:p=[],collisionPadding:g=0,sticky:v="partial",hideWhenDetached:w=!1,updatePositionStrategy:S="optimized",onPlaced:E,...x}=t,_=rS(Tm,n),[T,C]=b.useState(null),N=Bt(e,ue=>C(ue)),[I,D]=b.useState(null),A=SM(I),L=A?.width??0,$=A?.height??0,ee=r+(a!=="center"?"-"+a:""),z=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},K=Array.isArray(p)?p:[p],q=K.length>0,J={padding:z,boundary:K.filter(TM),altBoundary:q},{refs:X,floatingStyles:fe,placement:Q,isPositioned:ce,middlewareData:H}=fM({strategy:"fixed",placement:ee,whileElementsMounted:(...ue)=>nM(...ue,{animationFrame:S==="always"}),elements:{reference:_.anchor},middleware:[pM({mainAxis:i+$,alignmentAxis:l}),h&&mM({mainAxis:!0,crossAxis:!1,limiter:v==="partial"?gM():void 0,...J}),h&&yM({...J}),vM({...J,apply:({elements:ue,rects:me,availableWidth:Ae,availableHeight:be})=>{const{width:De,height:Qe}=me.reference,pt=ue.floating.style;pt.setProperty("--radix-popper-available-width",`${Ae}px`),pt.setProperty("--radix-popper-available-height",`${be}px`),pt.setProperty("--radix-popper-anchor-width",`${De}px`),pt.setProperty("--radix-popper-anchor-height",`${Qe}px`)}}),I&&xM({element:I,padding:u}),jM({arrowWidth:L,arrowHeight:$}),w&&wM({strategy:"referenceHidden",...J})]}),[te,ne]=uS(Q),O=Os(E);nn(()=>{ce&&O?.()},[ce,O]);const G=H.arrow?.x,Te=H.arrow?.y,ke=H.arrow?.centerOffset!==0,[Oe,Me]=b.useState();return nn(()=>{T&&Me(window.getComputedStyle(T).zIndex)},[T]),d.jsx("div",{ref:X.setFloating,"data-radix-popper-content-wrapper":"",style:{...fe,transform:ce?fe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Oe,"--radix-popper-transform-origin":[H.transformOrigin?.x,H.transformOrigin?.y].join(" "),...H.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:d.jsx(EM,{scope:n,placedSide:te,onArrowChange:D,arrowX:G,arrowY:Te,shouldHideArrow:ke,children:d.jsx(ut.div,{"data-side":te,"data-align":ne,...x,ref:N,style:{...x.style,animation:ce?void 0:"none"}})})})});aS.displayName=Tm;var lS="PopperArrow",NM={top:"bottom",right:"left",bottom:"top",left:"right"},cS=b.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,a=CM(lS,r),l=NM[a.placedSide];return d.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:d.jsx(_M,{...i,ref:n,style:{...i.style,display:"block"}})})});cS.displayName=lS;function TM(t){return t!==null}var jM=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:r,middlewareData:i}=e,l=i.arrow?.centerOffset!==0,u=l?0:t.arrowWidth,h=l?0:t.arrowHeight,[p,g]=uS(n),v={start:"0%",center:"50%",end:"100%"}[g],w=(i.arrow?.x??0)+u/2,S=(i.arrow?.y??0)+h/2;let E="",x="";return p==="bottom"?(E=l?v:`${w}px`,x=`${-h}px`):p==="top"?(E=l?v:`${w}px`,x=`${r.floating.height+h}px`):p==="right"?(E=`${-h}px`,x=l?v:`${S}px`):p==="left"&&(E=`${r.floating.width+h}px`,x=l?v:`${S}px`),{data:{x:E,y:x}}}});function uS(t){const[e,n="center"]=t.split("-");return[e,n]}var PM=sS,IM=oS,RM=aS,AM=cS,OM="Portal",dS=b.forwardRef((t,e)=>{const{container:n,...r}=t,[i,a]=b.useState(!1);nn(()=>a(!0),[]);const l=n||i&&globalThis?.document?.body;return l?Ij.createPortal(d.jsx(ut.div,{...r,ref:e}),l):null});dS.displayName=OM;var DM=$p[" useInsertionEffect ".trim().toString()]||nn;function Du({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[i,a,l]=MM({defaultProp:e,onChange:n}),u=t!==void 0,h=u?t:i;{const g=b.useRef(t!==void 0);b.useEffect(()=>{const v=g.current;v!==u&&console.warn(`${r} is changing from ${v?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),g.current=u},[u,r])}const p=b.useCallback(g=>{if(u){const v=LM(g)?g(t):g;v!==t&&l.current?.(v)}else a(g)},[u,t,a,l]);return[h,p]}function MM({defaultProp:t,onChange:e}){const[n,r]=b.useState(t),i=b.useRef(n),a=b.useRef(e);return DM(()=>{a.current=e},[e]),b.useEffect(()=>{i.current!==n&&(a.current?.(n),i.current=n)},[n,i]),[n,r,a]}function LM(t){return typeof t=="function"}function UM(t){const e=b.useRef({value:t,previous:t});return b.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var fS=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),FM="VisuallyHidden",$M=b.forwardRef((t,e)=>d.jsx(ut.span,{...t,ref:e,style:{...fS,...t.style}}));$M.displayName=FM;var BM=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},co=new WeakMap,Jc=new WeakMap,Zc={},jh=0,hS=function(t){return t&&(t.host||hS(t.parentNode))},VM=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=hS(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},zM=function(t,e,n,r){var i=VM(e,Array.isArray(t)?t:[t]);Zc[n]||(Zc[n]=new WeakMap);var a=Zc[n],l=[],u=new Set,h=new Set(i),p=function(v){!v||u.has(v)||(u.add(v),p(v.parentNode))};i.forEach(p);var g=function(v){!v||h.has(v)||Array.prototype.forEach.call(v.children,function(w){if(u.has(w))g(w);else try{var S=w.getAttribute(r),E=S!==null&&S!=="false",x=(co.get(w)||0)+1,_=(a.get(w)||0)+1;co.set(w,x),a.set(w,_),l.push(w),x===1&&E&&Jc.set(w,!0),_===1&&w.setAttribute(n,"true"),E||w.setAttribute(r,"true")}catch(T){console.error("aria-hidden: cannot operate on ",w,T)}})};return g(e),u.clear(),jh++,function(){l.forEach(function(v){var w=co.get(v)-1,S=a.get(v)-1;co.set(v,w),a.set(v,S),w||(Jc.has(v)||v.removeAttribute(r),Jc.delete(v)),S||v.removeAttribute(n)}),jh--,jh||(co=new WeakMap,co=new WeakMap,Jc=new WeakMap,Zc={})}},WM=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=BM(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),zM(r,i,n,"aria-hidden")):function(){return null}},ur=function(){return ur=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ur.apply(this,arguments)};function pS(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function HM(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}var du="right-scroll-bar-position",fu="width-before-scroll-bar",qM="with-scroll-bars-hidden",KM="--removed-body-scroll-bar-size";function Ph(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function GM(t,e){var n=b.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var QM=typeof window<"u"?b.useLayoutEffect:b.useEffect,Lx=new WeakMap;function JM(t,e){var n=GM(null,function(r){return t.forEach(function(i){return Ph(i,r)})});return QM(function(){var r=Lx.get(n);if(r){var i=new Set(r),a=new Set(t),l=n.current;i.forEach(function(u){a.has(u)||Ph(u,null)}),a.forEach(function(u){i.has(u)||Ph(u,l)})}Lx.set(n,t)},[t]),n}function ZM(t){return t}function YM(t,e){e===void 0&&(e=ZM);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var l=e(a,r);return n.push(l),function(){n=n.filter(function(u){return u!==l})}},assignSyncMedium:function(a){for(r=!0;n.length;){var l=n;n=[],l.forEach(a)}n={push:function(u){return a(u)},filter:function(){return n}}},assignMedium:function(a){r=!0;var l=[];if(n.length){var u=n;n=[],u.forEach(a),l=n}var h=function(){var g=l;l=[],g.forEach(a)},p=function(){return Promise.resolve().then(h)};p(),n={push:function(g){l.push(g),p()},filter:function(g){return l=l.filter(g),n}}}};return i}function XM(t){t===void 0&&(t={});var e=YM(null);return e.options=ur({async:!0,ssr:!1},t),e}var mS=function(t){var e=t.sideCar,n=pS(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return b.createElement(r,ur({},n))};mS.isSideCarExport=!0;function eL(t,e){return t.useMedium(e),mS}var gS=XM(),Ih=function(){},rd=b.forwardRef(function(t,e){var n=b.useRef(null),r=b.useState({onScrollCapture:Ih,onWheelCapture:Ih,onTouchMoveCapture:Ih}),i=r[0],a=r[1],l=t.forwardProps,u=t.children,h=t.className,p=t.removeScrollBar,g=t.enabled,v=t.shards,w=t.sideCar,S=t.noRelative,E=t.noIsolation,x=t.inert,_=t.allowPinchZoom,T=t.as,C=T===void 0?"div":T,N=t.gapMode,I=pS(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),D=w,A=JM([n,e]),L=ur(ur({},I),i);return b.createElement(b.Fragment,null,g&&b.createElement(D,{sideCar:gS,removeScrollBar:p,shards:v,noRelative:S,noIsolation:E,inert:x,setCallbacks:a,allowPinchZoom:!!_,lockRef:n,gapMode:N}),l?b.cloneElement(b.Children.only(u),ur(ur({},L),{ref:A})):b.createElement(C,ur({},L,{className:h,ref:A}),u))});rd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};rd.classNames={fullWidth:fu,zeroRight:du};var tL=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function nL(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=tL();return e&&t.setAttribute("nonce",e),t}function rL(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function sL(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var iL=function(){var t=0,e=null;return{add:function(n){t==0&&(e=nL())&&(rL(e,n),sL(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},oL=function(){var t=iL();return function(e,n){b.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},yS=function(){var t=oL(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},aL={left:0,top:0,right:0,gap:0},Rh=function(t){return parseInt(t||"",10)||0},lL=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[Rh(n),Rh(r),Rh(i)]},cL=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return aL;var e=lL(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},uL=yS(),Po="data-scroll-locked",dL=function(t,e,n,r){var i=t.left,a=t.top,l=t.right,u=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(qM,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body[`).concat(Po,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(du,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(fu,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(du," .").concat(du,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(fu," .").concat(fu,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Po,`] {
    `).concat(KM,": ").concat(u,`px;
  }
`)},Ux=function(){var t=parseInt(document.body.getAttribute(Po)||"0",10);return isFinite(t)?t:0},fL=function(){b.useEffect(function(){return document.body.setAttribute(Po,(Ux()+1).toString()),function(){var t=Ux()-1;t<=0?document.body.removeAttribute(Po):document.body.setAttribute(Po,t.toString())}},[])},hL=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;fL();var a=b.useMemo(function(){return cL(i)},[i]);return b.createElement(uL,{styles:dL(a,!e,i,n?"":"!important")})},Sp=!1;if(typeof window<"u")try{var Yc=Object.defineProperty({},"passive",{get:function(){return Sp=!0,!0}});window.addEventListener("test",Yc,Yc),window.removeEventListener("test",Yc,Yc)}catch{Sp=!1}var uo=Sp?{passive:!1}:!1,pL=function(t){return t.tagName==="TEXTAREA"},vS=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!pL(t)&&n[e]==="visible")},mL=function(t){return vS(t,"overflowY")},gL=function(t){return vS(t,"overflowX")},Fx=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=wS(t,r);if(i){var a=xS(t,r),l=a[1],u=a[2];if(l>u)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},yL=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},vL=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},wS=function(t,e){return t==="v"?mL(e):gL(e)},xS=function(t,e){return t==="v"?yL(e):vL(e)},wL=function(t,e){return t==="h"&&e==="rtl"?-1:1},xL=function(t,e,n,r,i){var a=wL(t,window.getComputedStyle(e).direction),l=a*r,u=n.target,h=e.contains(u),p=!1,g=l>0,v=0,w=0;do{if(!u)break;var S=xS(t,u),E=S[0],x=S[1],_=S[2],T=x-_-a*E;(E||T)&&wS(t,u)&&(v+=T,w+=E);var C=u.parentNode;u=C&&C.nodeType===Node.DOCUMENT_FRAGMENT_NODE?C.host:C}while(!h&&u!==document.body||h&&(e.contains(u)||e===u));return(g&&Math.abs(v)<1||!g&&Math.abs(w)<1)&&(p=!0),p},Xc=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},$x=function(t){return[t.deltaX,t.deltaY]},Bx=function(t){return t&&"current"in t?t.current:t},bL=function(t,e){return t[0]===e[0]&&t[1]===e[1]},_L=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},SL=0,fo=[];function kL(t){var e=b.useRef([]),n=b.useRef([0,0]),r=b.useRef(),i=b.useState(SL++)[0],a=b.useState(yS)[0],l=b.useRef(t);b.useEffect(function(){l.current=t},[t]),b.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var x=HM([t.lockRef.current],(t.shards||[]).map(Bx),!0).filter(Boolean);return x.forEach(function(_){return _.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),x.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var u=b.useCallback(function(x,_){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!l.current.allowPinchZoom;var T=Xc(x),C=n.current,N="deltaX"in x?x.deltaX:C[0]-T[0],I="deltaY"in x?x.deltaY:C[1]-T[1],D,A=x.target,L=Math.abs(N)>Math.abs(I)?"h":"v";if("touches"in x&&L==="h"&&A.type==="range")return!1;var $=Fx(L,A);if(!$)return!0;if($?D=L:(D=L==="v"?"h":"v",$=Fx(L,A)),!$)return!1;if(!r.current&&"changedTouches"in x&&(N||I)&&(r.current=D),!D)return!0;var ee=r.current||D;return xL(ee,_,x,ee==="h"?N:I)},[]),h=b.useCallback(function(x){var _=x;if(!(!fo.length||fo[fo.length-1]!==a)){var T="deltaY"in _?$x(_):Xc(_),C=e.current.filter(function(D){return D.name===_.type&&(D.target===_.target||_.target===D.shadowParent)&&bL(D.delta,T)})[0];if(C&&C.should){_.cancelable&&_.preventDefault();return}if(!C){var N=(l.current.shards||[]).map(Bx).filter(Boolean).filter(function(D){return D.contains(_.target)}),I=N.length>0?u(_,N[0]):!l.current.noIsolation;I&&_.cancelable&&_.preventDefault()}}},[]),p=b.useCallback(function(x,_,T,C){var N={name:x,delta:_,target:T,should:C,shadowParent:EL(T)};e.current.push(N),setTimeout(function(){e.current=e.current.filter(function(I){return I!==N})},1)},[]),g=b.useCallback(function(x){n.current=Xc(x),r.current=void 0},[]),v=b.useCallback(function(x){p(x.type,$x(x),x.target,u(x,t.lockRef.current))},[]),w=b.useCallback(function(x){p(x.type,Xc(x),x.target,u(x,t.lockRef.current))},[]);b.useEffect(function(){return fo.push(a),t.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:w}),document.addEventListener("wheel",h,uo),document.addEventListener("touchmove",h,uo),document.addEventListener("touchstart",g,uo),function(){fo=fo.filter(function(x){return x!==a}),document.removeEventListener("wheel",h,uo),document.removeEventListener("touchmove",h,uo),document.removeEventListener("touchstart",g,uo)}},[]);var S=t.removeScrollBar,E=t.inert;return b.createElement(b.Fragment,null,E?b.createElement(a,{styles:_L(i)}):null,S?b.createElement(hL,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function EL(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const CL=eL(gS,kL);var bS=b.forwardRef(function(t,e){return b.createElement(rd,ur({},t,{ref:e,sideCar:CL}))});bS.classNames=rd.classNames;var NL=[" ","Enter","ArrowUp","ArrowDown"],TL=[" ","Enter"],xi="Select",[sd,id,jL]=L_(xi),[Go]=Cl(xi,[jL,nS]),od=nS(),[PL,Vs]=Go(xi),[IL,RL]=Go(xi),_S=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:a,value:l,defaultValue:u,onValueChange:h,dir:p,name:g,autoComplete:v,disabled:w,required:S,form:E}=t,x=od(e),[_,T]=b.useState(null),[C,N]=b.useState(null),[I,D]=b.useState(!1),A=xm(p),[L,$]=Du({prop:r,defaultProp:i??!1,onChange:a,caller:xi}),[ee,z]=Du({prop:l,defaultProp:u,onChange:h,caller:xi}),K=b.useRef(null),q=_?E||!!_.closest("form"):!0,[J,X]=b.useState(new Set),fe=Array.from(J).map(Q=>Q.props.value).join(";");return d.jsx(PM,{...x,children:d.jsxs(PL,{required:S,scope:e,trigger:_,onTriggerChange:T,valueNode:C,onValueNodeChange:N,valueNodeHasChildren:I,onValueNodeHasChildrenChange:D,contentId:Nl(),value:ee,onValueChange:z,open:L,onOpenChange:$,dir:A,triggerPointerDownPosRef:K,disabled:w,children:[d.jsx(sd.Provider,{scope:e,children:d.jsx(IL,{scope:t.__scopeSelect,onNativeOptionAdd:b.useCallback(Q=>{X(ce=>new Set(ce).add(Q))},[]),onNativeOptionRemove:b.useCallback(Q=>{X(ce=>{const H=new Set(ce);return H.delete(Q),H})},[]),children:n})}),q?d.jsxs(qS,{"aria-hidden":!0,required:S,tabIndex:-1,name:g,autoComplete:v,value:ee,onChange:Q=>z(Q.target.value),disabled:w,form:E,children:[ee===void 0?d.jsx("option",{value:""}):null,Array.from(J)]},fe):null]})})};_S.displayName=xi;var SS="SelectTrigger",kS=b.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,a=od(n),l=Vs(SS,n),u=l.disabled||r,h=Bt(e,l.onTriggerChange),p=id(n),g=b.useRef("touch"),[v,w,S]=GS(x=>{const _=p().filter(N=>!N.disabled),T=_.find(N=>N.value===l.value),C=QS(_,x,T);C!==void 0&&l.onValueChange(C.value)}),E=x=>{u||(l.onOpenChange(!0),S()),x&&(l.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return d.jsx(IM,{asChild:!0,...a,children:d.jsx(ut.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":KS(l.value)?"":void 0,...i,ref:h,onClick:ot(i.onClick,x=>{x.currentTarget.focus(),g.current!=="mouse"&&E(x)}),onPointerDown:ot(i.onPointerDown,x=>{g.current=x.pointerType;const _=x.target;_.hasPointerCapture(x.pointerId)&&_.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(E(x),x.preventDefault())}),onKeyDown:ot(i.onKeyDown,x=>{const _=v.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&w(x.key),!(_&&x.key===" ")&&NL.includes(x.key)&&(E(),x.preventDefault())})})})});kS.displayName=SS;var ES="SelectValue",CS=b.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:a,placeholder:l="",...u}=t,h=Vs(ES,n),{onValueNodeHasChildrenChange:p}=h,g=a!==void 0,v=Bt(e,h.onValueNodeChange);return nn(()=>{p(g)},[p,g]),d.jsx(ut.span,{...u,ref:v,style:{pointerEvents:"none"},children:KS(h.value)?d.jsx(d.Fragment,{children:l}):a})});CS.displayName=ES;var AL="SelectIcon",NS=b.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return d.jsx(ut.span,{"aria-hidden":!0,...i,ref:e,children:r||""})});NS.displayName=AL;var OL="SelectPortal",TS=t=>d.jsx(dS,{asChild:!0,...t});TS.displayName=OL;var bi="SelectContent",jS=b.forwardRef((t,e)=>{const n=Vs(bi,t.__scopeSelect),[r,i]=b.useState();if(nn(()=>{i(new DocumentFragment)},[]),!n.open){const a=r;return a?Ci.createPortal(d.jsx(PS,{scope:t.__scopeSelect,children:d.jsx(sd.Slot,{scope:t.__scopeSelect,children:d.jsx("div",{children:t.children})})}),a):null}return d.jsx(IS,{...t,ref:e})});jS.displayName=bi;var Gn=10,[PS,zs]=Go(bi),DL="SelectContentImpl",ML=dl("SelectContent.RemoveScroll"),IS=b.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:l,side:u,sideOffset:h,align:p,alignOffset:g,arrowPadding:v,collisionBoundary:w,collisionPadding:S,sticky:E,hideWhenDetached:x,avoidCollisions:_,...T}=t,C=Vs(bi,n),[N,I]=b.useState(null),[D,A]=b.useState(null),L=Bt(e,ue=>I(ue)),[$,ee]=b.useState(null),[z,K]=b.useState(null),q=id(n),[J,X]=b.useState(!1),fe=b.useRef(!1);b.useEffect(()=>{if(N)return WM(N)},[N]),tD();const Q=b.useCallback(ue=>{const[me,...Ae]=q().map(Qe=>Qe.ref.current),[be]=Ae.slice(-1),De=document.activeElement;for(const Qe of ue)if(Qe===De||(Qe?.scrollIntoView({block:"nearest"}),Qe===me&&D&&(D.scrollTop=0),Qe===be&&D&&(D.scrollTop=D.scrollHeight),Qe?.focus(),document.activeElement!==De))return},[q,D]),ce=b.useCallback(()=>Q([$,N]),[Q,$,N]);b.useEffect(()=>{J&&ce()},[J,ce]);const{onOpenChange:H,triggerPointerDownPosRef:te}=C;b.useEffect(()=>{if(N){let ue={x:0,y:0};const me=be=>{ue={x:Math.abs(Math.round(be.pageX)-(te.current?.x??0)),y:Math.abs(Math.round(be.pageY)-(te.current?.y??0))}},Ae=be=>{ue.x<=10&&ue.y<=10?be.preventDefault():N.contains(be.target)||H(!1),document.removeEventListener("pointermove",me),te.current=null};return te.current!==null&&(document.addEventListener("pointermove",me),document.addEventListener("pointerup",Ae,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",me),document.removeEventListener("pointerup",Ae,{capture:!0})}}},[N,H,te]),b.useEffect(()=>{const ue=()=>H(!1);return window.addEventListener("blur",ue),window.addEventListener("resize",ue),()=>{window.removeEventListener("blur",ue),window.removeEventListener("resize",ue)}},[H]);const[ne,O]=GS(ue=>{const me=q().filter(De=>!De.disabled),Ae=me.find(De=>De.ref.current===document.activeElement),be=QS(me,ue,Ae);be&&setTimeout(()=>be.ref.current.focus())}),G=b.useCallback((ue,me,Ae)=>{const be=!fe.current&&!Ae;(C.value!==void 0&&C.value===me||be)&&(ee(ue),be&&(fe.current=!0))},[C.value]),Te=b.useCallback(()=>N?.focus(),[N]),ke=b.useCallback((ue,me,Ae)=>{const be=!fe.current&&!Ae;(C.value!==void 0&&C.value===me||be)&&K(ue)},[C.value]),Oe=r==="popper"?kp:RS,Me=Oe===kp?{side:u,sideOffset:h,align:p,alignOffset:g,arrowPadding:v,collisionBoundary:w,collisionPadding:S,sticky:E,hideWhenDetached:x,avoidCollisions:_}:{};return d.jsx(PS,{scope:n,content:N,viewport:D,onViewportChange:A,itemRefCallback:G,selectedItem:$,onItemLeave:Te,itemTextRefCallback:ke,focusSelectedItem:ce,selectedItemText:z,position:r,isPositioned:J,searchRef:ne,children:d.jsx(bS,{as:ML,allowPinchZoom:!0,children:d.jsx(B_,{asChild:!0,trapped:C.open,onMountAutoFocus:ue=>{ue.preventDefault()},onUnmountAutoFocus:ot(i,ue=>{C.trigger?.focus({preventScroll:!0}),ue.preventDefault()}),children:d.jsx(F_,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:ue=>ue.preventDefault(),onDismiss:()=>C.onOpenChange(!1),children:d.jsx(Oe,{role:"listbox",id:C.contentId,"data-state":C.open?"open":"closed",dir:C.dir,onContextMenu:ue=>ue.preventDefault(),...T,...Me,onPlaced:()=>X(!0),ref:L,style:{display:"flex",flexDirection:"column",outline:"none",...T.style},onKeyDown:ot(T.onKeyDown,ue=>{const me=ue.ctrlKey||ue.altKey||ue.metaKey;if(ue.key==="Tab"&&ue.preventDefault(),!me&&ue.key.length===1&&O(ue.key),["ArrowUp","ArrowDown","Home","End"].includes(ue.key)){let be=q().filter(De=>!De.disabled).map(De=>De.ref.current);if(["ArrowUp","End"].includes(ue.key)&&(be=be.slice().reverse()),["ArrowUp","ArrowDown"].includes(ue.key)){const De=ue.target,Qe=be.indexOf(De);be=be.slice(Qe+1)}setTimeout(()=>Q(be)),ue.preventDefault()}})})})})})})});IS.displayName=DL;var LL="SelectItemAlignedPosition",RS=b.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,a=Vs(bi,n),l=zs(bi,n),[u,h]=b.useState(null),[p,g]=b.useState(null),v=Bt(e,L=>g(L)),w=id(n),S=b.useRef(!1),E=b.useRef(!0),{viewport:x,selectedItem:_,selectedItemText:T,focusSelectedItem:C}=l,N=b.useCallback(()=>{if(a.trigger&&a.valueNode&&u&&p&&x&&_&&T){const L=a.trigger.getBoundingClientRect(),$=p.getBoundingClientRect(),ee=a.valueNode.getBoundingClientRect(),z=T.getBoundingClientRect();if(a.dir!=="rtl"){const De=z.left-$.left,Qe=ee.left-De,pt=L.left-Qe,dt=L.width+pt,Vt=Math.max(dt,$.width),kt=window.innerWidth-Gn,Gt=vx(Qe,[Gn,Math.max(Gn,kt-Vt)]);u.style.minWidth=dt+"px",u.style.left=Gt+"px"}else{const De=$.right-z.right,Qe=window.innerWidth-ee.right-De,pt=window.innerWidth-L.right-Qe,dt=L.width+pt,Vt=Math.max(dt,$.width),kt=window.innerWidth-Gn,Gt=vx(Qe,[Gn,Math.max(Gn,kt-Vt)]);u.style.minWidth=dt+"px",u.style.right=Gt+"px"}const K=w(),q=window.innerHeight-Gn*2,J=x.scrollHeight,X=window.getComputedStyle(p),fe=parseInt(X.borderTopWidth,10),Q=parseInt(X.paddingTop,10),ce=parseInt(X.borderBottomWidth,10),H=parseInt(X.paddingBottom,10),te=fe+Q+J+H+ce,ne=Math.min(_.offsetHeight*5,te),O=window.getComputedStyle(x),G=parseInt(O.paddingTop,10),Te=parseInt(O.paddingBottom,10),ke=L.top+L.height/2-Gn,Oe=q-ke,Me=_.offsetHeight/2,ue=_.offsetTop+Me,me=fe+Q+ue,Ae=te-me;if(me<=ke){const De=K.length>0&&_===K[K.length-1].ref.current;u.style.bottom="0px";const Qe=p.clientHeight-x.offsetTop-x.offsetHeight,pt=Math.max(Oe,Me+(De?Te:0)+Qe+ce),dt=me+pt;u.style.height=dt+"px"}else{const De=K.length>0&&_===K[0].ref.current;u.style.top="0px";const pt=Math.max(ke,fe+x.offsetTop+(De?G:0)+Me)+Ae;u.style.height=pt+"px",x.scrollTop=me-ke+x.offsetTop}u.style.margin=`${Gn}px 0`,u.style.minHeight=ne+"px",u.style.maxHeight=q+"px",r?.(),requestAnimationFrame(()=>S.current=!0)}},[w,a.trigger,a.valueNode,u,p,x,_,T,a.dir,r]);nn(()=>N(),[N]);const[I,D]=b.useState();nn(()=>{p&&D(window.getComputedStyle(p).zIndex)},[p]);const A=b.useCallback(L=>{L&&E.current===!0&&(N(),C?.(),E.current=!1)},[N,C]);return d.jsx(FL,{scope:n,contentWrapper:u,shouldExpandOnScrollRef:S,onScrollButtonChange:A,children:d.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:I},children:d.jsx(ut.div,{...i,ref:v,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});RS.displayName=LL;var UL="SelectPopperPosition",kp=b.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=Gn,...a}=t,l=od(n);return d.jsx(RM,{...l,...a,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});kp.displayName=UL;var[FL,jm]=Go(bi,{}),Ep="SelectViewport",AS=b.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,a=zs(Ep,n),l=jm(Ep,n),u=Bt(e,a.onViewportChange),h=b.useRef(0);return d.jsxs(d.Fragment,{children:[d.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),d.jsx(sd.Slot,{scope:n,children:d.jsx(ut.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:ot(i.onScroll,p=>{const g=p.currentTarget,{contentWrapper:v,shouldExpandOnScrollRef:w}=l;if(w?.current&&v){const S=Math.abs(h.current-g.scrollTop);if(S>0){const E=window.innerHeight-Gn*2,x=parseFloat(v.style.minHeight),_=parseFloat(v.style.height),T=Math.max(x,_);if(T<E){const C=T+S,N=Math.min(E,C),I=C-N;v.style.height=N+"px",v.style.bottom==="0px"&&(g.scrollTop=I>0?I:0,v.style.justifyContent="flex-end")}}}h.current=g.scrollTop})})})]})});AS.displayName=Ep;var OS="SelectGroup",[$L,BL]=Go(OS),VL=b.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=Nl();return d.jsx($L,{scope:n,id:i,children:d.jsx(ut.div,{role:"group","aria-labelledby":i,...r,ref:e})})});VL.displayName=OS;var DS="SelectLabel",MS=b.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=BL(DS,n);return d.jsx(ut.div,{id:i.id,...r,ref:e})});MS.displayName=DS;var Mu="SelectItem",[zL,LS]=Go(Mu),US=b.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:a,...l}=t,u=Vs(Mu,n),h=zs(Mu,n),p=u.value===r,[g,v]=b.useState(a??""),[w,S]=b.useState(!1),E=Bt(e,C=>h.itemRefCallback?.(C,r,i)),x=Nl(),_=b.useRef("touch"),T=()=>{i||(u.onValueChange(r),u.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return d.jsx(zL,{scope:n,value:r,disabled:i,textId:x,isSelected:p,onItemTextChange:b.useCallback(C=>{v(N=>N||(C?.textContent??"").trim())},[]),children:d.jsx(sd.ItemSlot,{scope:n,value:r,disabled:i,textValue:g,children:d.jsx(ut.div,{role:"option","aria-labelledby":x,"data-highlighted":w?"":void 0,"aria-selected":p&&w,"data-state":p?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...l,ref:E,onFocus:ot(l.onFocus,()=>S(!0)),onBlur:ot(l.onBlur,()=>S(!1)),onClick:ot(l.onClick,()=>{_.current!=="mouse"&&T()}),onPointerUp:ot(l.onPointerUp,()=>{_.current==="mouse"&&T()}),onPointerDown:ot(l.onPointerDown,C=>{_.current=C.pointerType}),onPointerMove:ot(l.onPointerMove,C=>{_.current=C.pointerType,i?h.onItemLeave?.():_.current==="mouse"&&C.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ot(l.onPointerLeave,C=>{C.currentTarget===document.activeElement&&h.onItemLeave?.()}),onKeyDown:ot(l.onKeyDown,C=>{h.searchRef?.current!==""&&C.key===" "||(TL.includes(C.key)&&T(),C.key===" "&&C.preventDefault())})})})})});US.displayName=Mu;var Ha="SelectItemText",FS=b.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...a}=t,l=Vs(Ha,n),u=zs(Ha,n),h=LS(Ha,n),p=RL(Ha,n),[g,v]=b.useState(null),w=Bt(e,T=>v(T),h.onItemTextChange,T=>u.itemTextRefCallback?.(T,h.value,h.disabled)),S=g?.textContent,E=b.useMemo(()=>d.jsx("option",{value:h.value,disabled:h.disabled,children:S},h.value),[h.disabled,h.value,S]),{onNativeOptionAdd:x,onNativeOptionRemove:_}=p;return nn(()=>(x(E),()=>_(E)),[x,_,E]),d.jsxs(d.Fragment,{children:[d.jsx(ut.span,{id:h.textId,...a,ref:w}),h.isSelected&&l.valueNode&&!l.valueNodeHasChildren?Ci.createPortal(a.children,l.valueNode):null]})});FS.displayName=Ha;var $S="SelectItemIndicator",BS=b.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return LS($S,n).isSelected?d.jsx(ut.span,{"aria-hidden":!0,...r,ref:e}):null});BS.displayName=$S;var Cp="SelectScrollUpButton",VS=b.forwardRef((t,e)=>{const n=zs(Cp,t.__scopeSelect),r=jm(Cp,t.__scopeSelect),[i,a]=b.useState(!1),l=Bt(e,r.onScrollButtonChange);return nn(()=>{if(n.viewport&&n.isPositioned){let u=function(){const p=h.scrollTop>0;a(p)};const h=n.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[n.viewport,n.isPositioned]),i?d.jsx(WS,{...t,ref:l,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=n;u&&h&&(u.scrollTop=u.scrollTop-h.offsetHeight)}}):null});VS.displayName=Cp;var Np="SelectScrollDownButton",zS=b.forwardRef((t,e)=>{const n=zs(Np,t.__scopeSelect),r=jm(Np,t.__scopeSelect),[i,a]=b.useState(!1),l=Bt(e,r.onScrollButtonChange);return nn(()=>{if(n.viewport&&n.isPositioned){let u=function(){const p=h.scrollHeight-h.clientHeight,g=Math.ceil(h.scrollTop)<p;a(g)};const h=n.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[n.viewport,n.isPositioned]),i?d.jsx(WS,{...t,ref:l,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=n;u&&h&&(u.scrollTop=u.scrollTop+h.offsetHeight)}}):null});zS.displayName=Np;var WS=b.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,a=zs("SelectScrollButton",n),l=b.useRef(null),u=id(n),h=b.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return b.useEffect(()=>()=>h(),[h]),nn(()=>{u().find(g=>g.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[u]),d.jsx(ut.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:ot(i.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(r,50))}),onPointerMove:ot(i.onPointerMove,()=>{a.onItemLeave?.(),l.current===null&&(l.current=window.setInterval(r,50))}),onPointerLeave:ot(i.onPointerLeave,()=>{h()})})}),WL="SelectSeparator",HS=b.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return d.jsx(ut.div,{"aria-hidden":!0,...r,ref:e})});HS.displayName=WL;var Tp="SelectArrow",HL=b.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=od(n),a=Vs(Tp,n),l=zs(Tp,n);return a.open&&l.position==="popper"?d.jsx(AM,{...i,...r,ref:e}):null});HL.displayName=Tp;var qL="SelectBubbleInput",qS=b.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const i=b.useRef(null),a=Bt(r,i),l=UM(e);return b.useEffect(()=>{const u=i.current;if(!u)return;const h=window.HTMLSelectElement.prototype,g=Object.getOwnPropertyDescriptor(h,"value").set;if(l!==e&&g){const v=new Event("change",{bubbles:!0});g.call(u,e),u.dispatchEvent(v)}},[l,e]),d.jsx(ut.select,{...n,style:{...fS,...n.style},ref:a,defaultValue:e})});qS.displayName=qL;function KS(t){return t===""||t===void 0}function GS(t){const e=Os(t),n=b.useRef(""),r=b.useRef(0),i=b.useCallback(l=>{const u=n.current+l;e(u),(function h(p){n.current=p,window.clearTimeout(r.current),p!==""&&(r.current=window.setTimeout(()=>h(""),1e3))})(u)},[e]),a=b.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,a]}function QS(t,e,n){const i=e.length>1&&Array.from(e).every(p=>p===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let l=KL(t,Math.max(a,0));i.length===1&&(l=l.filter(p=>p!==n));const h=l.find(p=>p.textValue.toLowerCase().startsWith(i.toLowerCase()));return h!==n?h:void 0}function KL(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var GL=_S,JS=kS,QL=CS,JL=NS,ZL=TS,ZS=jS,YL=AS,YS=MS,XS=US,XL=FS,e4=BS,ek=VS,tk=zS,nk=HS;const t4=GL,n4=QL,rk=b.forwardRef(({className:t,children:e,...n},r)=>d.jsxs(JS,{ref:r,className:st("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,d.jsx(JL,{asChild:!0,children:d.jsx(w0,{className:"h-4 w-4 opacity-50"})})]}));rk.displayName=JS.displayName;const sk=b.forwardRef(({className:t,...e},n)=>d.jsx(ek,{ref:n,className:st("flex cursor-default items-center justify-center py-1",t),...e,children:d.jsx(Fj,{className:"h-4 w-4"})}));sk.displayName=ek.displayName;const ik=b.forwardRef(({className:t,...e},n)=>d.jsx(tk,{ref:n,className:st("flex cursor-default items-center justify-center py-1",t),...e,children:d.jsx(w0,{className:"h-4 w-4"})}));ik.displayName=tk.displayName;const ok=b.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>d.jsx(ZL,{children:d.jsxs(ZS,{ref:i,className:st("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[d.jsx(sk,{}),d.jsx(YL,{className:st("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),d.jsx(ik,{})]})}));ok.displayName=ZS.displayName;const r4=b.forwardRef(({className:t,...e},n)=>d.jsx(YS,{ref:n,className:st("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));r4.displayName=YS.displayName;const ak=b.forwardRef(({className:t,children:e,...n},r)=>d.jsxs(XS,{ref:r,className:st("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[d.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:d.jsx(e4,{children:d.jsx(Uj,{className:"h-4 w-4"})})}),d.jsx(XL,{children:e})]}));ak.displayName=XS.displayName;const s4=b.forwardRef(({className:t,...e},n)=>d.jsx(nk,{ref:n,className:st("-mx-1 my-1 h-px bg-muted",t),...e}));s4.displayName=nk.displayName;const i4=b.forwardRef(({className:t,...e},n)=>d.jsx("div",{className:"relative w-full overflow-auto",children:d.jsx("table",{ref:n,className:st("w-full caption-bottom text-sm",t),...e})}));i4.displayName="Table";const o4=b.forwardRef(({className:t,...e},n)=>d.jsx("thead",{ref:n,className:st("[&_tr]:border-b",t),...e}));o4.displayName="TableHeader";const a4=b.forwardRef(({className:t,...e},n)=>d.jsx("tbody",{ref:n,className:st("[&_tr:last-child]:border-0",t),...e}));a4.displayName="TableBody";const l4=b.forwardRef(({className:t,...e},n)=>d.jsx("tfoot",{ref:n,className:st("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));l4.displayName="TableFooter";const c4=b.forwardRef(({className:t,...e},n)=>d.jsx("tr",{ref:n,className:st("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));c4.displayName="TableRow";const u4=b.forwardRef(({className:t,...e},n)=>d.jsx("th",{ref:n,className:st("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));u4.displayName="TableHead";const d4=b.forwardRef(({className:t,...e},n)=>d.jsx("td",{ref:n,className:st("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));d4.displayName="TableCell";const f4=b.forwardRef(({className:t,...e},n)=>d.jsx("caption",{ref:n,className:st("mt-4 text-sm text-muted-foreground",t),...e}));f4.displayName="TableCaption";const h4=b.forwardRef(({className:t,...e},n)=>d.jsx("textarea",{className:st("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));h4.displayName="Textarea";function Ah(t){return t instanceof Error?/^401: .*Unauthorized/.test(t.message):!1}function lk(t){if(!t||typeof t!="object")return null;const e=t;if(Array.isArray(e.data)){const[n]=e.data;return n&&typeof n=="object"?n:null}return e.data&&typeof e.data=="object"?lk(e.data):t?.symbol?t:null}const Vx={bullish:{bg:"bg-emerald-500/10",ring:"ring-emerald-500/30",text:"text-emerald-400"},neutral:{bg:"bg-amber-500/10",ring:"ring-amber-500/30",text:"text-amber-400"},bearish:{bg:"bg-rose-500/10",ring:"ring-rose-500/30",text:"text-rose-400"}};function Oh({rows:t=[],emptyState:e}){const n=t.length>0;return d.jsxs("section",{className:`
        rounded-2xl border border-border bg-card backdrop-blur
        overflow-hidden flex flex-col mb-8
      `,"aria-label":"Breakdown Technicals",children:[d.jsx("header",{className:"sticky top-0 z-10 bg-muted/60 backdrop-blur px-4 md:px-5 py-3 border-b border-border",children:d.jsxs("h3",{className:"flex items-center gap-2 text-lg font-semibold text-foreground",children:[d.jsx("span",{className:"i-lucide-list-checks h-5 w-5 opacity-80"}),"Breakdown Technicals"]})}),d.jsx("div",{className:`
          flex-1 overflow-y-auto overscroll-contain px-4 md:px-5 py-4
          space-y-3 min-h-[400px] md:min-h-[520px] lg:min-h-[620px]
        `,style:{maxHeight:"70vh"},children:n?d.jsx("ul",{className:"grid gap-3",children:t.map((r,i)=>{const a=Vx[r.signal]??Vx.neutral;return d.jsxs("li",{className:`rounded-xl ring-1 ${a.ring} ${a.bg} p-4 md:p-5`,children:[d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsx("div",{className:"text-base font-medium",children:r.title}),d.jsx("div",{className:`text-sm font-semibold tabular-nums ${a.text}`,children:r.value})]}),r.reason&&d.jsx("div",{className:"mt-1 text-sm text-muted-foreground",children:r.reason}),d.jsx("div",{className:`mt-2 text-xs uppercase tracking-wide ${a.text}`,children:r.signal})]},`${r.title}-${i}`)})}):e??d.jsx("div",{className:"flex h-full w-full items-center justify-center py-12 text-center text-muted-foreground",children:d.jsx("div",{children:"No technical checks yet."})})})]})}function p4({symbol:t,tf:e,technicals:n}){return En({queryKey:["aiSummary",t,e,n],queryFn:async()=>{const r=await El("/api/ai/summary",{method:"POST",body:JSON.stringify({symbol:t,tf:e,technicals:n})});return typeof r?.data=="string"?r.data:""},staleTime:300*1e3,gcTime:1440*60*1e3,enabled:!1})}function m4({symbol:t,tf:e,technicals:n}){const r=yr(),{user:i}=vr(),{data:a,isLoading:l,isError:u,isFetching:h}=p4({symbol:t,tf:e,technicals:n}),p=async()=>{await r.fetchQuery({queryKey:["aiSummary",t,e,n],queryFn:async()=>{const{apiFetch:w}=await Si(async()=>{const{apiFetch:E}=await Promise.resolve().then(()=>ZA);return{apiFetch:E}},void 0),S=await w("/api/ai/summary",{method:"POST",body:JSON.stringify({symbol:t,tf:e,technicals:n})});return typeof S?.data=="string"?S.data:""}})},g=async()=>{if(!(typeof navigator>"u"||!navigator?.clipboard))try{await navigator.clipboard.writeText(a||"")}catch(w){console.warn("Failed to copy AI summary",w)}},v=b.useMemo(()=>i?l?"Generating":u?"Failed to generate. Try again.":a||"Click Generate to start analysis.":"Sign in to use AI Summary.",[a,u,l,i]);return d.jsxs("div",{className:"flex h-full flex-col rounded-2xl border border-border/70 bg-card/70 p-4",children:[d.jsxs("div",{className:"flex items-center justify-between gap-2",children:[d.jsx("h3",{className:"text-lg font-semibold",children:"AI Summary"}),d.jsx("div",{className:"flex items-center gap-2",children:i?d.jsxs(d.Fragment,{children:[d.jsxs(Ke,{variant:"default",size:"sm",onClick:p,disabled:h||l,children:[d.jsx(Xj,{className:st("mr-2 h-4 w-4",(h||l)&&"animate-spin")}),"Generate"]}),d.jsx(Ke,{variant:"ghost",size:"sm",onClick:g,disabled:!a,"aria-label":"Copy summary",children:d.jsx(Bj,{className:"h-4 w-4"})})]}):d.jsx(Ke,{asChild:!0,variant:"default",size:"sm",children:d.jsx(wt,{to:"/account",children:"Sign In"})})})]}),d.jsx("div",{className:"mt-3 flex-1 overflow-auto whitespace-pre-wrap text-sm leading-6",children:v}),d.jsxs("div",{className:"mt-3 text-xs text-muted-foreground",children:["Powered by Gemini  Context: ",t," ",e]})]})}function Dh(t){let e=(t||"").toUpperCase().replace(/[^A-Z0-9]/g,"");return e?(e.endsWith("USD")&&!e.endsWith("USDT")&&(e=e.slice(0,-3)+"USDT"),/(USDT|BTC|BUSD|FDUSD|TUSD|USDC)$/.test(e)||(e+="USDT"),e):"BTCUSDT"}function jt(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function g4(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const zx=6e4,Wx=525600,bo=43200,Lu=1440;let y4={};function ck(){return y4}function Uu(t){const e=jt(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function tl(t,e){const n=jt(t),r=jt(e),i=n.getTime()-r.getTime();return i<0?-1:i>0?1:i}function uk(t){return g4(t,Date.now())}function v4(t,e){const n=jt(t),r=jt(e),i=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return i*12+a}function dk(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function w4(t,e){return+jt(t)-+jt(e)}function x4(t){const e=jt(t);return e.setHours(23,59,59,999),e}function b4(t){const e=jt(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function _4(t){const e=jt(t);return+x4(e)==+b4(e)}function S4(t,e){const n=jt(t),r=jt(e),i=tl(n,r),a=Math.abs(v4(n,r));let l;if(a<1)l=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*a);let u=tl(n,r)===-i;_4(jt(t))&&a===1&&tl(t,r)===1&&(u=!1),l=i*(a-Number(u))}return l===0?0:l}function k4(t,e,n){const r=w4(t,e)/1e3;return dk(n?.roundingMethod)(r)}const E4={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},C4=(t,e,n)=>{let r;const i=E4[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Mh(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const N4={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},T4={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},j4={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},P4={date:Mh({formats:N4,defaultWidth:"full"}),time:Mh({formats:T4,defaultWidth:"full"}),dateTime:Mh({formats:j4,defaultWidth:"full"})},I4={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},R4=(t,e,n,r)=>I4[t];function Da(t){return(e,n)=>{const r=n?.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,u=n?.width?String(n.width):l;i=t.formattingValues[u]||t.formattingValues[l]}else{const l=t.defaultWidth,u=n?.width?String(n.width):t.defaultWidth;i=t.values[u]||t.values[l]}const a=t.argumentCallback?t.argumentCallback(e):e;return i[a]}}const A4={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},O4={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},D4={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},M4={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},L4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},U4={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},F4=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},$4={ordinalNumber:F4,era:Da({values:A4,defaultWidth:"wide"}),quarter:Da({values:O4,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Da({values:D4,defaultWidth:"wide"}),day:Da({values:M4,defaultWidth:"wide"}),dayPeriod:Da({values:L4,defaultWidth:"wide",formattingValues:U4,defaultFormattingWidth:"wide"})};function Ma(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],a=e.match(i);if(!a)return null;const l=a[0],u=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],h=Array.isArray(u)?V4(u,v=>v.test(l)):B4(u,v=>v.test(l));let p;p=t.valueCallback?t.valueCallback(h):h,p=n.valueCallback?n.valueCallback(p):p;const g=e.slice(l.length);return{value:p,rest:g}}}function B4(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function V4(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function z4(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],a=e.match(t.parsePattern);if(!a)return null;let l=t.valueCallback?t.valueCallback(a[0]):a[0];l=n.valueCallback?n.valueCallback(l):l;const u=e.slice(i.length);return{value:l,rest:u}}}const W4=/^(\d+)(th|st|nd|rd)?/i,H4=/\d+/i,q4={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},K4={any:[/^b/i,/^(a|c)/i]},G4={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Q4={any:[/1/i,/2/i,/3/i,/4/i]},J4={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Z4={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Y4={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},X4={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},eU={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},tU={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},nU={ordinalNumber:z4({matchPattern:W4,parsePattern:H4,valueCallback:t=>parseInt(t,10)}),era:Ma({matchPatterns:q4,defaultMatchWidth:"wide",parsePatterns:K4,defaultParseWidth:"any"}),quarter:Ma({matchPatterns:G4,defaultMatchWidth:"wide",parsePatterns:Q4,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Ma({matchPatterns:J4,defaultMatchWidth:"wide",parsePatterns:Z4,defaultParseWidth:"any"}),day:Ma({matchPatterns:Y4,defaultMatchWidth:"wide",parsePatterns:X4,defaultParseWidth:"any"}),dayPeriod:Ma({matchPatterns:eU,defaultMatchWidth:"any",parsePatterns:tU,defaultParseWidth:"any"})},fk={code:"en-US",formatDistance:C4,formatLong:P4,formatRelative:R4,localize:$4,match:nU,options:{weekStartsOn:0,firstWeekContainsDate:1}};function rU(t,e,n){const r=ck(),i=n?.locale??r.locale??fk,a=2520,l=tl(t,e);if(isNaN(l))throw new RangeError("Invalid time value");const u=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:l});let h,p;l>0?(h=jt(e),p=jt(t)):(h=jt(t),p=jt(e));const g=k4(p,h),v=(Uu(p)-Uu(h))/1e3,w=Math.round((g-v)/60);let S;if(w<2)return n?.includeSeconds?g<5?i.formatDistance("lessThanXSeconds",5,u):g<10?i.formatDistance("lessThanXSeconds",10,u):g<20?i.formatDistance("lessThanXSeconds",20,u):g<40?i.formatDistance("halfAMinute",0,u):g<60?i.formatDistance("lessThanXMinutes",1,u):i.formatDistance("xMinutes",1,u):w===0?i.formatDistance("lessThanXMinutes",1,u):i.formatDistance("xMinutes",w,u);if(w<45)return i.formatDistance("xMinutes",w,u);if(w<90)return i.formatDistance("aboutXHours",1,u);if(w<Lu){const E=Math.round(w/60);return i.formatDistance("aboutXHours",E,u)}else{if(w<a)return i.formatDistance("xDays",1,u);if(w<bo){const E=Math.round(w/Lu);return i.formatDistance("xDays",E,u)}else if(w<bo*2)return S=Math.round(w/bo),i.formatDistance("aboutXMonths",S,u)}if(S=S4(p,h),S<12){const E=Math.round(w/bo);return i.formatDistance("xMonths",E,u)}else{const E=S%12,x=Math.trunc(S/12);return E<3?i.formatDistance("aboutXYears",x,u):E<9?i.formatDistance("overXYears",x,u):i.formatDistance("almostXYears",x+1,u)}}function sU(t,e,n){const r=ck(),i=n?.locale??r.locale??fk,a=tl(t,e);if(isNaN(a))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:a});let u,h;a>0?(u=jt(e),h=jt(t)):(u=jt(t),h=jt(e));const p=dk(n?.roundingMethod??"round"),g=h.getTime()-u.getTime(),v=g/zx,w=Uu(h)-Uu(u),S=(g-w)/zx,E=n?.unit;let x;if(E?x=E:v<1?x="second":v<60?x="minute":v<Lu?x="hour":S<bo?x="day":S<Wx?x="month":x="year",x==="second"){const _=p(g/1e3);return i.formatDistance("xSeconds",_,l)}else if(x==="minute"){const _=p(v);return i.formatDistance("xMinutes",_,l)}else if(x==="hour"){const _=p(v/60);return i.formatDistance("xHours",_,l)}else if(x==="day"){const _=p(S/Lu);return i.formatDistance("xDays",_,l)}else if(x==="month"){const _=p(S/bo);return _===12&&E!=="month"?i.formatDistance("xYears",1,l):i.formatDistance("xMonths",_,l)}else{const _=p(S/Wx);return i.formatDistance("xYears",_,l)}}function iU(t,e){return rU(t,uk(t),e)}function hk(t,e){return sU(t,uk(t),e)}function oU(t){return Array.isArray(t)?t:t?[t]:[]}function aU(t,e={}){const n=oU(t).filter(Boolean);if(n.length===0)throw new Error("openSpotTickerStream requires at least one symbol");const r=typeof e=="function"?{onMessage:e}:e,i=r.onMessage,l=`wss://stream.binance.com:9443/stream?streams=${n.map(E=>`${E.toLowerCase()}@ticker`).join("/")}`;let u=null,h=null,p=0,g=!1;const v=r.maxReconnects??1/0,w=()=>{h&&(clearTimeout(h),h=null)},S=()=>{g||(w(),u=new WebSocket(l),u.onopen=E=>{p=0,r.onOpen?.(E)},u.onmessage=E=>{try{const x=JSON.parse(E.data),_=x&&x.data||x;if(!_)return;i?.({symbol:_.s,lastPrice:_.c,priceChange:_.p,priceChangePercent:_.P,highPrice:_.h,lowPrice:_.l,volume:_.v,quoteVolume:_.q})}catch(x){r.onError?.(x instanceof Error?x:new Error("Failed to parse ticker message"))}},u.onerror=E=>{r.onError?.(E)},u.onclose=E=>{if(r.onClose?.(E),g||p>=v)return;const x=p+1,_=Math.min(3e4,1e3*Math.pow(2,Math.min(x,5)));h=setTimeout(()=>{p=x,S()},_)})};return S(),()=>{if(g=!0,w(),u){u.onopen=null,u.onmessage=null,u.onerror=null,u.onclose=null;try{u.close(1e3,"normal")}catch{}}u=null}}const jp="4h",xs="BTCUSDT",ho="analyse-status",hu=[{value:"15m",label:"15min",display:"15m",backend:"15m",legacy:["15"]},{value:"1h",label:"1hr",display:"1h",backend:"1h",legacy:["60"]},{value:"4h",label:"4hr",display:"4h",backend:"4h",legacy:["240"]},{value:"1d",label:"1Day",display:"1D",backend:"1d",legacy:["D","1day"]},{value:"1w",label:"1Week",display:"1W",backend:"1w",legacy:["W"]}];function lU({status:t}){return null}function La(t){const e=(t||"").trim().toUpperCase();return e?e.endsWith("USDT")?e:`${e}USDT`:xs}function eu(t){const e=(t||"").toUpperCase();return e.endsWith("USDT")?`${e.slice(0,-4)}/USDT`:e||xs}const Ua=t=>{const e=(t||"").toString().trim().toUpperCase();return(e.includes(":")?e.split(":").pop():e).replace(/\s+/g,"")},cU=hu.reduce((t,e)=>(t[e.value.toLowerCase()]=e,t[e.backend.toLowerCase()]=e,e.legacy?.forEach(n=>{t[n.toLowerCase()]=e}),t),{});function Hx(t){return t?cU[t.toLowerCase()]?.value??jp:jp}function uU(t){const e=new URLSearchParams(typeof window<"u"?window.location.search.replace(/^\?/,""):"");return t&&new URLSearchParams(t).forEach((r,i)=>{e.set(i,r)}),e.toString()}function dU(){if(typeof window>"u"||!window.location.search)return;const t=new URL(window.location.href);t.search&&(t.search="",window.history.replaceState(null,"",t.toString()))}function qx(t){const e=t.replace(/[_-]+/g," ").trim();return e?e.split(" ").filter(Boolean).map(n=>n[0].toUpperCase()+n.slice(1)).join(" "):t}function fU(t){return t==null||t===""?"":typeof t=="string"?t:typeof t=="number"?Number.isFinite(t)?Math.abs(t)<100?t.toFixed(2):Math.abs(t)<1e4?t.toFixed(1):t.toFixed(0):"":String(t)}function hU(t){if(!t)return[];const e=Rs(t.breakdown);if(e.length>0)return e;const n=Rs(t.technicals);if(n.length>0)return n;const r=Rs(t.checks);if(r.length>0)return r;const i=t.indicators;if(i&&typeof i=="object"&&!Array.isArray(i)){const a=Object.entries(i).map(([l,u])=>{if(!u||typeof u!="object")return{title:qx(l),value:u,signal:void 0,reason:void 0};const h=typeof u.value=="number"||typeof u.value=="string"?u.value:(typeof u.score=="number",u.score);return{title:qx(l),value:h,signal:u.signal,reason:u.reason??u.description}}).filter(l=>l?.title);return a.length===0&&Object.keys(i).length>0&&console.warn("[Breakdown] Indicators present but no rows extracted",{indicatorCount:Object.keys(i).length,firstKey:Object.keys(i)[0],firstValue:Object.values(i)[0]}),a}return t&&typeof t=="object"&&console.warn("[Breakdown] Item has no indicators field",{itemKeys:Object.keys(t).slice(0,5),symbol:t.symbol}),[]}const tu=({label:t,value:e,hint:n,tone:r="default",icon:i})=>{const a=r==="up"?"text-emerald-400":r==="down"?"text-rose-400":"text-slate-200";return d.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-slate-700/60 bg-slate-800/40 px-3 py-1.5 shadow-sm ring-1 ring-black/5",role:"status","aria-label":t,title:typeof e=="string"?`${t}: ${e}`:t,children:[i?d.jsx("span",{className:"opacity-80",children:i}):null,d.jsx("span",{className:"text-xs text-slate-400",children:t}),d.jsx("span",{className:`text-sm font-semibold ${a}`,children:e}),n?d.jsx("span",{className:"text-[11px] text-slate-500",children:n}):null]})},Ir={priceData:t=>`analyse_price_${t}`,scanResult:(t,e)=>`analyse_scan_${t}_${e}`};function pU(){const{toast:t}=g_(),e=yr(),{signInWithGoogle:n}=vr(),{loading:r}=Hr(),{requireLogin:i,user:a}=gm(),l=!!a,u=a?.id??null,h=hm(),p=h===!0,g=h===!1,v=h===null,[w,S]=_j("/analyse/:symbol?"),[E,x]=qr(),_=b.useMemo(()=>{const ie=E??"",ge=ie.startsWith("#")?ie.slice(1):ie,[ze="",je=""]=ge.split("?");return{path:ze?ze.startsWith("/")?ze:`/${ze}`:"/",hashSearch:je,search:uU(je)}},[E]),T=b.useMemo(()=>new URLSearchParams(_.search),[_.search]),C=T.get("symbol"),N=T.get("tf"),I=La(S?.symbol||C||xs),D=Hx(N||void 0),[A,L]=b.useState(I),[$,ee]=b.useState(D),[z,K]=b.useState(Ua(I)),[q,J]=b.useState(D),X=b.useRef(!1),[fe,Q]=b.useState(I||xs),[ce,H]=b.useState(()=>{if(typeof window>"u")return null;const ie=localStorage.getItem(Ir.scanResult(Ua(I),D));return ie?JSON.parse(ie):null}),[te,ne]=b.useState(!1),O=b.useRef(null),G=b.useRef(""),Te=b.useRef(I),ke=b.useRef(D),Oe=b.useRef(!0),Me=b.useRef(!!(S?.symbol||C));b.useEffect(()=>(ne(!1),()=>{try{O.current?.abort()}catch{}}),[]),b.useEffect(()=>{const ie=La(S?.symbol||C||xs);ie!==A&&(X.current=!0,L(ie));const ge=Hx(N||void 0);ge!==$&&(X.current=!0,ee(ge))},[S?.symbol,C,N]);const ue=ie=>{const ge=(ie||"").toUpperCase();return ge.endsWith("USDT")?ge.slice(0,-4):ge};b.useEffect(()=>{Q(ue(A)||ue(xs))},[A]),b.useEffect(()=>{if(Oe.current&&A){Oe.current=!1;const ie=setTimeout(()=>{kt(A,$)},100);return()=>clearTimeout(ie)}},[]),b.useEffect(()=>{if(!w)return;if(X.current){X.current=!1;return}const ie=new URLSearchParams(_.search);ie.set("tf",$);const ge=ie.toString(),ze=`/analyse/${A}`,je=ge?`${ze}?${ge}`:ze;`${_.path}${_.hashSearch?`?${_.hashSearch}`:""}`!==je&&(x(je),dU())},[A,$,_.path,_.search,_.hashSearch,w]);const[me,Ae]=b.useState(()=>{if(typeof window>"u")return null;const ie=localStorage.getItem(Ir.priceData(I));return ie?JSON.parse(ie):null});b.useEffect(()=>{if(!A)return;const ie=localStorage.getItem(Ir.priceData(A));if(ie)try{Ae(JSON.parse(ie))}catch{}const ge=A.toUpperCase();let ze=!0,je=null;const xt=async()=>{try{console.debug("[Ticker] Fetching from backend:",ge);const Et=await fetch(`/api/market/ticker/${ge}`);if(!Et.ok)throw new Error(`HTTP ${Et.status}`);const Ze=await Et.json();if(!ze)return;if(!Ze?.symbol||!Ze?.lastPrice)throw new Error(`Invalid ticker response for ${ge}`);console.debug("[Ticker] Backend data received:",{targetSymbol:ge,apiData:Ze});const Zt={symbol:String(Ze.symbol||ge),lastPrice:String(Ze.lastPrice||"0"),priceChange:String(Ze.priceChange||"0"),priceChangePercent:String(Ze.priceChangePercent||"0"),highPrice:String(Ze.highPrice||"0"),lowPrice:String(Ze.lowPrice||"0"),volume:String(Ze.volume||"0"),quoteVolume:String(Ze.quoteVolume||"0")};console.debug("[Ticker] Setting price data:",Zt),Ae(Zt),localStorage.setItem(Ir.priceData(A),JSON.stringify(Zt))}catch(Et){if(console.warn("[Ticker] Backend fetch failed, trying WebSocket:",Et),!ze)return;mt()}},mt=()=>{try{const Et=aU(A,{onMessage:Ze=>{if(!ze||(Ze.symbol||"").toUpperCase()!==ge)return;console.debug("[Ticker] WebSocket data received:",ge),je&&clearTimeout(je);const Zt={symbol:Ze.symbol,lastPrice:Ze.lastPrice,priceChange:Ze.priceChange,priceChangePercent:Ze.priceChangePercent,highPrice:Ze.highPrice,lowPrice:Ze.lowPrice,volume:Ze.volume,quoteVolume:Ze.quoteVolume};Ae(Zt),localStorage.setItem(Ir.priceData(A),JSON.stringify(Zt))},onError:Ze=>{console.warn("[Ticker] WebSocket error:",Ze),ze&&(je&&clearTimeout(je),je=setTimeout(()=>{ze&&(console.debug("[Ticker] Retrying backend after WebSocket failure"),xt())},2e3))}});return()=>{je&&clearTimeout(je),Et?.()}}catch(Et){console.error("[Ticker] WebSocket setup failed:",Et)}};return xt(),()=>{ze=!1,je&&clearTimeout(je)}},[A]);const be=(me?.symbol||"").toUpperCase()===A.toUpperCase()?me:null;b.useEffect(()=>{console.debug("[Ticker] State after update:",{priceDataSymbol:me?.symbol,selectedSymbol:A,symbolsMatch:(me?.symbol||"").toUpperCase()===A.toUpperCase(),latestPrice:be?"LOADED":"NULL",lastPrice:be?.lastPrice,quoteVolume:be?.quoteVolume})},[me,A,be]);const De=!be,Qe=De?0:parseFloat(be?.priceChangePercent||"0"),pt=Qe>0,dt=De?"Loading...":"...";Number(ce?.totalScore??0);const Vt=ao(ce?.recommendation||"hold");Vt.toLowerCase(),Vt.replace(/_/g," ").toUpperCase();const kt=b.useCallback(async(ie,ge)=>{const je=La(ie??A??fe??xs),xt=Ua(je||xs),mt=ge??$??jp,Et=`${xt}|${mt}`;if(Et===G.current&&te){console.debug("[Analyse] Duplicate scan blocked:",Et);return}G.current=Et;try{O.current?.abort()}catch{}const Ze=new AbortController;O.current=Ze;const Zt=localStorage.getItem(Ir.scanResult(xt,mt));if(Zt)try{H(JSON.parse(Zt)),console.debug("[Analyse] Loaded cached result for",xt,mt)}catch{}ne(!0),K(xt),J(mt);let xr;try{xr=setTimeout(()=>Ze.abort(),25e3);const Kr=hu.find(Rl=>Rl.value===mt)?.backend??mt??"1d",Ni=Dh(je);t.dismiss(ho),t.loading("Analysing",{id:ho}),window.dispatchEvent(new CustomEvent("tv:update",{detail:{symbol:xt,timeframe:Kr}}));const Fn=await Bs("/api/scanner/scan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({symbol:Ni,timeframe:Kr,userId:u}),signal:Ze.signal});if(Fn.status===401)throw new Error("401: Unauthorized");if(!Fn.ok)throw new Error(`Scan HTTP ${Fn.status}`);const Gr=await Fn.json().catch(()=>null),Ws=lk(Gr);if(!Ws){t.error("Analysis unavailable",{id:ho}),H(null);return}const Il=ao(Ws.symbol||Ni).toUpperCase();t.success(`${Il} analysed`,{id:ho}),H(Ws),localStorage.setItem(Ir.scanResult(xt,mt),JSON.stringify(Ws)),e.invalidateQueries({queryKey:["aiSummary",xt,mt]}),e.invalidateQueries({queryKey:["scan-history"]}),window.__tvSet?.(xt,mt),console.log("[Analyse] Run Analysis ",xt,mt)}catch(Un){Un?.name==="AbortError"?console.warn("[Analyse] scan aborted"):Ah(Un)?(t.dismiss(ho),t({title:"Sign in required",description:"Please sign back in to analyze symbols.",variant:"destructive"}),n().catch(Kr=>{console.error("Failed to sign in after unauthorized error",Kr)})):(t.error("Analysis failed",{id:ho}),console.error("[Analyse] scan failed",Un))}finally{xr&&clearTimeout(xr),O.current=null,ne(!1)}},[te,e,A,n,fe,$,t,u]);b.useEffect(()=>{if(!a){console.debug("[Analyse] Skipping auto-run: no user");return}if(!A){console.debug("[Analyse] Skipping auto-run: no symbol selected");return}if(Oe.current){Oe.current=!1,Te.current=A,ke.current=$,console.debug("[Analyse] First render:",{selectedSymbol:A,timeframe:$,initialExplicit:Me.current}),Me.current&&(console.debug("[Analyse] Triggering initial analysis"),kt(A,$));return}const ie=A!==Te.current,ge=$!==ke.current;if(!ie&&!ge)return;const ze=Te.current,je=ke.current;Te.current=A,ke.current=$,console.warn("[Analyse] Auto-run triggered:",{symbolChanged:ie,timeframeChanged:ge,from:{symbol:ze,timeframe:je},to:{symbol:A,timeframe:$}}),kt(A,$)},[a,A,$]);const Gt=En({queryKey:["watchlist"],enabled:l&&p,staleTime:6e4,queryFn:async()=>{const ge=await(await el("GET","/api/watchlist")).json();if(Array.isArray(ge))return ge;const ze=ge&&typeof ge=="object"?ge.items:null;return Array.isArray(ze)?ze:[]}}),Ee=Rs(Gt.data);b.useMemo(()=>hu.find(ie=>ie.value===$),[$]);const Je=gu({mutationFn:async ie=>await(await el("POST","/api/watchlist",{symbol:Dh(ie)})).json(),onSuccess:()=>{t({title:"Added to watchlist",description:`${eu(A)} is now on your radar.`}),e.invalidateQueries({queryKey:["watchlist"]})},onError:ie=>{if(Ah(ie)){t({title:"Sign in required",description:"Please sign in to manage your watchlist.",variant:"destructive"}),n().catch(ge=>{console.error("Failed to sign in after unauthorized error",ge)});return}t({title:"Could not add symbol",description:"Please try again in a moment.",variant:"destructive"})}}),P=gu({mutationFn:async ie=>await(await el("DELETE",`/api/watchlist/${Dh(ie)}`)).json(),onSuccess:()=>{t({title:"Removed from watchlist",description:`${eu(A)} was removed from your list.`}),e.invalidateQueries({queryKey:["watchlist"]})},onError:ie=>{if(Ah(ie)){t({title:"Sign in required",description:"Please sign in to manage your watchlist.",variant:"destructive"}),n().catch(ge=>{console.error("Failed to sign in after unauthorized error",ge)});return}t({title:"Could not update watchlist",description:"Please try again in a moment.",variant:"destructive"})}}),V=Ee.map(ie=>(ie.symbol||"").toUpperCase()).includes(A.toUpperCase()),de=()=>{if(!p){g&&t({title:"Backend required",description:"Log into a backend-enabled deployment to manage your watchlist.",variant:"destructive"});return}if(!l){t({title:"Sign in required",description:"Log in to manage your watchlist and save scans.",variant:"destructive"});return}V?P.mutate(A):Je.mutate(A)},oe=b.useCallback(()=>{const ie=(fe||"").trim().toUpperCase();if(!ie){t({title:"Invalid input",description:"Enter a coin symbol (e.g., BTC, ETH, SOL)",variant:"destructive"});return}const ge=La(ie),ze=Ua(ge),je=localStorage.getItem(Ir.scanResult(ze,$));if(je)try{H(JSON.parse(je))}catch{}if(Q(ue(ge)),K(ze),J($),!l){L(ge),t({title:"Sign in required",description:"Sign in to run full analysis."});return}t({title:"Analyzing...",description:`Loading ${eu(ge)} indicators`}),console.debug("[Analyse] handleSearch -> runAnalysis",{fullSymbol:ge,timeframe:$}),kt(ge,$)},[fe,$,l,t,kt]),se=b.useCallback(()=>{const ie=(fe||"").trim().toUpperCase();let ge=A;if(ie&&ie!==A&&ie!==ue(A)){const mt=La(ie);ge=mt,L(mt),Q(ue(mt))}if(!ge){t({title:"Invalid symbol",description:"Select a valid symbol first.",variant:"destructive"});return}const ze=Ua(ge),je=localStorage.getItem(Ir.scanResult(ze,$));if(je)try{H(JSON.parse(je))}catch{}if(!p){K(ze),J($),g?t({title:"Backend required",variant:"destructive"}):v&&t({title:"Please wait",description:"Still checking backend status. Try again in a moment."});return}const xt=eu(ge);t({title:"Symbol updated",description:`Analyzing ${xt}`}),kt(ge,$)},[g,v,p,kt,A,fe,$,t]),xe=b.useCallback(()=>{i("/analyse")||se()},[se,i]),He=ie=>{ie.key==="Enter"&&oe()};return De||po(be?.lastPrice),De||(Qe>0,`${Qe.toFixed(2)}`),De||Kx(be?.quoteVolume),De||(d.Fragment,po(be?.lowPrice),po(be?.highPrice)),r?null:d.jsx("div",{className:"w-full max-w-screen-2xl 2xl:max-w-[1800px] mx-auto px-4 lg:px-6",children:d.jsxs("div",{className:"flex flex-col gap-5 py-6",children:[d.jsx(lU,{status:h}),d.jsx("header",{className:"flex flex-col gap-2",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsxs("h1",{className:"flex min-w-0 items-center gap-2 break-keep whitespace-normal text-3xl font-bold text-foreground",children:[d.jsx(tm,{className:"h-7 w-7 text-primary"}),d.jsx("span",{className:"min-w-0 overflow-hidden text-ellipsis whitespace-nowrap",children:"Decision Hub"})]}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"Real-time charts, quantitative scans, and idea discovery in one cockpit."})]}),d.jsxs(Ke,{variant:V?"secondary":"outline",onClick:de,disabled:Je.isPending||P.isPending||!p,children:[d.jsx(Jj,{className:`h-4 w-4 ${V?"fill-yellow-400 text-yellow-400":""}`}),d.jsx("span",{className:"ml-2",children:V?"Watching":"Add to Watchlist"})]})]})}),d.jsxs("div",{className:"rounded-xl border border-slate-700/60 bg-slate-900/40 p-3 md:p-3",children:[d.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[d.jsx("div",{className:"min-w-[260px] grow lg:basis-[66%]",children:d.jsxs("div",{className:"relative",children:[d.jsx(wm,{placeholder:"Enter coin (BTC, ETH, SOL...)",value:fe,onChange:ie=>Q(ie.target.value.toUpperCase()),onKeyPress:He,className:"h-11 w-full min-w-0 pl-10","data-testid":"input-search-symbol"}),d.jsx(al,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"})]})}),d.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground md:text-sm",children:[d.jsx(ch,{className:"h-4 w-4"}),d.jsx("span",{className:"whitespace-nowrap",children:"Timeframe"}),d.jsxs(t4,{value:$,onValueChange:ee,children:[d.jsx(rk,{className:"h-9 min-w-[140px] border-border/60 bg-background/70 text-left text-foreground","data-testid":"select-timeframe",children:d.jsx(n4,{})}),d.jsx(ok,{children:hu.map(ie=>d.jsx(ak,{value:ie.value,children:ie.label},ie.value))})]})]}),d.jsx("button",{type:"button",onClick:xe,disabled:te,className:"ml-auto rounded-lg bg-primary text-primary-foreground px-4 py-2 text-sm font-medium hover:bg-primary/90 active:bg-primary/80 disabled:opacity-60 transition-colors","data-testid":"button-scan",children:te?"Scanning":"Run Analysis"})]}),d.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-3 md:gap-4",children:[d.jsx(tu,{label:"Current Price",value:De?dt:po(be?.lastPrice),icon:d.jsx(ip,{className:"h-3.5 w-3.5 text-emerald-300"})}),d.jsx(tu,{label:"24h Change",value:De?dt:`${Qe>0?"+":""}${Qe.toFixed(2)}%`,tone:De?"default":Qe>0?"up":Qe<0?"down":"default",icon:De?d.jsx(Mr,{className:"h-3.5 w-3.5 text-slate-300"}):pt?d.jsx(Mr,{className:"h-3.5 w-3.5 text-emerald-300"}):Qe<0?d.jsx(lp,{className:"h-3.5 w-3.5 text-rose-300"}):d.jsx(Mr,{className:"h-3.5 w-3.5 text-slate-300"})}),d.jsx(tu,{label:"24h Volume",value:De?dt:Kx(be?.quoteVolume),icon:d.jsx(ap,{className:"h-3.5 w-3.5 text-sky-300"})}),d.jsx(tu,{label:"Today's Range",value:De?dt:`${po(be?.lowPrice)} - ${po(be?.highPrice)}`,icon:d.jsx(ch,{className:"h-3.5 w-3.5 text-amber-300"})})]})]}),!1,d.jsx("div",{className:"mt-4",children:d.jsxs("div",{className:`
            grid gap-6 items-start content-start
            grid-cols-1
            xl:grid-cols-[minmax(0,1fr)_minmax(0,2fr)_minmax(0,1fr)]
          `,children:[d.jsx("section",{className:"min-w-0 overflow-hidden",children:ce?(()=>{const ze=hU(ce).map(je=>{const xt=ao(je?.signal).toLowerCase(),mt=xt==="bullish"||xt==="bearish"?xt:"neutral",Et=je?.value,Ze=fU(Et);return{title:ao(je?.title||je?.key||je?.name),value:Ze,signal:mt,reason:je?.reason?ao(je.reason):je?.description?ao(je.description):void 0}}).filter(je=>je.title);return ze.length===0?d.jsx(Oh,{rows:[]}):d.jsx(Oh,{rows:ze})})():d.jsx(Oh,{rows:[],emptyState:d.jsxs("div",{className:"py-12 text-center text-muted-foreground",children:[d.jsx(al,{className:"mx-auto mb-4 h-12 w-12 opacity-40"}),d.jsx("h4",{className:"text-lg font-medium text-white",children:"No analysis yet"}),d.jsx("p",{className:"mx-auto mt-1 max-w-xs text-sm",children:"Run a scan to unlock AI-enhanced technical breakdowns across all indicators."})]})})}),d.jsx("section",{className:"min-w-0 overflow-hidden",children:d.jsxs(tt,{className:"flex h-full flex-col border-border/70 bg-card/70",children:[d.jsx(Cn,{className:"pb-2",children:d.jsx(Nn,{className:"text-lg font-semibold",children:"Price Action"})}),d.jsx(nt,{className:"p-0",children:d.jsx("div",{className:"h-[560px] min-w-0 overflow-hidden rounded-xl border border-slate-700/60 bg-slate-900/40 md:h-[620px]",children:d.jsx("div",{className:"h-full w-full",children:d.jsx(V2,{symbol:z,timeframe:q},`${z}-${q}`)})})})]})}),d.jsx("section",{className:"min-w-0 overflow-hidden",children:d.jsx(m4,{symbol:A,tf:$,technicals:ce?.indicators})})]})})]})})}function po(t){const e=parseFloat(t||"0");return Number.isNaN(e)?"$0.00":e>=1e3?`$${e.toLocaleString(void 0,{maximumFractionDigits:2})}`:e>=1?`$${e.toFixed(4)}`:`$${e.toFixed(8)}`}function Kx(t){const e=parseFloat(t||"0");return Number.isNaN(e)?"$0.00":e>=1e9?`$${(e/1e9).toFixed(2)}B`:e>=1e6?`$${(e/1e6).toFixed(2)}M`:e>=1e3?`$${(e/1e3).toFixed(2)}K`:`$${e.toFixed(2)}`}function mU(t){const e=(t||"").toUpperCase();return e?e.endsWith("USDT")?`${e.slice(0,-4)}/USDT`:e:"BTC/USDT"}function gU(t){if(!t&&t!==0)return null;const e=t instanceof Date?t:typeof t=="number"?new Date(t*1e3):new Date(t);return Number.isNaN(e.getTime())?null:hk(e,{addSuffix:!0})}function yU(){const{isAuthenticated:t,isLoading:e}=vr(),n=En({queryKey:["watchlist-page",t],queryFn:async()=>{const u=await(await el("GET","/api/watchlist")).json();return Rs(u)},enabled:t}),r=b.useMemo(()=>n.data?Rs(n.data):[],[n.data]),i=()=>{vm("#/account")},a=d.jsxs("div",{className:"rounded-xl border border-dashed border-border/60 bg-background/40 p-6 text-center",children:[d.jsx(Mj,{className:"mx-auto mb-3 h-10 w-10 text-primary"}),d.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Build your first watchlist"}),d.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Add any market from the Analyse workspace to begin tracking live performance."}),d.jsxs("div",{className:"mt-4 flex flex-col gap-2 sm:flex-row sm:justify-center",children:[d.jsx(wt,{href:"/analyse/BTCUSDT",children:d.jsxs(Ke,{variant:"default",className:"w-full sm:w-auto",children:[d.jsx(bw,{className:"mr-2 h-4 w-4"}),"Browse analysis"]})}),d.jsx(wt,{href:"/analyse/BTCUSDT",children:d.jsxs(Ke,{className:"w-full sm:w-auto",children:[d.jsx(op,{className:"mr-2 h-4 w-4"}),"Open scanner"]})})]})]});return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-2xl font-bold tracking-tight text-foreground sm:text-3xl",children:"Watchlist"}),d.jsx("p",{className:"text-sm text-muted-foreground sm:text-base",children:"Keep your high-priority markets close and jump straight into analysis with a single tap."})]}),t?d.jsxs(Ke,{variant:"outline",onClick:()=>n.refetch(),disabled:n.isLoading||n.isRefetching,className:"w-full sm:w-auto",children:[d.jsx(Gj,{className:"mr-2 h-4 w-4"})," Refresh"]}):null]}),d.jsxs(tt,{className:"border-border/70 bg-card/70",children:[d.jsxs(Cn,{className:"flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between",children:[d.jsxs("div",{children:[d.jsx(Nn,{className:"text-xl font-semibold text-foreground",children:"Saved markets"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"Markets you have marked from the Analyse workspace."})]}),r.length>0?d.jsxs(Xn,{variant:"default",className:"w-fit",children:[r.length," ",r.length===1?"symbol":"symbols"]}):null]}),d.jsx(nt,{className:"space-y-4",children:t?n.isLoading||n.isRefetching?d.jsx("div",{className:"space-y-2",children:Array.from({length:5}).map((l,u)=>d.jsx(ym,{className:"h-12 w-full rounded-xl"},u))}):n.error?d.jsxs("div",{className:"rounded-xl border border-destructive/30 bg-destructive/10 p-4 text-center",children:[d.jsx("p",{className:"text-sm font-medium text-destructive",children:"Unable to load watchlist right now."}),d.jsx("p",{className:"mt-2 text-xs text-destructive/80",children:"Please retry in a moment. If the problem persists, verify your network connection."}),d.jsx(Ke,{variant:"outline",className:"mt-4",onClick:()=>n.refetch(),disabled:n.isRefetching,children:"Try again"})]}):r.length===0?a:d.jsx("div",{className:"space-y-3",children:r.map(l=>{const u=gU(l.createdAt),h=mU(l.symbol),p=(l.symbol||"").toUpperCase();return d.jsxs("div",{className:"flex flex-col gap-3 rounded-xl border border-border/60 bg-card/60 p-4 transition hover:border-primary/60 hover:bg-primary/5 sm:flex-row sm:items-center sm:justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-base font-semibold text-foreground",children:h}),d.jsx("p",{className:"text-xs text-muted-foreground",children:u?`Added ${u}`:"Saved market"})]}),d.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row",children:[d.jsx(wt,{href:`/analyse/${p}`,className:"w-full sm:w-auto",children:d.jsxs(Ke,{className:"w-full",children:[d.jsx(op,{className:"mr-2 h-4 w-4"}),"Open in Analyse"]})}),d.jsx(wt,{href:`/charts/${p}`,className:"w-full sm:w-auto",children:d.jsxs(Ke,{variant:"outline",className:"w-full",children:[d.jsx(bw,{className:"mr-2 h-4 w-4"}),"View chart"]})})]})]},l.id)})}):d.jsxs("div",{className:"rounded-xl border border-border/60 bg-card/60 p-6 text-center",children:[d.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Sign in to sync your watchlist"}),d.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Log in to securely store markets across devices and unlock instant access from the dashboard."}),d.jsx(Ke,{onClick:i,className:"mt-4",disabled:e,children:"Start with Google"})]})})]})]})}function vU(t){const e=(t||"").toUpperCase();return e?e.endsWith("USDT")?`${e.slice(0,-4)}/USDT`:e:"BTC/USDT"}const wU=[{id:"breakout",title:"Breakout watcher",description:"Alert when price moves 5% within the selected timeframe.",badge:"Momentum"},{id:"reversal",title:"Trend reversal",description:"Get notified when RSI crosses bullish or bearish thresholds.",badge:"Technicals"},{id:"volume",title:"Volume spike",description:"Ping when 24h volume surges above the rolling average.",badge:"Liquidity"}];function xU(){const{isAuthenticated:t,isLoading:e}=vr(),n=En({queryKey:["alerts-watchlist",t],queryFn:async()=>{const l=await(await el("GET","/api/watchlist")).json();return Rs(l)},enabled:t}),r=b.useMemo(()=>n.data?Rs(n.data):[],[n.data]),i=()=>{vm("#/account")};return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Smart alerts"}),d.jsx("p",{className:"text-muted-foreground",children:"Stay ahead of market swings with proactive notifications tied to your watchlist."})]}),t?d.jsxs(Xn,{variant:"outline",className:"w-fit gap-2 px-3 py-1 text-sm",children:[d.jsx(em,{className:"h-4 w-4"})," Synced with watchlist"]}):null]}),d.jsxs(tt,{className:"border-border/70 bg-card/70",children:[d.jsx(Cn,{children:d.jsx(Nn,{className:"text-xl font-semibold text-foreground",children:"Active markets"})}),d.jsx(nt,{className:"space-y-4",children:t?n.isLoading||n.isRefetching?d.jsx("div",{className:"space-y-2",children:Array.from({length:4}).map((a,l)=>d.jsx(ym,{className:"h-12 w-full rounded-xl"},l))}):n.error?d.jsxs("div",{className:"rounded-xl border border-destructive/30 bg-destructive/10 p-4 text-center",children:[d.jsx("p",{className:"text-sm font-medium text-destructive",children:"We couldn't fetch your saved markets."}),d.jsx("p",{className:"mt-2 text-xs text-destructive/80",children:"Refresh the page or try again in a few moments."}),d.jsx(Ke,{variant:"outline",className:"mt-4",onClick:()=>n.refetch(),disabled:n.isRefetching,children:"Retry"})]}):r.length===0?d.jsxs("div",{className:"rounded-xl border border-dashed border-border/60 bg-background/40 p-6 text-center",children:[d.jsx(Kj,{className:"mx-auto mb-3 h-10 w-10 text-primary"}),d.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"No markets are being monitored yet"}),d.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Star at least one pair from the watchlist or charts to begin receiving price movement alerts."}),d.jsx(wt,{href:"/watchlist",children:d.jsx(Ke,{variant:"default",className:"mt-4",children:"Manage watchlist"})})]}):d.jsx("div",{className:"space-y-3",children:r.map(a=>{const l=vU(a.symbol),u=(a.symbol||"").toUpperCase();return d.jsxs("div",{className:`flex flex-col gap-3 rounded-xl border border-border/60 bg-card/60 p-4 transition hover:border-pri
mary/60 hover:bg-primary/5 sm:flex-row sm:items-center sm:justify-between`,children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs(Xn,{variant:"default",className:"gap-1",children:[d.jsx(_0,{className:"h-3.5 w-3.5"}),"Priority"]}),d.jsx("p",{className:"text-base font-semibold text-foreground",children:l})]}),d.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row",children:[d.jsx(wt,{href:`/analyse/${u}`,className:"w-full sm:w-auto",children:d.jsx(Ke,{className:"w-full",children:"Configure in Analyse"})}),d.jsx(wt,{href:`/charts/${u}`,className:"w-full sm:w-auto",children:d.jsx(Ke,{variant:"outline",className:"w-full",children:"Monitor live chart"})})]})]},a.id)})}):d.jsxs("div",{className:"rounded-xl border border-border/60 bg-card/60 p-6 text-center",children:[d.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Sign in to configure alerts"}),d.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Alerts follow the symbols you star. Connect your account to start receiving timely nudges."}),d.jsx(Ke,{onClick:i,className:"mt-4",disabled:e,children:"Start with Google"})]})})]}),d.jsxs(tt,{className:"border-border/70 bg-card/60",children:[d.jsx(Cn,{children:d.jsxs(Nn,{className:"flex items-center gap-2 text-lg font-semibold text-foreground",children:[d.jsx(S0,{className:"h-5 w-5 text-primary"})," Suggested triggers"]})}),d.jsx(nt,{className:"grid gap-3 grid-cols-1 sm:grid-cols-2 md:grid-cols-3",children:wU.map(a=>d.jsxs("div",{className:"rounded-xl border border-border/60 bg-card/80 p-4",children:[d.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[d.jsx("p",{className:"font-semibold text-foreground text-sm",children:a.title}),d.jsx(Xn,{variant:"outline",className:"text-xs w-fit",children:a.badge})]}),d.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:a.description})]},a.id))})]}),d.jsxs(tt,{className:"border-border/70 bg-card/60",children:[d.jsx(Cn,{children:d.jsxs(Nn,{className:"flex items-center gap-2 text-lg font-semibold text-foreground",children:[d.jsx(Qj,{className:"h-5 w-5 text-primary"})," Delivery preferences"]})}),d.jsxs(nt,{className:"space-y-3 text-sm text-muted-foreground",children:[d.jsx("p",{children:"Alerts arrive instantly on the device you're signed into. We'll surface urgent moves in-app and follow up with email summaries for anything you miss."}),d.jsx("p",{children:"Prefer quieter trading sessions? Toggle Do Not Disturb from the top navigation to pause alerts while keeping your watchlist intact."})]})]})]})}var rt;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const a={};for(const l of i)a[l]=l;return a},t.getValidEnumValues=i=>{const a=t.objectKeys(i).filter(u=>typeof i[i[u]]!="number"),l={};for(const u of a)l[u]=i[u];return t.objectValues(l)},t.objectValues=i=>t.objectKeys(i).map(function(a){return i[a]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const l in i)Object.prototype.hasOwnProperty.call(i,l)&&a.push(l);return a},t.find=(i,a)=>{for(const l of i)if(a(l))return l},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function r(i,a=" | "){return i.map(l=>typeof l=="string"?`'${l}'`:l).join(a)}t.joinValues=r,t.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(rt||(rt={}));var Gx;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Gx||(Gx={}));const Se=rt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),bs=t=>{switch(typeof t){case"undefined":return Se.undefined;case"string":return Se.string;case"number":return Number.isNaN(t)?Se.nan:Se.number;case"boolean":return Se.boolean;case"function":return Se.function;case"bigint":return Se.bigint;case"symbol":return Se.symbol;case"object":return Array.isArray(t)?Se.array:t===null?Se.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Se.promise:typeof Map<"u"&&t instanceof Map?Se.map:typeof Set<"u"&&t instanceof Set?Se.set:typeof Date<"u"&&t instanceof Date?Se.date:Se.object;default:return Se.unknown}},le=rt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Wr extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(a){return a.message},r={_errors:[]},i=a=>{for(const l of a.issues)if(l.code==="invalid_union")l.unionErrors.map(i);else if(l.code==="invalid_return_type")i(l.returnTypeError);else if(l.code==="invalid_arguments")i(l.argumentsError);else if(l.path.length===0)r._errors.push(n(l));else{let u=r,h=0;for(;h<l.path.length;){const p=l.path[h];h===l.path.length-1?(u[p]=u[p]||{_errors:[]},u[p]._errors.push(n(l))):u[p]=u[p]||{_errors:[]},u=u[p],h++}}};return i(this),r}static assert(e){if(!(e instanceof Wr))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,rt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)if(i.path.length>0){const a=i.path[0];n[a]=n[a]||[],n[a].push(e(i))}else r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Wr.create=t=>new Wr(t);const Pp=(t,e)=>{let n;switch(t.code){case le.invalid_type:t.received===Se.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case le.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,rt.jsonStringifyReplacer)}`;break;case le.unrecognized_keys:n=`Unrecognized key(s) in object: ${rt.joinValues(t.keys,", ")}`;break;case le.invalid_union:n="Invalid input";break;case le.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${rt.joinValues(t.options)}`;break;case le.invalid_enum_value:n=`Invalid enum value. Expected ${rt.joinValues(t.options)}, received '${t.received}'`;break;case le.invalid_arguments:n="Invalid function arguments";break;case le.invalid_return_type:n="Invalid function return type";break;case le.invalid_date:n="Invalid date";break;case le.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:rt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case le.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case le.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case le.custom:n="Invalid input";break;case le.invalid_intersection_types:n="Intersection results could not be merged";break;case le.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case le.not_finite:n="Number must be finite";break;default:n=e.defaultError,rt.assertNever(t)}return{message:n}};let bU=Pp;function _U(){return bU}const SU=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,a=[...n,...i.path||[]],l={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let u="";const h=r.filter(p=>!!p).slice().reverse();for(const p of h)u=p(l,{data:e,defaultError:u}).message;return{...i,path:a,message:u}};function pe(t,e){const n=_U(),r=SU({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Pp?void 0:Pp].filter(i=>!!i)});t.common.issues.push(r)}class jn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return $e;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n){const a=await i.key,l=await i.value;r.push({key:a,value:l})}return jn.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:a,value:l}=i;if(a.status==="aborted"||l.status==="aborted")return $e;a.status==="dirty"&&e.dirty(),l.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof l.value<"u"||i.alwaysSet)&&(r[a.value]=l.value)}return{status:e.value,value:r}}}const $e=Object.freeze({status:"aborted"}),qa=t=>({status:"dirty",value:t}),Ln=t=>({status:"valid",value:t}),Qx=t=>t.status==="aborted",Jx=t=>t.status==="dirty",Lo=t=>t.status==="valid",Fu=t=>typeof Promise<"u"&&t instanceof Promise;var Ne;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Ne||(Ne={}));class Ls{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Zx=(t,e)=>{if(Lo(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Wr(t.common.issues);return this._error=n,this._error}}};function Ge(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(l,u)=>{const{message:h}=t;return l.code==="invalid_enum_value"?{message:h??u.defaultError}:typeof u.data>"u"?{message:h??r??u.defaultError}:l.code!=="invalid_type"?{message:u.defaultError}:{message:h??n??u.defaultError}},description:i}}class Xe{get description(){return this._def.description}_getType(e){return bs(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:bs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new jn,ctx:{common:e.parent.common,data:e.data,parsedType:bs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Fu(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){const r={common:{issues:[],async:n?.async??!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:bs(e)},i=this._parseSync({data:e,path:r.path,parent:r});return Zx(r,i)}"~validate"(e){const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:bs(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:n});return Lo(r)?{value:r.value}:{issues:n.common.issues}}catch(r){r?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(r=>Lo(r)?{value:r.value}:{issues:n.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:bs(e)},i=this._parse({data:e,path:r.path,parent:r}),a=await(Fu(i)?i:Promise.resolve(i));return Zx(r,a)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,a)=>{const l=e(i),u=()=>a.addIssue({code:le.custom,...r(i)});return typeof Promise<"u"&&l instanceof Promise?l.then(h=>h?!0:(u(),!1)):l?!0:(u(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Fo({schema:this,typeName:Be.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return As.create(this,this._def)}nullable(){return $o.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return mr.create(this)}promise(){return zu.create(this,this._def)}or(e){return Bu.create([this,e],this._def)}and(e){return Vu.create(this,e,this._def)}transform(e){return new Fo({...Ge(this._def),schema:this,typeName:Be.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Rp({...Ge(this._def),innerType:this,defaultValue:n,typeName:Be.ZodDefault})}brand(){return new qU({typeName:Be.ZodBranded,type:this,...Ge(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Ap({...Ge(this._def),innerType:this,catchValue:n,typeName:Be.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Pm.create(this,e)}readonly(){return Op.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const kU=/^c[^\s-]{8,}$/i,EU=/^[0-9a-z]+$/,CU=/^[0-9A-HJKMNP-TV-Z]{26}$/i,NU=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,TU=/^[a-z0-9_-]{21}$/i,jU=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,PU=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,IU=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,RU="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Lh;const AU=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,OU=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,DU=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,MU=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,LU=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,UU=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,pk="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",FU=new RegExp(`^${pk}$`);function mk(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function $U(t){return new RegExp(`^${mk(t)}$`)}function BU(t){let e=`${pk}T${mk(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function VU(t,e){return!!((e==="v4"||!e)&&AU.test(t)||(e==="v6"||!e)&&DU.test(t))}function zU(t,e){if(!jU.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||"typ"in i&&i?.typ!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function WU(t,e){return!!((e==="v4"||!e)&&OU.test(t)||(e==="v6"||!e)&&MU.test(t))}class Ts extends Xe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Se.string){const a=this._getOrReturnCtx(e);return pe(a,{code:le.invalid_type,expected:Se.string,received:a.parsedType}),$e}const r=new jn;let i;for(const a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(i=this._getOrReturnCtx(e,i),pe(i,{code:le.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(i=this._getOrReturnCtx(e,i),pe(i,{code:le.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){const l=e.data.length>a.value,u=e.data.length<a.value;(l||u)&&(i=this._getOrReturnCtx(e,i),l?pe(i,{code:le.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):u&&pe(i,{code:le.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")IU.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"email",code:le.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")Lh||(Lh=new RegExp(RU,"u")),Lh.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"emoji",code:le.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")NU.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"uuid",code:le.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")TU.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"nanoid",code:le.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")kU.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"cuid",code:le.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")EU.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"cuid2",code:le.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")CU.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"ulid",code:le.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),pe(i,{validation:"url",code:le.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"regex",code:le.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(e,i),pe(i,{code:le.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(i=this._getOrReturnCtx(e,i),pe(i,{code:le.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(i=this._getOrReturnCtx(e,i),pe(i,{code:le.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?BU(a).test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{code:le.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?FU.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{code:le.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?$U(a).test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{code:le.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?PU.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"duration",code:le.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?VU(e.data,a.version)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"ip",code:le.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?zU(e.data,a.alg)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"jwt",code:le.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?WU(e.data,a.version)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"cidr",code:le.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?LU.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"base64",code:le.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?UU.test(e.data)||(i=this._getOrReturnCtx(e,i),pe(i,{validation:"base64url",code:le.invalid_string,message:a.message}),r.dirty()):rt.assertNever(a);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:le.invalid_string,...Ne.errToObj(r)})}_addCheck(e){return new Ts({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Ne.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Ne.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Ne.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Ne.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Ne.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Ne.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Ne.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Ne.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Ne.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Ne.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Ne.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Ne.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Ne.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...Ne.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Ne.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Ne.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Ne.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...Ne.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Ne.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Ne.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Ne.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Ne.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Ne.errToObj(n)})}nonempty(e){return this.min(1,Ne.errToObj(e))}trim(){return new Ts({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ts({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ts({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ts.create=t=>new Ts({checks:[],typeName:Be.ZodString,coerce:t?.coerce??!1,...Ge(t)});function HU(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,a=Number.parseInt(t.toFixed(i).replace(".","")),l=Number.parseInt(e.toFixed(i).replace(".",""));return a%l/10**i}class pl extends Xe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Se.number){const a=this._getOrReturnCtx(e);return pe(a,{code:le.invalid_type,expected:Se.number,received:a.parsedType}),$e}let r;const i=new jn;for(const a of this._def.checks)a.kind==="int"?rt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),pe(r,{code:le.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),pe(r,{code:le.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),pe(r,{code:le.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?HU(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),pe(r,{code:le.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),pe(r,{code:le.not_finite,message:a.message}),i.dirty()):rt.assertNever(a);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Ne.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ne.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ne.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ne.toString(n))}setLimit(e,n,r,i){return new pl({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ne.toString(i)}]})}_addCheck(e){return new pl({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Ne.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Ne.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Ne.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Ne.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Ne.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ne.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Ne.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Ne.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Ne.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&rt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}pl.create=t=>new pl({checks:[],typeName:Be.ZodNumber,coerce:t?.coerce||!1,...Ge(t)});class ml extends Xe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Se.bigint)return this._getInvalidInput(e);let r;const i=new jn;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),pe(r,{code:le.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),pe(r,{code:le.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),pe(r,{code:le.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):rt.assertNever(a);return{status:i.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return pe(n,{code:le.invalid_type,expected:Se.bigint,received:n.parsedType}),$e}gte(e,n){return this.setLimit("min",e,!0,Ne.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Ne.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Ne.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Ne.toString(n))}setLimit(e,n,r,i){return new ml({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Ne.toString(i)}]})}_addCheck(e){return new ml({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Ne.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Ne.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Ne.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Ne.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Ne.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ml.create=t=>new ml({checks:[],typeName:Be.ZodBigInt,coerce:t?.coerce??!1,...Ge(t)});class Yx extends Xe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Se.boolean){const r=this._getOrReturnCtx(e);return pe(r,{code:le.invalid_type,expected:Se.boolean,received:r.parsedType}),$e}return Ln(e.data)}}Yx.create=t=>new Yx({typeName:Be.ZodBoolean,coerce:t?.coerce||!1,...Ge(t)});class $u extends Xe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Se.date){const a=this._getOrReturnCtx(e);return pe(a,{code:le.invalid_type,expected:Se.date,received:a.parsedType}),$e}if(Number.isNaN(e.data.getTime())){const a=this._getOrReturnCtx(e);return pe(a,{code:le.invalid_date}),$e}const r=new jn;let i;for(const a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(i=this._getOrReturnCtx(e,i),pe(i,{code:le.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(i=this._getOrReturnCtx(e,i),pe(i,{code:le.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):rt.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new $u({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Ne.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Ne.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}$u.create=t=>new $u({checks:[],coerce:t?.coerce||!1,typeName:Be.ZodDate,...Ge(t)});class Xx extends Xe{_parse(e){if(this._getType(e)!==Se.symbol){const r=this._getOrReturnCtx(e);return pe(r,{code:le.invalid_type,expected:Se.symbol,received:r.parsedType}),$e}return Ln(e.data)}}Xx.create=t=>new Xx({typeName:Be.ZodSymbol,...Ge(t)});class eb extends Xe{_parse(e){if(this._getType(e)!==Se.undefined){const r=this._getOrReturnCtx(e);return pe(r,{code:le.invalid_type,expected:Se.undefined,received:r.parsedType}),$e}return Ln(e.data)}}eb.create=t=>new eb({typeName:Be.ZodUndefined,...Ge(t)});class tb extends Xe{_parse(e){if(this._getType(e)!==Se.null){const r=this._getOrReturnCtx(e);return pe(r,{code:le.invalid_type,expected:Se.null,received:r.parsedType}),$e}return Ln(e.data)}}tb.create=t=>new tb({typeName:Be.ZodNull,...Ge(t)});class nb extends Xe{constructor(){super(...arguments),this._any=!0}_parse(e){return Ln(e.data)}}nb.create=t=>new nb({typeName:Be.ZodAny,...Ge(t)});class rb extends Xe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ln(e.data)}}rb.create=t=>new rb({typeName:Be.ZodUnknown,...Ge(t)});class Us extends Xe{_parse(e){const n=this._getOrReturnCtx(e);return pe(n,{code:le.invalid_type,expected:Se.never,received:n.parsedType}),$e}}Us.create=t=>new Us({typeName:Be.ZodNever,...Ge(t)});class sb extends Xe{_parse(e){if(this._getType(e)!==Se.undefined){const r=this._getOrReturnCtx(e);return pe(r,{code:le.invalid_type,expected:Se.void,received:r.parsedType}),$e}return Ln(e.data)}}sb.create=t=>new sb({typeName:Be.ZodVoid,...Ge(t)});class mr extends Xe{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==Se.array)return pe(n,{code:le.invalid_type,expected:Se.array,received:n.parsedType}),$e;if(i.exactLength!==null){const l=n.data.length>i.exactLength.value,u=n.data.length<i.exactLength.value;(l||u)&&(pe(n,{code:l?le.too_big:le.too_small,minimum:u?i.exactLength.value:void 0,maximum:l?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(pe(n,{code:le.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(pe(n,{code:le.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((l,u)=>i.type._parseAsync(new Ls(n,l,n.path,u)))).then(l=>jn.mergeArray(r,l));const a=[...n.data].map((l,u)=>i.type._parseSync(new Ls(n,l,n.path,u)));return jn.mergeArray(r,a)}get element(){return this._def.type}min(e,n){return new mr({...this._def,minLength:{value:e,message:Ne.toString(n)}})}max(e,n){return new mr({...this._def,maxLength:{value:e,message:Ne.toString(n)}})}length(e,n){return new mr({...this._def,exactLength:{value:e,message:Ne.toString(n)}})}nonempty(e){return this.min(1,e)}}mr.create=(t,e)=>new mr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Be.ZodArray,...Ge(e)});function vo(t){if(t instanceof Ot){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=As.create(vo(r))}return new Ot({...t._def,shape:()=>e})}else return t instanceof mr?new mr({...t._def,type:vo(t.element)}):t instanceof As?As.create(vo(t.unwrap())):t instanceof $o?$o.create(vo(t.unwrap())):t instanceof _i?_i.create(t.items.map(e=>vo(e))):t}class Ot extends Xe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=rt.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==Se.object){const p=this._getOrReturnCtx(e);return pe(p,{code:le.invalid_type,expected:Se.object,received:p.parsedType}),$e}const{status:r,ctx:i}=this._processInputParams(e),{shape:a,keys:l}=this._getCached(),u=[];if(!(this._def.catchall instanceof Us&&this._def.unknownKeys==="strip"))for(const p in i.data)l.includes(p)||u.push(p);const h=[];for(const p of l){const g=a[p],v=i.data[p];h.push({key:{status:"valid",value:p},value:g._parse(new Ls(i,v,i.path,p)),alwaysSet:p in i.data})}if(this._def.catchall instanceof Us){const p=this._def.unknownKeys;if(p==="passthrough")for(const g of u)h.push({key:{status:"valid",value:g},value:{status:"valid",value:i.data[g]}});else if(p==="strict")u.length>0&&(pe(i,{code:le.unrecognized_keys,keys:u}),r.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const p=this._def.catchall;for(const g of u){const v=i.data[g];h.push({key:{status:"valid",value:g},value:p._parse(new Ls(i,v,i.path,g)),alwaysSet:g in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const p=[];for(const g of h){const v=await g.key,w=await g.value;p.push({key:v,value:w,alwaysSet:g.alwaysSet})}return p}).then(p=>jn.mergeObjectSync(r,p)):jn.mergeObjectSync(r,h)}get shape(){return this._def.shape()}strict(e){return Ne.errToObj,new Ot({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{const i=this._def.errorMap?.(n,r).message??r.defaultError;return n.code==="unrecognized_keys"?{message:Ne.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new Ot({...this._def,unknownKeys:"strip"})}passthrough(){return new Ot({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ot({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ot({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Be.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Ot({...this._def,catchall:e})}pick(e){const n={};for(const r of rt.objectKeys(e))e[r]&&this.shape[r]&&(n[r]=this.shape[r]);return new Ot({...this._def,shape:()=>n})}omit(e){const n={};for(const r of rt.objectKeys(this.shape))e[r]||(n[r]=this.shape[r]);return new Ot({...this._def,shape:()=>n})}deepPartial(){return vo(this)}partial(e){const n={};for(const r of rt.objectKeys(this.shape)){const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}return new Ot({...this._def,shape:()=>n})}required(e){const n={};for(const r of rt.objectKeys(this.shape))if(e&&!e[r])n[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof As;)a=a._def.innerType;n[r]=a}return new Ot({...this._def,shape:()=>n})}keyof(){return gk(rt.objectKeys(this.shape))}}Ot.create=(t,e)=>new Ot({shape:()=>t,unknownKeys:"strip",catchall:Us.create(),typeName:Be.ZodObject,...Ge(e)});Ot.strictCreate=(t,e)=>new Ot({shape:()=>t,unknownKeys:"strict",catchall:Us.create(),typeName:Be.ZodObject,...Ge(e)});Ot.lazycreate=(t,e)=>new Ot({shape:t,unknownKeys:"strip",catchall:Us.create(),typeName:Be.ZodObject,...Ge(e)});class Bu extends Xe{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(a){for(const u of a)if(u.result.status==="valid")return u.result;for(const u of a)if(u.result.status==="dirty")return n.common.issues.push(...u.ctx.common.issues),u.result;const l=a.map(u=>new Wr(u.ctx.common.issues));return pe(n,{code:le.invalid_union,unionErrors:l}),$e}if(n.common.async)return Promise.all(r.map(async a=>{const l={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:l}),ctx:l}})).then(i);{let a;const l=[];for(const h of r){const p={...n,common:{...n.common,issues:[]},parent:null},g=h._parseSync({data:n.data,path:n.path,parent:p});if(g.status==="valid")return g;g.status==="dirty"&&!a&&(a={result:g,ctx:p}),p.common.issues.length&&l.push(p.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const u=l.map(h=>new Wr(h));return pe(n,{code:le.invalid_union,unionErrors:u}),$e}}get options(){return this._def.options}}Bu.create=(t,e)=>new Bu({options:t,typeName:Be.ZodUnion,...Ge(e)});function Ip(t,e){const n=bs(t),r=bs(e);if(t===e)return{valid:!0,data:t};if(n===Se.object&&r===Se.object){const i=rt.objectKeys(e),a=rt.objectKeys(t).filter(u=>i.indexOf(u)!==-1),l={...t,...e};for(const u of a){const h=Ip(t[u],e[u]);if(!h.valid)return{valid:!1};l[u]=h.data}return{valid:!0,data:l}}else if(n===Se.array&&r===Se.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let a=0;a<t.length;a++){const l=t[a],u=e[a],h=Ip(l,u);if(!h.valid)return{valid:!1};i.push(h.data)}return{valid:!0,data:i}}else return n===Se.date&&r===Se.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Vu extends Xe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(a,l)=>{if(Qx(a)||Qx(l))return $e;const u=Ip(a.value,l.value);return u.valid?((Jx(a)||Jx(l))&&n.dirty(),{status:n.value,value:u.data}):(pe(r,{code:le.invalid_intersection_types}),$e)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,l])=>i(a,l)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Vu.create=(t,e,n)=>new Vu({left:t,right:e,typeName:Be.ZodIntersection,...Ge(n)});class _i extends Xe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Se.array)return pe(r,{code:le.invalid_type,expected:Se.array,received:r.parsedType}),$e;if(r.data.length<this._def.items.length)return pe(r,{code:le.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),$e;!this._def.rest&&r.data.length>this._def.items.length&&(pe(r,{code:le.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...r.data].map((l,u)=>{const h=this._def.items[u]||this._def.rest;return h?h._parse(new Ls(r,l,r.path,u)):null}).filter(l=>!!l);return r.common.async?Promise.all(a).then(l=>jn.mergeArray(n,l)):jn.mergeArray(n,a)}get items(){return this._def.items}rest(e){return new _i({...this._def,rest:e})}}_i.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new _i({items:t,typeName:Be.ZodTuple,rest:null,...Ge(e)})};class ib extends Xe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Se.map)return pe(r,{code:le.invalid_type,expected:Se.map,received:r.parsedType}),$e;const i=this._def.keyType,a=this._def.valueType,l=[...r.data.entries()].map(([u,h],p)=>({key:i._parse(new Ls(r,u,r.path,[p,"key"])),value:a._parse(new Ls(r,h,r.path,[p,"value"]))}));if(r.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const h of l){const p=await h.key,g=await h.value;if(p.status==="aborted"||g.status==="aborted")return $e;(p.status==="dirty"||g.status==="dirty")&&n.dirty(),u.set(p.value,g.value)}return{status:n.value,value:u}})}else{const u=new Map;for(const h of l){const p=h.key,g=h.value;if(p.status==="aborted"||g.status==="aborted")return $e;(p.status==="dirty"||g.status==="dirty")&&n.dirty(),u.set(p.value,g.value)}return{status:n.value,value:u}}}}ib.create=(t,e,n)=>new ib({valueType:e,keyType:t,typeName:Be.ZodMap,...Ge(n)});class gl extends Xe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Se.set)return pe(r,{code:le.invalid_type,expected:Se.set,received:r.parsedType}),$e;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(pe(r,{code:le.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(pe(r,{code:le.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const a=this._def.valueType;function l(h){const p=new Set;for(const g of h){if(g.status==="aborted")return $e;g.status==="dirty"&&n.dirty(),p.add(g.value)}return{status:n.value,value:p}}const u=[...r.data.values()].map((h,p)=>a._parse(new Ls(r,h,r.path,p)));return r.common.async?Promise.all(u).then(h=>l(h)):l(u)}min(e,n){return new gl({...this._def,minSize:{value:e,message:Ne.toString(n)}})}max(e,n){return new gl({...this._def,maxSize:{value:e,message:Ne.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}gl.create=(t,e)=>new gl({valueType:t,minSize:null,maxSize:null,typeName:Be.ZodSet,...Ge(e)});class ob extends Xe{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}ob.create=(t,e)=>new ob({getter:t,typeName:Be.ZodLazy,...Ge(e)});class ab extends Xe{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return pe(n,{received:n.data,code:le.invalid_literal,expected:this._def.value}),$e}return{status:"valid",value:e.data}}get value(){return this._def.value}}ab.create=(t,e)=>new ab({value:t,typeName:Be.ZodLiteral,...Ge(e)});function gk(t,e){return new Uo({values:t,typeName:Be.ZodEnum,...Ge(e)})}class Uo extends Xe{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return pe(n,{expected:rt.joinValues(r),received:n.parsedType,code:le.invalid_type}),$e}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return pe(n,{received:n.data,code:le.invalid_enum_value,options:r}),$e}return Ln(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return Uo.create(e,{...this._def,...n})}exclude(e,n=this._def){return Uo.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Uo.create=gk;class lb extends Xe{_parse(e){const n=rt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Se.string&&r.parsedType!==Se.number){const i=rt.objectValues(n);return pe(r,{expected:rt.joinValues(i),received:r.parsedType,code:le.invalid_type}),$e}if(this._cache||(this._cache=new Set(rt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const i=rt.objectValues(n);return pe(r,{received:r.data,code:le.invalid_enum_value,options:i}),$e}return Ln(e.data)}get enum(){return this._def.values}}lb.create=(t,e)=>new lb({values:t,typeName:Be.ZodNativeEnum,...Ge(e)});class zu extends Xe{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Se.promise&&n.common.async===!1)return pe(n,{code:le.invalid_type,expected:Se.promise,received:n.parsedType}),$e;const r=n.parsedType===Se.promise?n.data:Promise.resolve(n.data);return Ln(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}zu.create=(t,e)=>new zu({type:t,typeName:Be.ZodPromise,...Ge(e)});class Fo extends Xe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Be.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,a={addIssue:l=>{pe(r,l),l.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const l=i.transform(r.data,a);if(r.common.async)return Promise.resolve(l).then(async u=>{if(n.value==="aborted")return $e;const h=await this._def.schema._parseAsync({data:u,path:r.path,parent:r});return h.status==="aborted"?$e:h.status==="dirty"||n.value==="dirty"?qa(h.value):h});{if(n.value==="aborted")return $e;const u=this._def.schema._parseSync({data:l,path:r.path,parent:r});return u.status==="aborted"?$e:u.status==="dirty"||n.value==="dirty"?qa(u.value):u}}if(i.type==="refinement"){const l=u=>{const h=i.refinement(u,a);if(r.common.async)return Promise.resolve(h);if(h instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(r.common.async===!1){const u=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return u.status==="aborted"?$e:(u.status==="dirty"&&n.dirty(),l(u.value),{status:n.value,value:u.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(u=>u.status==="aborted"?$e:(u.status==="dirty"&&n.dirty(),l(u.value).then(()=>({status:n.value,value:u.value}))))}if(i.type==="transform")if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Lo(l))return $e;const u=i.transform(l.value,a);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:u}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>Lo(l)?Promise.resolve(i.transform(l.value,a)).then(u=>({status:n.value,value:u})):$e);rt.assertNever(i)}}Fo.create=(t,e,n)=>new Fo({schema:t,typeName:Be.ZodEffects,effect:e,...Ge(n)});Fo.createWithPreprocess=(t,e,n)=>new Fo({schema:e,effect:{type:"preprocess",transform:t},typeName:Be.ZodEffects,...Ge(n)});class As extends Xe{_parse(e){return this._getType(e)===Se.undefined?Ln(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}As.create=(t,e)=>new As({innerType:t,typeName:Be.ZodOptional,...Ge(e)});class $o extends Xe{_parse(e){return this._getType(e)===Se.null?Ln(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}$o.create=(t,e)=>new $o({innerType:t,typeName:Be.ZodNullable,...Ge(e)});class Rp extends Xe{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Se.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Rp.create=(t,e)=>new Rp({innerType:t,typeName:Be.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Ge(e)});class Ap extends Xe{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Fu(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Wr(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Wr(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Ap.create=(t,e)=>new Ap({innerType:t,typeName:Be.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Ge(e)});class cb extends Xe{_parse(e){if(this._getType(e)!==Se.nan){const r=this._getOrReturnCtx(e);return pe(r,{code:le.invalid_type,expected:Se.nan,received:r.parsedType}),$e}return{status:"valid",value:e.data}}}cb.create=t=>new cb({typeName:Be.ZodNaN,...Ge(t)});class qU extends Xe{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Pm extends Xe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?$e:a.status==="dirty"?(n.dirty(),qa(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?$e:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new Pm({in:e,out:n,typeName:Be.ZodPipeline})}}class Op extends Xe{_parse(e){const n=this._def.innerType._parse(e),r=i=>(Lo(i)&&(i.value=Object.freeze(i.value)),i);return Fu(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}}Op.create=(t,e)=>new Op({innerType:t,typeName:Be.ZodReadonly,...Ge(e)});var Be;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Be||(Be={}));const Io=Ts.create;Us.create;mr.create;const Im=Ot.create;Bu.create;Vu.create;_i.create;Uo.create;zu.create;As.create;$o.create;var jl=t=>t.type==="checkbox",pi=t=>t instanceof Date,an=t=>t==null;const yk=t=>typeof t=="object";var Mt=t=>!an(t)&&!Array.isArray(t)&&yk(t)&&!pi(t),KU=t=>Mt(t)&&t.target?jl(t.target)?t.target.checked:t.target.value:t,GU=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,QU=(t,e)=>t.has(GU(e)),JU=t=>{const e=t.constructor&&t.constructor.prototype;return Mt(e)&&e.hasOwnProperty("isPrototypeOf")},Rm=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Kt(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(Rm&&(t instanceof Blob||r))&&(n||Mt(t)))if(e=n?[]:Object.create(Object.getPrototypeOf(t)),!n&&!JU(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=Kt(t[i]));else return t;return e}var ad=t=>/^\w*$/.test(t),Dt=t=>t===void 0,Am=t=>Array.isArray(t)?t.filter(Boolean):[],Om=t=>Am(t.replace(/["|']|\]/g,"").split(/\.|\[/)),we=(t,e,n)=>{if(!e||!Mt(t))return n;const r=(ad(e)?[e]:Om(e)).reduce((i,a)=>an(i)?i:i[a],t);return Dt(r)||r===t?Dt(t[e])?n:t[e]:r},cr=t=>typeof t=="boolean",at=(t,e,n)=>{let r=-1;const i=ad(e)?[e]:Om(e),a=i.length,l=a-1;for(;++r<a;){const u=i[r];let h=n;if(r!==l){const p=t[u];h=Mt(p)||Array.isArray(p)?p:isNaN(+i[r+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;t[u]=h,t=t[u]}};const ub={BLUR:"blur",FOCUS_OUT:"focusout"},Jn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Rr={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},ZU=ct.createContext(null);ZU.displayName="HookFormContext";var YU=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(i,a,{get:()=>{const l=a;return e._proxyFormState[l]!==Jn.all&&(e._proxyFormState[l]=!r||Jn.all),t[l]}});return i};const XU=typeof window<"u"?ct.useLayoutEffect:ct.useEffect;var kn=t=>typeof t=="string",eF=(t,e,n,r,i)=>kn(t)?(r&&e.watch.add(t),we(n,t,i)):Array.isArray(t)?t.map(a=>(r&&e.watch.add(a),we(n,a))):(r&&(e.watchAll=!0),n),Dp=t=>an(t)||!yk(t);function Ns(t,e,n=new WeakSet){if(Dp(t)||Dp(e))return t===e;if(pi(t)&&pi(e))return t.getTime()===e.getTime();const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const a of r){const l=t[a];if(!i.includes(a))return!1;if(a!=="ref"){const u=e[a];if(pi(l)&&pi(u)||Mt(l)&&Mt(u)||Array.isArray(l)&&Array.isArray(u)?!Ns(l,u,n):l!==u)return!1}}return!0}var vk=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},nl=t=>Array.isArray(t)?t:[t],db=()=>{let t=[];return{get observers(){return t},next:i=>{for(const a of t)a.next&&a.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(a=>a!==i)}}),unsubscribe:()=>{t=[]}}};function wk(t,e){const n={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r],a=e[r];if(i&&Mt(i)&&a){const l=wk(i,a);Mt(l)&&(n[r]=l)}else t[r]&&(n[r]=a)}return n}var yn=t=>Mt(t)&&!Object.keys(t).length,Dm=t=>t.type==="file",Zn=t=>typeof t=="function",Wu=t=>{if(!Rm)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},xk=t=>t.type==="select-multiple",Mm=t=>t.type==="radio",tF=t=>Mm(t)||jl(t),Uh=t=>Wu(t)&&t.isConnected;function nF(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Dt(t)?r++:t[e[r++]];return t}function rF(t){for(const e in t)if(t.hasOwnProperty(e)&&!Dt(t[e]))return!1;return!0}function It(t,e){const n=Array.isArray(e)?e:ad(e)?[e]:Om(e),r=n.length===1?t:nF(t,n),i=n.length-1,a=n[i];return r&&delete r[a],i!==0&&(Mt(r)&&yn(r)||Array.isArray(r)&&rF(r))&&It(t,n.slice(0,-1)),t}var sF=t=>{for(const e in t)if(Zn(t[e]))return!0;return!1};function bk(t){return Array.isArray(t)||Mt(t)&&!sF(t)}function Mp(t,e={}){for(const n in t)bk(t[n])?(e[n]=Array.isArray(t[n])?[]:{},Mp(t[n],e[n])):an(t[n])||(e[n]=!0);return e}function wo(t,e,n){n||(n=Mp(e));for(const r in t)bk(t[r])?Dt(e)||Dp(n[r])?n[r]=Mp(t[r],Array.isArray(t[r])?[]:{}):wo(t[r],an(e)?{}:e[r],n[r]):n[r]=!Ns(t[r],e[r]);return n}const fb={value:!1,isValid:!1},hb={value:!0,isValid:!0};var _k=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Dt(t[0].attributes.value)?Dt(t[0].value)||t[0].value===""?hb:{value:t[0].value,isValid:!0}:hb:fb}return fb},Sk=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Dt(t)?t:e?t===""?NaN:t&&+t:n&&kn(t)?new Date(t):r?r(t):t;const pb={isValid:!1,value:null};var kk=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,pb):pb;function mb(t){const e=t.ref;return Dm(e)?e.files:Mm(e)?kk(t.refs).value:xk(e)?[...e.selectedOptions].map(({value:n})=>n):jl(e)?_k(t.refs).value:Sk(Dt(e.value)?t.ref.value:e.value,t)}var iF=(t,e,n,r)=>{const i={};for(const a of t){const l=we(e,a);l&&at(i,a,l._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},Hu=t=>t instanceof RegExp,Fa=t=>Dt(t)?t:Hu(t)?t.source:Mt(t)?Hu(t.value)?t.value.source:t.value:t,gb=t=>({isOnSubmit:!t||t===Jn.onSubmit,isOnBlur:t===Jn.onBlur,isOnChange:t===Jn.onChange,isOnAll:t===Jn.all,isOnTouch:t===Jn.onTouched});const yb="AsyncFunction";var oF=t=>!!t&&!!t.validate&&!!(Zn(t.validate)&&t.validate.constructor.name===yb||Mt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===yb)),aF=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),vb=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const rl=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const a=we(t,i);if(a){const{_f:l,...u}=a;if(l){if(l.refs&&l.refs[0]&&e(l.refs[0],i)&&!r)return!0;if(l.ref&&e(l.ref,l.name)&&!r)return!0;if(rl(u,e))break}else if(Mt(u)&&rl(u,e))break}}};function wb(t,e,n){const r=we(t,n);if(r||ad(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const a=i.join("."),l=we(e,a),u=we(t,a);if(l&&!Array.isArray(l)&&n!==a)return{name:n};if(u&&u.type)return{name:a,error:u};if(u&&u.root&&u.root.type)return{name:`${a}.root`,error:u.root};i.pop()}return{name:n}}var lF=(t,e,n,r)=>{n(t);const{name:i,...a}=t;return yn(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(l=>e[l]===(!r||Jn.all))},cF=(t,e,n)=>!t||!e||t===e||nl(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),uF=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,dF=(t,e)=>!Am(we(t,e)).length&&It(t,e),fF=(t,e,n)=>{const r=nl(we(t,n));return at(r,"root",e[n]),at(t,n,r),t};function xb(t,e,n="validate"){if(kn(t)||Array.isArray(t)&&t.every(kn)||cr(t)&&!t)return{type:n,message:kn(t)?t:"",ref:e}}var mo=t=>Mt(t)&&!Hu(t)?t:{value:t,message:""},bb=async(t,e,n,r,i,a)=>{const{ref:l,refs:u,required:h,maxLength:p,minLength:g,min:v,max:w,pattern:S,validate:E,name:x,valueAsNumber:_,mount:T}=t._f,C=we(n,x);if(!T||e.has(x))return{};const N=u?u[0]:l,I=q=>{i&&N.reportValidity&&(N.setCustomValidity(cr(q)?"":q||""),N.reportValidity())},D={},A=Mm(l),L=jl(l),$=A||L,ee=(_||Dm(l))&&Dt(l.value)&&Dt(C)||Wu(l)&&l.value===""||C===""||Array.isArray(C)&&!C.length,z=vk.bind(null,x,r,D),K=(q,J,X,fe=Rr.maxLength,Q=Rr.minLength)=>{const ce=q?J:X;D[x]={type:q?fe:Q,message:ce,ref:l,...z(q?fe:Q,ce)}};if(a?!Array.isArray(C)||!C.length:h&&(!$&&(ee||an(C))||cr(C)&&!C||L&&!_k(u).isValid||A&&!kk(u).isValid)){const{value:q,message:J}=kn(h)?{value:!!h,message:h}:mo(h);if(q&&(D[x]={type:Rr.required,message:J,ref:N,...z(Rr.required,J)},!r))return I(J),D}if(!ee&&(!an(v)||!an(w))){let q,J;const X=mo(w),fe=mo(v);if(!an(C)&&!isNaN(C)){const Q=l.valueAsNumber||C&&+C;an(X.value)||(q=Q>X.value),an(fe.value)||(J=Q<fe.value)}else{const Q=l.valueAsDate||new Date(C),ce=ne=>new Date(new Date().toDateString()+" "+ne),H=l.type=="time",te=l.type=="week";kn(X.value)&&C&&(q=H?ce(C)>ce(X.value):te?C>X.value:Q>new Date(X.value)),kn(fe.value)&&C&&(J=H?ce(C)<ce(fe.value):te?C<fe.value:Q<new Date(fe.value))}if((q||J)&&(K(!!q,X.message,fe.message,Rr.max,Rr.min),!r))return I(D[x].message),D}if((p||g)&&!ee&&(kn(C)||a&&Array.isArray(C))){const q=mo(p),J=mo(g),X=!an(q.value)&&C.length>+q.value,fe=!an(J.value)&&C.length<+J.value;if((X||fe)&&(K(X,q.message,J.message),!r))return I(D[x].message),D}if(S&&!ee&&kn(C)){const{value:q,message:J}=mo(S);if(Hu(q)&&!C.match(q)&&(D[x]={type:Rr.pattern,message:J,ref:l,...z(Rr.pattern,J)},!r))return I(J),D}if(E){if(Zn(E)){const q=await E(C,n),J=xb(q,N);if(J&&(D[x]={...J,...z(Rr.validate,J.message)},!r))return I(J.message),D}else if(Mt(E)){let q={};for(const J in E){if(!yn(q)&&!r)break;const X=xb(await E[J](C,n),N,J);X&&(q={...X,...z(J,X.message)},I(X.message),r&&(D[x]=q))}if(!yn(q)&&(D[x]={ref:N,...q},!r))return D}}return I(!0),D};const hF={mode:Jn.onSubmit,reValidateMode:Jn.onChange,shouldFocusError:!0};function pF(t={}){let e={...hF,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Zn(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=Mt(e.defaultValues)||Mt(e.values)?Kt(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:Kt(i),l={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},h,p=0;const g={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let v={...g};const w={array:db(),state:db()},S=e.criteriaMode===Jn.all,E=P=>U=>{clearTimeout(p),p=setTimeout(P,U)},x=async P=>{if(!e.disabled&&(g.isValid||v.isValid||P)){const U=e.resolver?yn((await L()).errors):await ee(r,!0);U!==n.isValid&&w.state.next({isValid:U})}},_=(P,U)=>{!e.disabled&&(g.isValidating||g.validatingFields||v.isValidating||v.validatingFields)&&((P||Array.from(u.mount)).forEach(V=>{V&&(U?at(n.validatingFields,V,U):It(n.validatingFields,V))}),w.state.next({validatingFields:n.validatingFields,isValidating:!yn(n.validatingFields)}))},T=(P,U=[],V,de,oe=!0,se=!0)=>{if(de&&V&&!e.disabled){if(l.action=!0,se&&Array.isArray(we(r,P))){const xe=V(we(r,P),de.argA,de.argB);oe&&at(r,P,xe)}if(se&&Array.isArray(we(n.errors,P))){const xe=V(we(n.errors,P),de.argA,de.argB);oe&&at(n.errors,P,xe),dF(n.errors,P)}if((g.touchedFields||v.touchedFields)&&se&&Array.isArray(we(n.touchedFields,P))){const xe=V(we(n.touchedFields,P),de.argA,de.argB);oe&&at(n.touchedFields,P,xe)}(g.dirtyFields||v.dirtyFields)&&(n.dirtyFields=wo(i,a)),w.state.next({name:P,isDirty:K(P,U),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else at(a,P,U)},C=(P,U)=>{at(n.errors,P,U),w.state.next({errors:n.errors})},N=P=>{n.errors=P,w.state.next({errors:n.errors,isValid:!1})},I=(P,U,V,de)=>{const oe=we(r,P);if(oe){const se=we(a,P,Dt(V)?we(i,P):V);Dt(se)||de&&de.defaultChecked||U?at(a,P,U?se:mb(oe._f)):X(P,se),l.mount&&x()}},D=(P,U,V,de,oe)=>{let se=!1,xe=!1;const He={name:P};if(!e.disabled){if(!V||de){(g.isDirty||v.isDirty)&&(xe=n.isDirty,n.isDirty=He.isDirty=K(),se=xe!==He.isDirty);const ie=Ns(we(i,P),U);xe=!!we(n.dirtyFields,P),ie?It(n.dirtyFields,P):at(n.dirtyFields,P,!0),He.dirtyFields=n.dirtyFields,se=se||(g.dirtyFields||v.dirtyFields)&&xe!==!ie}if(V){const ie=we(n.touchedFields,P);ie||(at(n.touchedFields,P,V),He.touchedFields=n.touchedFields,se=se||(g.touchedFields||v.touchedFields)&&ie!==V)}se&&oe&&w.state.next(He)}return se?He:{}},A=(P,U,V,de)=>{const oe=we(n.errors,P),se=(g.isValid||v.isValid)&&cr(U)&&n.isValid!==U;if(e.delayError&&V?(h=E(()=>C(P,V)),h(e.delayError)):(clearTimeout(p),h=null,V?at(n.errors,P,V):It(n.errors,P)),(V?!Ns(oe,V):oe)||!yn(de)||se){const xe={...de,...se&&cr(U)?{isValid:U}:{},errors:n.errors,name:P};n={...n,...xe},w.state.next(xe)}},L=async P=>{_(P,!0);const U=await e.resolver(a,e.context,iF(P||u.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return _(P),U},$=async P=>{const{errors:U}=await L(P);if(P)for(const V of P){const de=we(U,V);de?at(n.errors,V,de):It(n.errors,V)}else n.errors=U;return U},ee=async(P,U,V={valid:!0})=>{for(const de in P){const oe=P[de];if(oe){const{_f:se,...xe}=oe;if(se){const He=u.array.has(se.name),ie=oe._f&&oF(oe._f);ie&&g.validatingFields&&_([se.name],!0);const ge=await bb(oe,u.disabled,a,S,e.shouldUseNativeValidation&&!U,He);if(ie&&g.validatingFields&&_([se.name]),ge[se.name]&&(V.valid=!1,U))break;!U&&(we(ge,se.name)?He?fF(n.errors,ge,se.name):at(n.errors,se.name,ge[se.name]):It(n.errors,se.name))}!yn(xe)&&await ee(xe,U,V)}}return V.valid},z=()=>{for(const P of u.unMount){const U=we(r,P);U&&(U._f.refs?U._f.refs.every(V=>!Uh(V)):!Uh(U._f.ref))&&ue(P)}u.unMount=new Set},K=(P,U)=>!e.disabled&&(P&&U&&at(a,P,U),!Ns(ne(),i)),q=(P,U,V)=>eF(P,u,{...l.mount?a:Dt(U)?i:kn(P)?{[P]:U}:U},V,U),J=P=>Am(we(l.mount?a:i,P,e.shouldUnregister?we(i,P,[]):[])),X=(P,U,V={})=>{const de=we(r,P);let oe=U;if(de){const se=de._f;se&&(!se.disabled&&at(a,P,Sk(U,se)),oe=Wu(se.ref)&&an(U)?"":U,xk(se.ref)?[...se.ref.options].forEach(xe=>xe.selected=oe.includes(xe.value)):se.refs?jl(se.ref)?se.refs.forEach(xe=>{(!xe.defaultChecked||!xe.disabled)&&(Array.isArray(oe)?xe.checked=!!oe.find(He=>He===xe.value):xe.checked=oe===xe.value||!!oe)}):se.refs.forEach(xe=>xe.checked=xe.value===oe):Dm(se.ref)?se.ref.value="":(se.ref.value=oe,se.ref.type||w.state.next({name:P,values:Kt(a)})))}(V.shouldDirty||V.shouldTouch)&&D(P,oe,V.shouldTouch,V.shouldDirty,!0),V.shouldValidate&&te(P)},fe=(P,U,V)=>{for(const de in U){if(!U.hasOwnProperty(de))return;const oe=U[de],se=P+"."+de,xe=we(r,se);(u.array.has(P)||Mt(oe)||xe&&!xe._f)&&!pi(oe)?fe(se,oe,V):X(se,oe,V)}},Q=(P,U,V={})=>{const de=we(r,P),oe=u.array.has(P),se=Kt(U);at(a,P,se),oe?(w.array.next({name:P,values:Kt(a)}),(g.isDirty||g.dirtyFields||v.isDirty||v.dirtyFields)&&V.shouldDirty&&w.state.next({name:P,dirtyFields:wo(i,a),isDirty:K(P,se)})):de&&!de._f&&!an(se)?fe(P,se,V):X(P,se,V),vb(P,u)&&w.state.next({...n,name:P}),w.state.next({name:l.mount?P:void 0,values:Kt(a)})},ce=async P=>{l.mount=!0;const U=P.target;let V=U.name,de=!0;const oe=we(r,V),se=ie=>{de=Number.isNaN(ie)||pi(ie)&&isNaN(ie.getTime())||Ns(ie,we(a,V,ie))},xe=gb(e.mode),He=gb(e.reValidateMode);if(oe){let ie,ge;const ze=U.type?mb(oe._f):KU(P),je=P.type===ub.BLUR||P.type===ub.FOCUS_OUT,xt=!aF(oe._f)&&!e.resolver&&!we(n.errors,V)&&!oe._f.deps||uF(je,we(n.touchedFields,V),n.isSubmitted,He,xe),mt=vb(V,u,je);at(a,V,ze),je?(!U||!U.readOnly)&&(oe._f.onBlur&&oe._f.onBlur(P),h&&h(0)):oe._f.onChange&&oe._f.onChange(P);const Et=D(V,ze,je),Ze=!yn(Et)||mt;if(!je&&w.state.next({name:V,type:P.type,values:Kt(a)}),xt)return(g.isValid||v.isValid)&&(e.mode==="onBlur"?je&&x():je||x()),Ze&&w.state.next({name:V,...mt?{}:Et});if(!je&&mt&&w.state.next({...n}),e.resolver){const{errors:Zt}=await L([V]);if(se(ze),de){const xr=wb(n.errors,r,V),Un=wb(Zt,r,xr.name||V);ie=Un.error,V=Un.name,ge=yn(Zt)}}else _([V],!0),ie=(await bb(oe,u.disabled,a,S,e.shouldUseNativeValidation))[V],_([V]),se(ze),de&&(ie?ge=!1:(g.isValid||v.isValid)&&(ge=await ee(r,!0)));de&&(oe._f.deps&&(!Array.isArray(oe._f.deps)||oe._f.deps.length>0)&&te(oe._f.deps),A(V,ge,ie,Et))}},H=(P,U)=>{if(we(n.errors,U)&&P.focus)return P.focus(),1},te=async(P,U={})=>{let V,de;const oe=nl(P);if(e.resolver){const se=await $(Dt(P)?P:oe);V=yn(se),de=P?!oe.some(xe=>we(se,xe)):V}else P?(de=(await Promise.all(oe.map(async se=>{const xe=we(r,se);return await ee(xe&&xe._f?{[se]:xe}:xe)}))).every(Boolean),!(!de&&!n.isValid)&&x()):de=V=await ee(r);return w.state.next({...!kn(P)||(g.isValid||v.isValid)&&V!==n.isValid?{}:{name:P},...e.resolver||!P?{isValid:V}:{},errors:n.errors}),U.shouldFocus&&!de&&rl(r,H,P?oe:u.mount),de},ne=(P,U)=>{let V={...l.mount?a:i};return U&&(V=wk(U.dirtyFields?n.dirtyFields:n.touchedFields,V)),Dt(P)?V:kn(P)?we(V,P):P.map(de=>we(V,de))},O=(P,U)=>({invalid:!!we((U||n).errors,P),isDirty:!!we((U||n).dirtyFields,P),error:we((U||n).errors,P),isValidating:!!we(n.validatingFields,P),isTouched:!!we((U||n).touchedFields,P)}),G=P=>{P&&nl(P).forEach(U=>It(n.errors,U)),w.state.next({errors:P?n.errors:{}})},Te=(P,U,V)=>{const de=(we(r,P,{_f:{}})._f||{}).ref,oe=we(n.errors,P)||{},{ref:se,message:xe,type:He,...ie}=oe;at(n.errors,P,{...ie,...U,ref:de}),w.state.next({name:P,errors:n.errors,isValid:!1}),V&&V.shouldFocus&&de&&de.focus&&de.focus()},ke=(P,U)=>Zn(P)?w.state.subscribe({next:V=>"values"in V&&P(q(void 0,U),V)}):q(P,U,!0),Oe=P=>w.state.subscribe({next:U=>{cF(P.name,U.name,P.exact)&&lF(U,P.formState||g,Gt,P.reRenderRoot)&&P.callback({values:{...a},...n,...U,defaultValues:i})}}).unsubscribe,Me=P=>(l.mount=!0,v={...v,...P.formState},Oe({...P,formState:v})),ue=(P,U={})=>{for(const V of P?nl(P):u.mount)u.mount.delete(V),u.array.delete(V),U.keepValue||(It(r,V),It(a,V)),!U.keepError&&It(n.errors,V),!U.keepDirty&&It(n.dirtyFields,V),!U.keepTouched&&It(n.touchedFields,V),!U.keepIsValidating&&It(n.validatingFields,V),!e.shouldUnregister&&!U.keepDefaultValue&&It(i,V);w.state.next({values:Kt(a)}),w.state.next({...n,...U.keepDirty?{isDirty:K()}:{}}),!U.keepIsValid&&x()},me=({disabled:P,name:U})=>{(cr(P)&&l.mount||P||u.disabled.has(U))&&(P?u.disabled.add(U):u.disabled.delete(U))},Ae=(P,U={})=>{let V=we(r,P);const de=cr(U.disabled)||cr(e.disabled);return at(r,P,{...V||{},_f:{...V&&V._f?V._f:{ref:{name:P}},name:P,mount:!0,...U}}),u.mount.add(P),V?me({disabled:cr(U.disabled)?U.disabled:e.disabled,name:P}):I(P,!0,U.value),{...de?{disabled:U.disabled||e.disabled}:{},...e.progressive?{required:!!U.required,min:Fa(U.min),max:Fa(U.max),minLength:Fa(U.minLength),maxLength:Fa(U.maxLength),pattern:Fa(U.pattern)}:{},name:P,onChange:ce,onBlur:ce,ref:oe=>{if(oe){Ae(P,U),V=we(r,P);const se=Dt(oe.value)&&oe.querySelectorAll&&oe.querySelectorAll("input,select,textarea")[0]||oe,xe=tF(se),He=V._f.refs||[];if(xe?He.find(ie=>ie===se):se===V._f.ref)return;at(r,P,{_f:{...V._f,...xe?{refs:[...He.filter(Uh),se,...Array.isArray(we(i,P))?[{}]:[]],ref:{type:se.type,name:P}}:{ref:se}}}),I(P,!1,void 0,se)}else V=we(r,P,{}),V._f&&(V._f.mount=!1),(e.shouldUnregister||U.shouldUnregister)&&!(QU(u.array,P)&&l.action)&&u.unMount.add(P)}}},be=()=>e.shouldFocusError&&rl(r,H,u.mount),De=P=>{cr(P)&&(w.state.next({disabled:P}),rl(r,(U,V)=>{const de=we(r,V);de&&(U.disabled=de._f.disabled||P,Array.isArray(de._f.refs)&&de._f.refs.forEach(oe=>{oe.disabled=de._f.disabled||P}))},0,!1))},Qe=(P,U)=>async V=>{let de;V&&(V.preventDefault&&V.preventDefault(),V.persist&&V.persist());let oe=Kt(a);if(w.state.next({isSubmitting:!0}),e.resolver){const{errors:se,values:xe}=await L();n.errors=se,oe=Kt(xe)}else await ee(r);if(u.disabled.size)for(const se of u.disabled)It(oe,se);if(It(n.errors,"root"),yn(n.errors)){w.state.next({errors:{}});try{await P(oe,V)}catch(se){de=se}}else U&&await U({...n.errors},V),be(),setTimeout(be);if(w.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:yn(n.errors)&&!de,submitCount:n.submitCount+1,errors:n.errors}),de)throw de},pt=(P,U={})=>{we(r,P)&&(Dt(U.defaultValue)?Q(P,Kt(we(i,P))):(Q(P,U.defaultValue),at(i,P,Kt(U.defaultValue))),U.keepTouched||It(n.touchedFields,P),U.keepDirty||(It(n.dirtyFields,P),n.isDirty=U.defaultValue?K(P,Kt(we(i,P))):K()),U.keepError||(It(n.errors,P),g.isValid&&x()),w.state.next({...n}))},dt=(P,U={})=>{const V=P?Kt(P):i,de=Kt(V),oe=yn(P),se=oe?i:de;if(U.keepDefaultValues||(i=V),!U.keepValues){if(U.keepDirtyValues){const xe=new Set([...u.mount,...Object.keys(wo(i,a))]);for(const He of Array.from(xe))we(n.dirtyFields,He)?at(se,He,we(a,He)):Q(He,we(se,He))}else{if(Rm&&Dt(P))for(const xe of u.mount){const He=we(r,xe);if(He&&He._f){const ie=Array.isArray(He._f.refs)?He._f.refs[0]:He._f.ref;if(Wu(ie)){const ge=ie.closest("form");if(ge){ge.reset();break}}}}if(U.keepFieldsRef)for(const xe of u.mount)Q(xe,we(se,xe));else r={}}a=e.shouldUnregister?U.keepDefaultValues?Kt(i):{}:Kt(se),w.array.next({values:{...se}}),w.state.next({values:{...se}})}u={mount:U.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!g.isValid||!!U.keepIsValid||!!U.keepDirtyValues,l.watch=!!e.shouldUnregister,w.state.next({submitCount:U.keepSubmitCount?n.submitCount:0,isDirty:oe?!1:U.keepDirty?n.isDirty:!!(U.keepDefaultValues&&!Ns(P,i)),isSubmitted:U.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:oe?{}:U.keepDirtyValues?U.keepDefaultValues&&a?wo(i,a):n.dirtyFields:U.keepDefaultValues&&P?wo(i,P):U.keepDirty?n.dirtyFields:{},touchedFields:U.keepTouched?n.touchedFields:{},errors:U.keepErrors?n.errors:{},isSubmitSuccessful:U.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},Vt=(P,U)=>dt(Zn(P)?P(a):P,U),kt=(P,U={})=>{const V=we(r,P),de=V&&V._f;if(de){const oe=de.refs?de.refs[0]:de.ref;oe.focus&&(oe.focus(),U.shouldSelect&&Zn(oe.select)&&oe.select())}},Gt=P=>{n={...n,...P}},Je={control:{register:Ae,unregister:ue,getFieldState:O,handleSubmit:Qe,setError:Te,_subscribe:Oe,_runSchema:L,_focusError:be,_getWatch:q,_getDirty:K,_setValid:x,_setFieldArray:T,_setDisabledField:me,_setErrors:N,_getFieldArray:J,_reset:dt,_resetDefaultValues:()=>Zn(e.defaultValues)&&e.defaultValues().then(P=>{Vt(P,e.resetOptions),w.state.next({isLoading:!1})}),_removeUnmounted:z,_disableForm:De,_subjects:w,_proxyFormState:g,get _fields(){return r},get _formValues(){return a},get _state(){return l},set _state(P){l=P},get _defaultValues(){return i},get _names(){return u},set _names(P){u=P},get _formState(){return n},get _options(){return e},set _options(P){e={...e,...P}}},subscribe:Me,trigger:te,register:Ae,handleSubmit:Qe,watch:ke,setValue:Q,getValues:ne,reset:Vt,resetField:pt,clearErrors:G,unregister:ue,setError:Te,setFocus:kt,getFieldState:O};return{...Je,formControl:Je}}function Lm(t={}){const e=ct.useRef(void 0),n=ct.useRef(void 0),[r,i]=ct.useState({isDirty:!1,isValidating:!1,isLoading:Zn(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Zn(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!Zn(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:l,...u}=pF(t);e.current={...u,formState:r}}const a=e.current.control;return a._options=t,XU(()=>{const l=a._subscribe({formState:a._proxyFormState,callback:()=>i({...a._formState}),reRenderRoot:!0});return i(u=>({...u,isReady:!0})),a._formState.isReady=!0,l},[a]),ct.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),ct.useEffect(()=>{t.mode&&(a._options.mode=t.mode),t.reValidateMode&&(a._options.reValidateMode=t.reValidateMode)},[a,t.mode,t.reValidateMode]),ct.useEffect(()=>{t.errors&&(a._setErrors(t.errors),a._focusError())},[a,t.errors]),ct.useEffect(()=>{t.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,t.shouldUnregister]),ct.useEffect(()=>{if(a._proxyFormState.isDirty){const l=a._getDirty();l!==r.isDirty&&a._subjects.state.next({isDirty:l})}},[a,r.isDirty]),ct.useEffect(()=>{t.values&&!Ns(t.values,n.current)?(a._reset(t.values,{keepFieldsRef:!0,...a._options.resetOptions}),n.current=t.values,i(l=>({...l}))):a._resetDefaultValues()},[a,t.values]),ct.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),e.current.formState=YU(r,a),e.current}const _b=(t,e,n)=>{if(t&&"reportValidity"in t){const r=we(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},Ek=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?_b(r.ref,n,t):r.refs&&r.refs.forEach(i=>_b(i,n,t))}},mF=(t,e)=>{e.shouldUseNativeValidation&&Ek(t,e);const n={};for(const r in t){const i=we(e.fields,r),a=Object.assign(t[r]||{},{ref:i&&i.ref});if(gF(e.names||Object.keys(t),r)){const l=Object.assign({},we(n,r));at(l,"root",a),at(n,r,l)}else at(n,r,a)}return n},gF=(t,e)=>t.some(n=>n.startsWith(e+"."));var yF=function(t,e){for(var n={};t.length;){var r=t[0],i=r.code,a=r.message,l=r.path.join(".");if(!n[l])if("unionErrors"in r){var u=r.unionErrors[0].errors[0];n[l]={message:u.message,type:u.code}}else n[l]={message:a,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(g){return g.errors.forEach(function(v){return t.push(v)})}),e){var h=n[l].types,p=h&&h[r.code];n[l]=vk(l,e,n,i,p?[].concat(p,r.message):r.message)}t.shift()}return n},Um=function(t,e,n){return n===void 0&&(n={}),function(r,i,a){try{return Promise.resolve((function(l,u){try{var h=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(p){return a.shouldUseNativeValidation&&Ek({},a),{errors:{},values:n.raw?r:p}})}catch(p){return u(p)}return h&&h.then?h.then(void 0,u):h})(0,function(l){if((function(u){return Array.isArray(u?.errors)})(l))return{values:{},errors:mF(yF(l.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw l}))}catch(l){return Promise.reject(l)}}};const vF=Im({email:Io().email(),password:Io().min(6)});function wF({onSwitchToSignup:t}){const[e,n]=qr(),r=e.includes("?")?e.split("?")[1]:"",i=new URLSearchParams(r).get("redirect")||"/dashboard",{user:a,loading:l}=Hr();b.useEffect(()=>{!l&&a&&n("/account")},[a,l,n]);const{register:u,handleSubmit:h,formState:{errors:p,isSubmitting:g}}=Lm({resolver:Um(vF)});async function v(w){const{error:S}=await er.auth.signInWithPassword(w);if(S)return alert(S.message);n(i)}return d.jsxs("form",{onSubmit:h(v),className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-sm text-muted-foreground",children:"Email"}),d.jsx("input",{...u("email"),type:"email",className:"mt-1 w-full rounded-xl bg-input border border-border px-3 py-2 outline-none focus:border-ring text-foreground"}),p.email&&d.jsx("p",{className:"text-xs text-red-400 mt-1",children:p.email.message})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm text-muted-foreground",children:"Password"}),d.jsx("input",{...u("password"),type:"password",className:"mt-1 w-full rounded-xl bg-input border border-border px-3 py-2 outline-none focus:border-ring text-foreground"}),p.password&&d.jsx("p",{className:"text-xs text-red-400 mt-1",children:p.password.message})]}),d.jsx("div",{className:"text-sm -mt-1",children:d.jsx(wt,{className:"text-primary hover:underline",to:"/reset-password",children:"Forgot password?"})}),d.jsx("button",{disabled:g,className:"w-full rounded-xl border border-primary px-3 py-2 text-primary hover:bg-primary hover:text-primary-foreground border border-border py-2 text-foreground",children:g?"Signing in":"Sign in"}),d.jsxs("div",{className:"text-sm text-foreground",children:["Dont have an account?"," ",d.jsx("button",{type:"button",onClick:t,className:"text-primary/90 hover:underline",children:"Sign Up Now"})]})]})}const xF=Im({email:Io().email(),password:Io().min(8,"Min 8 chars").regex(/[0-9]/,"Include a number").regex(/[^A-Za-z0-9]/,"Include a symbol"),confirm:Io()}).refine(t=>t.password===t.confirm,{path:["confirm"],message:"Passwords do not match"});function bF({onSwitchToLogin:t}){const[e]=qr(),n=e.includes("?")?e.split("?")[1]:"",r=new URLSearchParams(n).get("redirect")||"/dashboard",{register:i,handleSubmit:a,formState:{errors:l,isSubmitting:u}}=Lm({resolver:Um(xF)});async function h(p){const{error:g}=await er.auth.signUp({email:p.email,password:p.password,options:{emailRedirectTo:`${location.origin}/#/login?redirect=${encodeURIComponent(r)}`}});if(g)return alert(g.message);alert("Check your email to verify your account.")}return d.jsxs("form",{onSubmit:a(h),className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-sm text-muted-foreground",children:"Email"}),d.jsx("input",{...i("email"),type:"email",className:"mt-1 w-full rounded-xl bg-input border border-border px-3 py-2 outline-none focus:border-ring text-foreground"}),l.email&&d.jsx("p",{className:"text-xs text-destructive mt-1",children:l.email.message})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm text-muted-foreground",children:"Password"}),d.jsx("input",{...i("password"),type:"password",className:"mt-1 w-full rounded-xl bg-input border border-border px-3 py-2 outline-none focus:border-ring text-foreground"}),l.password&&d.jsx("p",{className:"text-xs text-destructive mt-1",children:l.password.message}),d.jsx("p",{className:"text-[11px] text-muted-foreground/60 mt-1",children:"Min 8 chars, include a number & a symbol."})]}),d.jsxs("div",{children:[d.jsx("label",{className:"text-sm text-muted-foreground",children:"Confirm password"}),d.jsx("input",{...i("confirm"),type:"password",className:"mt-1 w-full rounded-xl bg-input border border-border px-3 py-2 outline-none focus:border-ring text-foreground"}),l.confirm&&d.jsx("p",{className:"text-xs text-destructive mt-1",children:l.confirm.message})]}),d.jsx("button",{disabled:u,className:"w-full rounded-xl border border-primary px-3 py-2 text-primary hover:bg-primary hover:text-primary-foreground border border-border py-2 text-foreground",children:u?"Creating":"Sign up"}),d.jsxs("div",{className:"text-sm text-muted-foreground",children:["Already have an account?"," ",d.jsx("button",{type:"button",onClick:t,className:"text-primary/90 hover:underline",children:"Sign in"})]}),d.jsx("p",{className:"text-[11px] text-muted-foreground",children:"Well email a confirmation link to finish setting up your account."})]})}function _F(){const{user:t,signOut:e,loading:n}=Hr(),[r,i]=b.useState({username:null,avatar_url:null}),[a,l]=b.useState(!1),[u,h]=b.useState(!1),[p,g]=b.useState("login");if(b.useEffect(()=>{new URLSearchParams(location.hash.split("?")[1]||"").get("mode")==="signup"&&g("signup")},[]),b.useEffect(()=>{async function w(){if(!t)return;const{data:S,error:E}=await er.from("profiles").select("username, avatar_url").eq("id",t.id).maybeSingle();!E&&S&&(i(S),h(!!S.username))}w()},[t]),n)return d.jsx("div",{className:"p-6 text-muted-foreground",children:"Loading"});if(!t){const w=p==="login"?"Sign in":"Create account";return d.jsxs("div",{className:"px-4 pt-8",children:[d.jsx("h1",{className:"text-3xl font-semibold text-white mb-1",children:"Access your account"}),d.jsx("p",{className:"text-muted-foreground mb-4",children:"Sign in if you already have an account or create a new one to track your portfolio."}),d.jsx("div",{className:"max-w-[540px]",children:d.jsxs("div",{className:"rounded-2xl border border-border bg-card text-white shadow-2xl",children:[d.jsx("div",{className:"px-5 py-4 border-b border-border text-lg font-medium text-foreground",children:w}),d.jsx("div",{className:"p-5",children:p==="login"?d.jsx(wF,{onSwitchToSignup:()=>g("signup")}):d.jsx(bF,{onSwitchToLogin:()=>g("login")})})]})})]})}async function v(){if(!t)return;l(!0);const{error:w}=await er.from("profiles").upsert({id:t.id,username:r.username,avatar_url:r.avatar_url});if(l(!1),w)return console.error(w),alert("Couldnt save profile. "+w.message);h(!0),console.log("Profile saved")}return d.jsx("div",{className:"p-6 text-white",children:d.jsxs("div",{className:"max-w-3xl space-y-6",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"h-12 w-12 rounded-full bg-white/10 flex items-center justify-center",children:d.jsx("span",{className:"text-lg",children:t?.email?.[0]?.toUpperCase()||"U"})}),d.jsx("div",{className:"text-white/90 font-medium",children:t?.email})]}),d.jsxs("div",{className:"rounded-2xl border border-border bg-card",children:[d.jsx("div",{className:"px-4 py-3 border-b border-border text-muted-foreground",children:"Profile"}),d.jsxs("div",{className:"p-4 space-y-4",children:[d.jsxs("div",{children:[d.jsxs("label",{className:"text-sm text-muted-foreground",children:["Username ",u&&d.jsx("span",{className:"text-xs text-accent",children:"(locked)"})]}),d.jsx("input",{value:r.username??"",onChange:w=>!u&&i(S=>({...S,username:w.target.value})),disabled:u,className:`mt-1 w-full rounded-xl bg-input border border-border px-3 py-2 outline-none focus:border-ring text-foreground ${u?"opacity-60 cursor-not-allowed":""}`})]}),!u&&d.jsx("button",{onClick:v,disabled:a,className:"rounded-lg bg-primary text-primary-foreground hover:bg-primary/90 active:bg-primary/80 px-3 py-2 font-medium transition-all disabled:opacity-50",children:a?"Saving":"Save changes"}),u&&d.jsx("p",{className:"text-xs text-accent",children:"Username saved and locked. Cannot be changed."})]})]}),d.jsxs("div",{className:"rounded-2xl border border-border bg-card",children:[d.jsx("div",{className:"px-4 py-3 border-b border-border text-muted-foreground",children:"Security"}),d.jsx("div",{className:"p-4 space-y-3 text-muted-foreground",children:d.jsx("a",{className:"text-primary hover:underline",href:"/#/reset-password",children:"Change/Reset password"})})]}),d.jsx("div",{className:"pt-2",children:d.jsx("button",{onClick:e,className:"rounded-xl border border-primary px-3 py-2 text-primary hover:bg-primary hover:text-primary-foreground border border-border px-4 py-2 text-foreground",children:"Sign out"})})]})})}function $a(t,e=0){const n=typeof t=="number"?t:Number(t);return Number.isFinite(n)?n:e}function Lp(t,e=0,n=1){return Math.min(n,Math.max(e,t))}const nu=new Intl.NumberFormat("en-US",{notation:"compact",maximumFractionDigits:1});async function SF(){const t={lastUpdated:new Date().toISOString(),marketOverview:null,symbolInsights:[],heuristicHighlights:[]};try{const e=await fetch("https://api.binance.com/api/v3/ticker/24hr");if(!e.ok)return t;const i=(await e.json()).filter(z=>z.symbol.endsWith("USDT")).map(z=>{const K=$a(z.lastPrice),q=$a(z.highPrice),J=$a(z.lowPrice),X=$a(z.priceChangePercent),fe=Math.max(1e-8,q-J),Q=Math.max(0,Math.min(1,(K-J)/fe));return{...z,_pos:Q,_chg:X,_qv:$a(z.quoteVolume)}}),a=[...i].sort((z,K)=>K._chg-z._chg),l=[...i].sort((z,K)=>K._pos-z._pos),u=[...i].sort((z,K)=>K._qv-z._qv),h=l.filter(z=>z._chg>3&&z._pos>.7).slice(0,5),p=a.slice(0,5),g=u.slice(0,5),v=i.filter(z=>z._chg>15&&z._pos>.9).slice(0,5),w=h.map(z=>z.symbol.replace("USDT","")),S=p.map(z=>z.symbol.replace("USDT","")),E=g.map(z=>z.symbol.replace("USDT","")),x=v.map(z=>z.symbol.replace("USDT","")),_=h.length?[{label:"Avg 24h %",value:`${(h.reduce((z,K)=>z+K._chg,0)/h.length).toFixed(1)}%`},{label:"Avg range pos",value:`${(h.reduce((z,K)=>z+K._pos,0)/h.length*100).toFixed(0)}%`}]:void 0,T=p.length?[{label:"Top change",value:`${p[0]._chg.toFixed(1)}%`},{label:"Median change",value:`${p[Math.min(p.length-1,Math.floor(p.length/2))]._chg.toFixed(1)}%`}]:void 0,C=g.length?[{label:"Top volume",value:`${nu.format(g[0]._qv)} USDT`},{label:"Avg volume",value:`${nu.format(g.reduce((z,K)=>z+K._qv,0)/g.length)} USDT`}]:void 0,N=v.length?[{label:"Max 24h %",value:`${Math.max(...v.map(z=>z._chg)).toFixed(1)}%`},{label:"Count",value:`${v.length}`}]:void 0,I=[{title:"Breakout candidates near 24h highs",detail:w.length?w.join(", "):"No clear breakouts right now.",tags:["breakout","price-action"],metrics:_},{title:"Top momentum leaders (24h %)",detail:S.length?S.join(", "):"No strong momentum standouts.",tags:["momentum"],metrics:T},{title:"Highest liquidity (quote volume)",detail:E.length?E.join(", "):"Low liquidity market.",tags:["liquidity"],metrics:C},{title:"Potentially overheated (extended move)",detail:x.length?x.join(", "):"No overheated clusters.",tags:["risk","overextension"],metrics:N}],D=i.length===0?0:i.reduce((z,K)=>z+K._chg,0)/i.length,A=i.filter(z=>z._chg>0).length,L=i.reduce((z,K)=>z+K._qv,0),$={overallSentiment:D>2?"bullish - broad upside momentum":D<-2?"bearish - downside pressure dominating":"neutral - mixed 24h performance",keyInsights:I.slice(0,3).map(z=>z.detail),tradingRecommendations:D>2?["Consider momentum continuation setups","Use trailing stops to protect gains"]:D<-2?["Prioritize downside protection","Size positions conservatively"]:["Wait for confirmation before new entries","Monitor liquidity leaders for breakouts"],riskAssessment:L>0?`Market breadth: ${A}/${i.length} advancers. Quote volume ${nu.format(L)} USDT indicates ${L>5e9?"healthy":"muted"} participation.`:"Limited data available for risk assessment."},ee=p.slice(0,4).map(z=>{const K=z._chg>0?"bullish":z._chg<0?"bearish":"neutral",q=z._qv>1e9?"institutional":z._qv>2e8?"elevated":"steady",J=K==="bullish"?"Monitor for continuation if volume stays elevated.":K==="bearish"?"Consider defensive positioning or wait for stabilization.":"Wait for confirmation before taking action.";return{symbol:z.symbol.replace("USDT",""),analysisType:"quant-screen",signal:K,confidence:Lp((Math.abs(z._chg)/12+z._pos)/2),recommendation:J,reasoning:`24h change ${z._chg.toFixed(2)}%, range position ${(z._pos*100).toFixed(0)}%, quote volume ${nu.format(z._qv)} USDT.`,timeframe:"24h",metadata:{technicalScore:Math.round(Lp(50+z._chg,0,100)),volumeAnalysis:`${q} volume`,marketCondition:z._pos>.7?"pressing highs":z._pos<.3?"near lows":"mid-range",riskLevel:Math.abs(z._chg)>10?"high":Math.abs(z._chg)>6?"medium":"balanced"}}});return{lastUpdated:new Date().toISOString(),marketOverview:$,symbolInsights:ee,heuristicHighlights:I}}catch{return t}}async function kF(){try{const t=await Bs("/api/ai/insights");if(t.ok)return await t.json()}catch{}return await SF()}function EF(){const{isAuthenticated:t}=vr(),{toast:e}=g_(),[n,r]=b.useState({lastUpdated:null,marketOverview:null,symbolInsights:[],heuristicHighlights:[]}),i=l=>({lastUpdated:l.lastUpdated&&typeof l.lastUpdated=="string"?l.lastUpdated:new Date().toISOString(),marketOverview:l.marketOverview&&typeof l.marketOverview=="object"?l.marketOverview:null,symbolInsights:Array.isArray(l.symbolInsights)?l.symbolInsights:[],heuristicHighlights:Array.isArray(l.heuristicHighlights)?l.heuristicHighlights:[]}),a=En({queryKey:["ai-insights"],queryFn:kF,enabled:!1,retry:!1,refetchOnWindowFocus:!1,onSuccess:l=>{r(i(l)),e({title:"Insights updated"})},onError:()=>{e({title:"Failed to load insights",variant:"destructive"})}});return b.useEffect(()=>{t&&!n.marketOverview&&n.symbolInsights.length===0&&n.heuristicHighlights.length===0&&!a.isFetching&&a.refetch()},[t]),d.jsx("div",{className:"flex-1 overflow-hidden",children:d.jsxs("div",{className:"p-6 space-y-6",children:[d.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsxs("h1",{className:"flex min-w-0 items-center gap-2 break-keep whitespace-normal text-2xl font-bold text-foreground",children:[d.jsx(So,{className:"w-6 h-6"}),d.jsx("span",{className:"min-w-0 overflow-hidden text-ellipsis whitespace-nowrap",children:"AI Insights"})]}),d.jsx("p",{className:"text-muted-foreground",children:"Market themes & signals, refreshed on demand."}),n.lastUpdated&&(()=>{const l=new Date(n.lastUpdated);return Number.isNaN(l.getTime())?null:d.jsxs("p",{className:"text-sm text-muted-foreground",children:["Last updated ",hk(l,{addSuffix:!0})]})})()]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Ke,{variant:"link",asChild:!0,className:"whitespace-nowrap",children:d.jsx(wt,{href:"/gainers",children:"View full gainers table"})}),d.jsxs(Ke,{variant:"outline",size:"sm",onClick:()=>void a.refetch(),disabled:!t||a.isFetching,className:"min-h-[44px]","data-testid":"button-refresh-insights",children:[d.jsx(Ku,{className:`w-4 h-4 sm:mr-2 ${a.isFetching?"animate-spin":""}`}),d.jsx("span",{className:"hidden sm:inline",children:a.isFetching?"Refreshing...":"Refresh"})]})]})]}),d.jsxs("div",{className:"grid gap-6",children:[d.jsxs(tt,{className:"border-border",children:[d.jsxs(Cn,{className:"space-y-1",children:[d.jsxs(Nn,{className:"flex items-center gap-2",children:[d.jsx(So,{className:"w-5 h-5 text-accent"}),d.jsx("span",{children:"Market Overview"})]}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"Sentiment snapshot, key narratives, and risk context for the broader market."})]}),d.jsx(nt,{className:"space-y-6",children:n.marketOverview?d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Overall sentiment"}),d.jsx("p",{className:"mt-2 text-lg font-semibold text-foreground",children:n.marketOverview.overallSentiment})]}),n.marketOverview.keyInsights?.length?d.jsxs("div",{children:[d.jsx("div",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Key insights"}),d.jsx("ul",{className:"mt-2 space-y-2 text-sm text-foreground/90 list-disc list-inside",children:n.marketOverview.keyInsights.map((l,u)=>d.jsx("li",{children:l},u))})]}):null,n.marketOverview.tradingRecommendations?.length?d.jsxs("div",{children:[d.jsx("div",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Trading notes"}),d.jsx("ul",{className:"mt-2 space-y-2 text-sm text-foreground/90 list-disc list-inside",children:n.marketOverview.tradingRecommendations.map((l,u)=>d.jsx("li",{children:l},u))})]}):null,n.marketOverview.riskAssessment?d.jsxs("div",{children:[d.jsx("div",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Risk assessment"}),d.jsx("p",{className:"mt-2 text-sm text-foreground/90",children:n.marketOverview.riskAssessment})]}):null]}):d.jsx("p",{className:"text-sm text-muted-foreground",children:"No market overview available yet. Refresh to generate the latest summary."})})]}),d.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[d.jsxs(tt,{className:"border-border",children:[d.jsxs(Cn,{className:"space-y-1",children:[d.jsxs(Nn,{className:"flex items-center gap-2",children:[d.jsx(_0,{className:"w-5 h-5 text-accent"}),d.jsx("span",{children:"Featured Signals"})]}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"AI-ranked opportunities with confidence scores and supporting context."})]}),d.jsx(nt,{className:"space-y-4",children:n.symbolInsights.length?n.symbolInsights.slice(0,4).map(l=>{const u=l.confidence?Math.round(Lp(l.confidence)*100):null,h=[l.metadata?.technicalScore!==void 0?{label:"Tech score",value:`${l.metadata.technicalScore}`}:null,l.metadata?.volumeAnalysis?{label:"Volume",value:l.metadata.volumeAnalysis}:null,l.metadata?.marketCondition?{label:"Market",value:l.metadata.marketCondition}:null,l.metadata?.riskLevel?{label:"Risk",value:l.metadata.riskLevel}:null].filter(Boolean),p=l.signal==="bullish"?"bg-emerald-500/15 text-emerald-400 border-emerald-500/30":l.signal==="bearish"?"bg-red-500/15 text-red-400 border-red-500/30":"bg-muted text-muted-foreground border-border";return d.jsxs("div",{className:"rounded-xl border border-border/80 bg-background/40 p-4 shadow-sm",children:[d.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[d.jsx("span",{className:"text-lg font-semibold tracking-tight text-foreground",children:l.symbol}),l.signal?d.jsx(Xn,{variant:"outline",className:p,children:l.signal}):null,l.timeframe?d.jsx(Xn,{variant:"default",className:"bg-muted text-muted-foreground",children:l.timeframe}):null]}),l.recommendation?d.jsx("p",{className:"mt-1 text-sm text-foreground/90",children:l.recommendation}):null]}),d.jsx("div",{className:"flex items-center gap-2",children:u!==null?d.jsxs(Xn,{variant:"default",className:"bg-accent/10 text-accent",children:["Confidence ",u,"%"]}):null})]}),h.length?d.jsx("dl",{className:"mt-3 grid grid-cols-2 gap-x-4 gap-y-2 text-xs text-muted-foreground sm:text-sm",children:h.map(g=>d.jsxs("div",{className:"flex items-center justify-between gap-2",children:[d.jsx("dt",{className:"capitalize",children:g.label}),d.jsx("dd",{className:"font-medium text-foreground",children:g.value})]},`${l.symbol}-${g.label}`))}):null,l.reasoning?d.jsx("p",{className:"mt-3 text-sm leading-relaxed text-muted-foreground",children:l.reasoning}):null]},`${l.symbol}-${l.timeframe??""}`)}):d.jsx("p",{className:"text-sm text-muted-foreground",children:"No featured signals right now. Refresh to pull the latest AI rankings."})})]}),d.jsxs(tt,{className:"border-border",children:[d.jsxs(Cn,{className:"space-y-1",children:[d.jsxs(Nn,{className:"flex items-center gap-2",children:[d.jsx(tm,{className:"w-5 h-5 text-accent"}),d.jsx("span",{children:"Quant Highlights"})]}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"Breakout, momentum, and liquidity heuristics with supporting stats."})]}),d.jsx(nt,{className:"grid gap-4",children:n.heuristicHighlights.length?n.heuristicHighlights.map((l,u)=>{const h=l.tags.includes("breakout")?d.jsx(S0,{className:"w-5 h-5 text-accent"}):l.tags.includes("momentum")?d.jsx(Mr,{className:"w-5 h-5 text-accent"}):l.tags.includes("risk")?d.jsx(Vj,{className:"w-5 h-5 text-destructive"}):d.jsx(So,{className:"w-5 h-5 text-foreground"});return d.jsxs("div",{className:"rounded-xl border border-border/80 bg-background/40 p-4",children:[d.jsxs("div",{className:"flex items-start gap-3",children:[h,d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"text-sm font-semibold text-foreground",children:l.title}),d.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:l.detail})]})]}),l.metrics?.length?d.jsx("dl",{className:"mt-3 grid grid-cols-2 gap-x-4 gap-y-2 text-xs text-muted-foreground sm:text-sm",children:l.metrics.map(p=>d.jsxs("div",{className:"flex items-center justify-between gap-2",children:[d.jsx("dt",{children:p.label}),d.jsx("dd",{className:"font-medium text-foreground",children:p.value})]},`${l.title}-${p.label}`))}):null,d.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:l.tags.map(p=>d.jsx(Xn,{variant:"default",className:"text-xs",children:p},p))})]},`${l.title}-${u}`)}):d.jsx("p",{className:"text-sm text-muted-foreground",children:"Quant heuristics are unavailable. Refresh to regenerate the analytics snapshot."})})]})]})]})]})})}const CF={};var NF={};function TF(){const t=typeof import.meta<"u"?CF?.VITE_API_BASE:void 0,e=typeof process<"u"?NF?.NEXT_PUBLIC_API_BASE:void 0,n=(t??e??"").trim();return n?n.replace(/\/+$/,""):""}function jF({filter:t="latest",kind:e="all",currencies:n="",search:r="",q:i="",page:a=1}={}){const l=n.trim().toUpperCase(),u=TF(),h=new URLSearchParams({kind:e,page:String(a)});t!=="latest"&&h.set("filter",t),l&&h.set("currencies",l);const g=(r!==""?r:i).trim();g&&h.set("search",g);const w=`${u?`${u}`:""}/api/news?${h.toString()}`;return En({queryKey:["news",{filter:t,kind:e,currencies:l,search:g,page:a}],queryFn:async()=>{const S=await fetch(w);if(!S.ok)throw new Error(await S.text());return S.json()},staleTime:300*1e3,gcTime:1440*60*1e3})}var Fh="rovingFocusGroup.onEntryFocus",PF={bubbles:!1,cancelable:!0},Pl="RovingFocusGroup",[Up,Ck,IF]=L_(Pl),[RF,Nk]=Cl(Pl,[IF]),[AF,OF]=RF(Pl),Tk=b.forwardRef((t,e)=>d.jsx(Up.Provider,{scope:t.__scopeRovingFocusGroup,children:d.jsx(Up.Slot,{scope:t.__scopeRovingFocusGroup,children:d.jsx(DF,{...t,ref:e})})}));Tk.displayName=Pl;var DF=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:a,currentTabStopId:l,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:h,onEntryFocus:p,preventScrollOnEntryFocus:g=!1,...v}=t,w=b.useRef(null),S=Bt(e,w),E=xm(a),[x,_]=Du({prop:l,defaultProp:u??null,onChange:h,caller:Pl}),[T,C]=b.useState(!1),N=Os(p),I=Ck(n),D=b.useRef(!1),[A,L]=b.useState(0);return b.useEffect(()=>{const $=w.current;if($)return $.addEventListener(Fh,N),()=>$.removeEventListener(Fh,N)},[N]),d.jsx(AF,{scope:n,orientation:r,dir:E,loop:i,currentTabStopId:x,onItemFocus:b.useCallback($=>_($),[_]),onItemShiftTab:b.useCallback(()=>C(!0),[]),onFocusableItemAdd:b.useCallback(()=>L($=>$+1),[]),onFocusableItemRemove:b.useCallback(()=>L($=>$-1),[]),children:d.jsx(ut.div,{tabIndex:T||A===0?-1:0,"data-orientation":r,...v,ref:S,style:{outline:"none",...t.style},onMouseDown:ot(t.onMouseDown,()=>{D.current=!0}),onFocus:ot(t.onFocus,$=>{const ee=!D.current;if($.target===$.currentTarget&&ee&&!T){const z=new CustomEvent(Fh,PF);if($.currentTarget.dispatchEvent(z),!z.defaultPrevented){const K=I().filter(Q=>Q.focusable),q=K.find(Q=>Q.active),J=K.find(Q=>Q.id===x),fe=[q,J,...K].filter(Boolean).map(Q=>Q.ref.current);Ik(fe,g)}}D.current=!1}),onBlur:ot(t.onBlur,()=>C(!1))})})}),jk="RovingFocusGroupItem",Pk=b.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:a,children:l,...u}=t,h=Nl(),p=a||h,g=OF(jk,n),v=g.currentTabStopId===p,w=Ck(n),{onFocusableItemAdd:S,onFocusableItemRemove:E,currentTabStopId:x}=g;return b.useEffect(()=>{if(r)return S(),()=>E()},[r,S,E]),d.jsx(Up.ItemSlot,{scope:n,id:p,focusable:r,active:i,children:d.jsx(ut.span,{tabIndex:v?0:-1,"data-orientation":g.orientation,...u,ref:e,onMouseDown:ot(t.onMouseDown,_=>{r?g.onItemFocus(p):_.preventDefault()}),onFocus:ot(t.onFocus,()=>g.onItemFocus(p)),onKeyDown:ot(t.onKeyDown,_=>{if(_.key==="Tab"&&_.shiftKey){g.onItemShiftTab();return}if(_.target!==_.currentTarget)return;const T=UF(_,g.orientation,g.dir);if(T!==void 0){if(_.metaKey||_.ctrlKey||_.altKey||_.shiftKey)return;_.preventDefault();let N=w().filter(I=>I.focusable).map(I=>I.ref.current);if(T==="last")N.reverse();else if(T==="prev"||T==="next"){T==="prev"&&N.reverse();const I=N.indexOf(_.currentTarget);N=g.loop?FF(N,I+1):N.slice(I+1)}setTimeout(()=>Ik(N))}}),children:typeof l=="function"?l({isCurrentTabStop:v,hasTabStop:x!=null}):l})})});Pk.displayName=jk;var MF={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function LF(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function UF(t,e,n){const r=LF(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return MF[r]}function Ik(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function FF(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var $F=Tk,BF=Pk;function VF(t,e){return b.useReducer((n,r)=>e[n][r]??n,t)}var Rk=t=>{const{present:e,children:n}=t,r=zF(e),i=typeof n=="function"?n({present:r.isPresent}):b.Children.only(n),a=Bt(r.ref,WF(i));return typeof n=="function"||r.isPresent?b.cloneElement(i,{ref:a}):null};Rk.displayName="Presence";function zF(t){const[e,n]=b.useState(),r=b.useRef(null),i=b.useRef(t),a=b.useRef("none"),l=t?"mounted":"unmounted",[u,h]=VF(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const p=ru(r.current);a.current=u==="mounted"?p:"none"},[u]),nn(()=>{const p=r.current,g=i.current;if(g!==t){const w=a.current,S=ru(p);t?h("MOUNT"):S==="none"||p?.display==="none"?h("UNMOUNT"):h(g&&w!==S?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,h]),nn(()=>{if(e){let p;const g=e.ownerDocument.defaultView??window,v=S=>{const x=ru(r.current).includes(CSS.escape(S.animationName));if(S.target===e&&x&&(h("ANIMATION_END"),!i.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",p=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},w=S=>{S.target===e&&(a.current=ru(r.current))};return e.addEventListener("animationstart",w),e.addEventListener("animationcancel",v),e.addEventListener("animationend",v),()=>{g.clearTimeout(p),e.removeEventListener("animationstart",w),e.removeEventListener("animationcancel",v),e.removeEventListener("animationend",v)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:b.useCallback(p=>{r.current=p?getComputedStyle(p):null,n(p)},[])}}function ru(t){return t?.animationName||"none"}function WF(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var ld="Tabs",[HF]=Cl(ld,[Nk]),Ak=Nk(),[qF,Fm]=HF(ld),Ok=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:a,orientation:l="horizontal",dir:u,activationMode:h="automatic",...p}=t,g=xm(u),[v,w]=Du({prop:r,onChange:i,defaultProp:a??"",caller:ld});return d.jsx(qF,{scope:n,baseId:Nl(),value:v,onValueChange:w,orientation:l,dir:g,activationMode:h,children:d.jsx(ut.div,{dir:g,"data-orientation":l,...p,ref:e})})});Ok.displayName=ld;var Dk="TabsList",Mk=b.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,a=Fm(Dk,n),l=Ak(n);return d.jsx($F,{asChild:!0,...l,orientation:a.orientation,dir:a.dir,loop:r,children:d.jsx(ut.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:e})})});Mk.displayName=Dk;var Lk="TabsTrigger",Uk=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...a}=t,l=Fm(Lk,n),u=Ak(n),h=Bk(l.baseId,r),p=Vk(l.baseId,r),g=r===l.value;return d.jsx(BF,{asChild:!0,...u,focusable:!i,active:g,children:d.jsx(ut.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":p,"data-state":g?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:h,...a,ref:e,onMouseDown:ot(t.onMouseDown,v=>{!i&&v.button===0&&v.ctrlKey===!1?l.onValueChange(r):v.preventDefault()}),onKeyDown:ot(t.onKeyDown,v=>{[" ","Enter"].includes(v.key)&&l.onValueChange(r)}),onFocus:ot(t.onFocus,()=>{const v=l.activationMode!=="manual";!g&&!i&&v&&l.onValueChange(r)})})})});Uk.displayName=Lk;var Fk="TabsContent",$k=b.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:a,...l}=t,u=Fm(Fk,n),h=Bk(u.baseId,r),p=Vk(u.baseId,r),g=r===u.value,v=b.useRef(g);return b.useEffect(()=>{const w=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(w)},[]),d.jsx(Rk,{present:i||g,children:({present:w})=>d.jsx(ut.div,{"data-state":g?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":h,hidden:!w,id:p,tabIndex:0,...l,ref:e,style:{...t.style,animationDuration:v.current?"0s":void 0},children:w&&a})})});$k.displayName=Fk;function Bk(t,e){return`${t}-trigger-${e}`}function Vk(t,e){return`${t}-content-${e}`}var KF=Ok,zk=Mk,Wk=Uk,Hk=$k;const GF=KF,qk=b.forwardRef(({className:t,...e},n)=>d.jsx(zk,{ref:n,className:st("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));qk.displayName=zk.displayName;const Kk=b.forwardRef(({className:t,...e},n)=>d.jsx(Wk,{ref:n,className:st("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));Kk.displayName=Wk.displayName;const QF=b.forwardRef(({className:t,...e},n)=>d.jsx(Hk,{ref:n,className:st("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));QF.displayName=Hk.displayName;const JF=[{value:"latest",label:"Latest"},{value:"hot",label:"Hot"},{value:"rising",label:"Rising"},{value:"bullish",label:"Bullish"},{value:"bearish",label:"Bearish"},{value:"important",label:"Important"}],$h=["","BTC","ETH","SOL","XRP","AVAX","ADA","BNB","DOGE"];function ZF({article:t}){const e=b.useMemo(()=>{try{return iU(new Date(t.publishedAt),{addSuffix:!0})}catch{return"recently"}},[t.publishedAt]);return d.jsxs("a",{href:t.url,target:"_blank",rel:"noreferrer",className:"block rounded-xl border border-border bg-card p-4 transition hover:border-primary/50 hover:bg-card/80",children:[d.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-muted-foreground",children:[d.jsx(Xn,{variant:"default",className:"bg-muted text-foreground",children:t.source.name}),t.source.domain&&d.jsx("span",{className:"truncate text-muted-foreground/80",children:t.source.domain}),d.jsx("span",{"aria-hidden":"true",children:""}),d.jsx("span",{children:e}),t.currencies.length>0&&d.jsx("div",{className:"ml-auto flex flex-wrap gap-2",children:t.currencies.map(n=>d.jsx(Xn,{variant:"outline",className:"text-foreground",children:n},n))})]}),d.jsxs("div",{className:"mt-3 flex items-start gap-3",children:[d.jsx("h3",{className:"flex-1 text-base font-semibold leading-6 text-foreground",children:t.title}),d.jsx(op,{className:"h-4 w-4 shrink-0 text-muted-foreground","aria-hidden":"true"})]})]})}function YF(){const[t,e]=b.useState("latest"),[n,r]=b.useState("news"),[i,a]=b.useState(""),[l,u]=b.useState(1),[h,p]=b.useState(""),[g,v]=b.useState("");b.useEffect(()=>{const A=setTimeout(()=>{u(1),v(h.trim())},400);return()=>clearTimeout(A)},[h]);const{data:w,isLoading:S,isFetching:E,isError:x,error:_}=jF({filter:t,kind:n,currencies:i,q:g,page:l}),T=yr(),C=w?.data??[],N=!!w?.paging?.next,I=async()=>{await T.invalidateQueries({queryKey:["news"]})},D=x&&_ instanceof Error?_.message:null;return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-xl font-semibold text-foreground sm:text-2xl",children:"News & Insights"}),d.jsx("p",{className:"text-sm text-muted-foreground",children:"Stay ahead with curated headlines and sentiment straight from CryptoPanic."})]}),d.jsxs(Ke,{variant:"outline",size:"sm",onClick:I,disabled:E,className:"min-h-[44px]",children:[d.jsx(Ku,{className:"w-4 h-4 sm:mr-2"}),d.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx(GF,{value:t,onValueChange:A=>{e(A),u(1)},children:d.jsx(qk,{className:"w-full justify-start overflow-x-auto bg-muted/60",children:JF.map(A=>d.jsx(Kk,{value:A.value,className:"capitalize text-xs sm:text-sm",children:A.label},A.value))})}),d.jsxs("div",{className:"flex flex-wrap gap-2",children:[d.jsx(Ke,{size:"sm",variant:n==="news"?"default":"outline",onClick:()=>{r("news"),u(1)},className:"text-xs",children:"News"}),d.jsx(Ke,{size:"sm",variant:n==="media"?"default":"outline",onClick:()=>{r("media"),u(1)},className:"text-xs",children:"Media"})]}),d.jsxs("div",{className:"flex flex-wrap gap-2",children:[$h.slice(0,5).map(A=>{const L=i===A||!A&&i==="",$=A||"All";return d.jsx(Ke,{size:"sm",variant:L?"default":"outline",onClick:()=>{a(A),u(1)},className:"text-xs",children:$},$)}),$h.length>5&&d.jsxs(Ke,{size:"sm",variant:"outline",onClick:()=>a(""),className:"text-xs",children:["+",$h.length-5]})]}),d.jsx(wm,{value:h,onChange:A=>p(A.target.value),placeholder:"Search headlines",className:"w-full text-sm"})]}),d.jsxs("div",{className:"grid gap-3",children:[S&&d.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading news"}),x&&d.jsxs("div",{className:"rounded-md border border-destructive/40 bg-destructive/10 p-3 text-sm text-destructive",children:["Failed to load news",D?`: ${D}`:"."]}),!S&&!E&&!x&&C.length===0&&d.jsx("div",{className:"rounded-md border border-border bg-card/60 p-6 text-center text-sm text-muted-foreground",children:"No articles found for the current filters."}),C.map(A=>d.jsx(ZF,{article:A},A.id)),E&&!S&&d.jsx("div",{className:"text-xs text-muted-foreground",children:"Refreshing"})]}),d.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 border-t border-border pt-4 text-xs text-muted-foreground",children:[d.jsx("span",{children:"Source: CryptoPanic"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx(Ke,{size:"sm",variant:"outline",disabled:l<=1,onClick:()=>u(A=>Math.max(1,A-1)),children:"Previous"}),d.jsx(Ke,{size:"sm",variant:"outline",disabled:!N,onClick:()=>u(A=>A+1),children:"Next"})]})]})]})}function XF({title:t,children:e}){return d.jsx("div",{className:"min-h-[calc(100vh-56px)] flex items-center justify-center px-4 py-8",children:d.jsxs("div",{className:"w-full max-w-[420px] rounded-2xl border border-border bg-card text-white shadow-2xl",children:[d.jsx("div",{className:"px-5 sm:px-6 py-4 border-b border-border text-lg sm:text-xl font-medium text-foreground",children:t}),d.jsx("div",{className:"p-5 sm:p-6",children:e})]})})}const e$=Im({email:Io().email()});function t$(){const{register:t,handleSubmit:e,formState:{errors:n,isSubmitting:r}}=Lm({resolver:Um(e$)});async function i(a){const{error:l}=await er.auth.resetPasswordForEmail(a.email,{redirectTo:`${location.origin}/#/account`});if(l)return alert(l.message);alert("If that email exists, we sent a reset link.")}return d.jsx(XF,{title:"Reset password",children:d.jsxs("form",{onSubmit:e(i),className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-sm text-muted-foreground",children:"Email"}),d.jsx("input",{...t("email"),type:"email",className:"mt-1 w-full rounded-xl bg-card border border-white/10 px-3 py-2 outline-none focus:border-white/20"}),n.email&&d.jsx("p",{className:"text-xs text-red-400 mt-1",children:n.email.message})]}),d.jsx("button",{disabled:r,className:"w-full rounded-xl bg-white/10 hover:bg-white/15 border border-white/15 py-2",children:r?"Sending":"Send reset link"}),d.jsx("div",{className:"text-sm",children:d.jsx(wt,{className:"text-primary/90 hover:underline",to:"/account",children:"Back to account"})})]})})}function Ar({children:t}){const[e,n]=b.useState(!1);return d.jsxs("div",{className:"flex h-screen bg-background text-white",children:[d.jsx(rP,{isOpen:e,onClose:()=>n(!1)}),d.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[d.jsx(iP,{onMenuClick:()=>n(!e)}),d.jsx("main",{className:"flex-1 overflow-y-auto bg-background text-foreground",children:t})]})]})}function n$(){return d.jsx(i0,{children:d.jsxs(kj,{children:[d.jsx(gn,{path:"/",children:d.jsx(Va,{to:"/dashboard"})}),d.jsx(gn,{path:"/login",children:d.jsx(Va,{to:"/account"})}),d.jsx(gn,{path:"/signup",children:d.jsx(Va,{to:"/account"})}),d.jsx(gn,{path:"/reset-password",component:t$}),d.jsx(gn,{path:"/dashboard",children:d.jsx(Ar,{children:d.jsx(N2,{})})}),d.jsx(gn,{path:"/portfolio",children:d.jsx(Ar,{children:d.jsx(M2,{})})}),d.jsx(gn,{path:"/gainers",children:d.jsx(Ar,{children:d.jsx($2,{})})}),d.jsx(gn,{path:"/analyse/:symbol?",children:d.jsx(Ar,{children:d.jsx(pU,{})})}),d.jsx(gn,{path:"/watchlist",children:d.jsx(Ar,{children:d.jsx(xw,{children:d.jsx(yU,{})})})}),d.jsx(gn,{path:"/alerts",children:d.jsx(Ar,{children:d.jsx(xw,{children:d.jsx(xU,{})})})}),d.jsx(gn,{path:"/account",children:d.jsx(Ar,{children:d.jsx(_F,{})})}),d.jsx(gn,{path:"/ai-insights",children:d.jsx(Ar,{children:d.jsx(EF,{})})}),d.jsx(gn,{path:"/news",children:d.jsx(Ar,{children:d.jsx(YF,{})})}),d.jsx(gn,{children:d.jsx(Va,{to:"/dashboard"})})]})})}if(typeof window<"u"){const t=document.createElement("script");t.src="https://s3.tradingview.com/tv.js",t.async=!0,document.head.appendChild(t)}const Gk=new Ab({defaultOptions:{queries:{staleTime:2e4,refetchOnWindowFocus:!1,retry:1}}}),Qk=document.getElementById("root");if(!Qk)throw new Error("Root element not found");let Bh=null;function r$(){const t=d.jsx(ct.StrictMode,{children:d.jsxs(_C,{client:Gk,children:[d.jsx(jj,{children:d.jsx(p0,{hook:g0,children:d.jsx(i0,{children:d.jsx(Tj,{children:d.jsx(n$,{})})})})}),d.jsx(MC,{initialIsOpen:!1})]})});Bh||(Bh=XE.createRoot(Qk)),Bh.render(t)}r$();export{IM as A,qr as B,RM as C,F_ as D,er as E,B_ as F,Gk as G,BF as I,Rk as P,PM as R,Cl as a,nS as b,We as c,xm as d,L_ as e,Nk as f,dS as g,Bt as h,ot as i,d as j,WM as k,ut as l,q2 as m,tD as n,bS as o,dl as p,$F as q,b as r,AM as s,__ as t,Os as u,Du as v,Nl as w,st as x,Uj as y,Hr as z};
